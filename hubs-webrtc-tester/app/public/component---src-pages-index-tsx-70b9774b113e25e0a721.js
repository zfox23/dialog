/*! For license information please see component---src-pages-index-tsx-70b9774b113e25e0a721.js.LICENSE.txt */
(self.webpackChunkhubs_webrtc_tester=self.webpackChunkhubs_webrtc_tester||[]).push([[691],{9883:function(e,t,r){"use strict";r.d(t,{Ni:function(){return m},Xn:function(){return f}});var n=r(7294);var a=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,r=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(r,t),this.tags.push(r)}var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(n);try{var i=105===e.charCodeAt(1)&&64===e.charCodeAt(0);a.insertRule(e,i?0:a.cssRules.length)}catch(s){0}}else n.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}();var i=function(e){function t(e,n,c,d,u){for(var h,m,f,g,y,S=0,R=0,C=0,T=0,O=0,A=0,I=f=h=0,M=0,N=0,B=0,F=0,z=c.length,U=z-1,G="",H="",V="",$="";M<z;){if(m=c.charCodeAt(M),M===U&&0!==R+T+C+S&&(0!==R&&(m=47===R?10:47),T=C=S=0,z++,U++),0===R+T+C+S){if(M===U&&(0<N&&(G=G.replace(p,"")),0<G.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:G+=c.charAt(M)}m=59}switch(m){case 123:for(h=(G=G.trim()).charCodeAt(0),f=1,F=++M;M<z;){switch(m=c.charCodeAt(M)){case 123:f++;break;case 125:f--;break;case 47:switch(m=c.charCodeAt(M+1)){case 42:case 47:e:{for(I=M+1;I<U;++I)switch(c.charCodeAt(I)){case 47:if(42===m&&42===c.charCodeAt(I-1)&&M+2!==I){M=I+1;break e}break;case 10:if(47===m){M=I+1;break e}}M=I}}break;case 91:m++;case 40:m++;case 34:case 39:for(;M++<U&&c.charCodeAt(M)!==m;);}if(0===f)break;M++}if(f=c.substring(F,M),0===h&&(h=(G=G.replace(l,"").trim()).charCodeAt(0)),64===h){switch(0<N&&(G=G.replace(p,"")),m=G.charCodeAt(1)){case 100:case 109:case 115:case 45:N=n;break;default:N=D}if(F=(f=t(n,N,f,m,u+1)).length,0<L&&(y=o(3,f,N=r(D,G,B),n,x,E,F,m,u,d),G=N.join(""),void 0!==y&&0===(F=(f=y.trim()).length)&&(m=0,f="")),0<F)switch(m){case 115:G=G.replace(w,s);case 100:case 109:case 45:f=G+"{"+f+"}";break;case 107:f=(G=G.replace(b,"$1 $2"))+"{"+f+"}",f=1===P||2===P&&i("@"+f,3)?"@-webkit-"+f+"@"+f:"@"+f;break;default:f=G+f,112===d&&(H+=f,f="")}else f=""}else f=t(n,r(n,G,B),f,d,u+1);V+=f,f=B=N=I=h=0,G="",m=c.charCodeAt(++M);break;case 125:case 59:if(1<(F=(G=(0<N?G.replace(p,""):G).trim()).length))switch(0===I&&(h=G.charCodeAt(0),45===h||96<h&&123>h)&&(F=(G=G.replace(" ",":")).length),0<L&&void 0!==(y=o(1,G,n,e,x,E,H.length,d,u,d))&&0===(F=(G=y.trim()).length)&&(G="\0\0"),h=G.charCodeAt(0),m=G.charCodeAt(1),h){case 0:break;case 64:if(105===m||99===m){$+=G+c.charAt(M);break}default:58!==G.charCodeAt(F-1)&&(H+=a(G,h,m,G.charCodeAt(2)))}B=N=I=h=0,G="",m=c.charCodeAt(++M)}}switch(m){case 13:case 10:47===R?R=0:0===1+h&&107!==d&&0<G.length&&(N=1,G+="\0"),0<L*j&&o(0,G,n,e,x,E,H.length,d,u,d),E=1,x++;break;case 59:case 125:if(0===R+T+C+S){E++;break}default:switch(E++,g=c.charAt(M),m){case 9:case 32:if(0===T+S+R)switch(O){case 44:case 58:case 9:case 32:g="";break;default:32!==m&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===T+R+S&&(N=B=1,g="\f"+g);break;case 108:if(0===T+R+S+k&&0<I)switch(M-I){case 2:112===O&&58===c.charCodeAt(M-3)&&(k=O);case 8:111===A&&(k=A)}break;case 58:0===T+R+S&&(I=M);break;case 44:0===R+C+T+S&&(N=1,g+="\r");break;case 34:case 39:0===R&&(T=T===m?0:0===T?m:T);break;case 91:0===T+R+C&&S++;break;case 93:0===T+R+C&&S--;break;case 41:0===T+R+S&&C--;break;case 40:if(0===T+R+S){if(0===h)if(2*O+3*A==533);else h=1;C++}break;case 64:0===R+C+T+S+I+f&&(f=1);break;case 42:case 47:if(!(0<T+S+C))switch(R){case 0:switch(2*m+3*c.charCodeAt(M+1)){case 235:R=47;break;case 220:F=M,R=42}break;case 42:47===m&&42===O&&F+2!==M&&(33===c.charCodeAt(F+2)&&(H+=c.substring(F,M+1)),g="",R=0)}}0===R&&(G+=g)}A=O,O=m,M++}if(0<(F=H.length)){if(N=n,0<L&&(void 0!==(y=o(2,H,N,e,x,E,F,d,u,d))&&0===(H=y).length))return $+H+V;if(H=N.join(",")+"{"+H+"}",0!=P*k){switch(2!==P||i(H,2)||(k=0),k){case 111:H=H.replace(_,":-moz-$1")+H;break;case 112:H=H.replace(v,"::-webkit-input-$1")+H.replace(v,"::-moz-$1")+H.replace(v,":-ms-input-$1")+H}k=0}}return $+H+V}function r(e,t,r){var a=t.trim().split(f);t=a;var i=a.length,s=e.length;switch(s){case 0:case 1:var o=0;for(e=0===s?"":e[0]+" ";o<i;++o)t[o]=n(e,t[o],r).trim();break;default:var c=o=0;for(t=[];o<i;++o)for(var d=0;d<s;++d)t[c++]=n(e[d]+" ",a[o],r).trim()}return t}function n(e,t,r){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,r,n){var s=e+";",o=2*t+3*r+4*n;if(944===o){e=s.indexOf(":",9)+1;var c=s.substring(e,s.length-1).trim();return c=s.substring(0,e).trim()+c+";",1===P||2===P&&i(c,1)?"-webkit-"+c+c:c}if(0===P||2===P&&!i(s,1))return s;switch(o){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(O,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(c=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+c+s;case 1005:return h.test(s)?s.replace(u,":-webkit-")+s.replace(u,":-moz-")+s:s;case 1e3:switch(t=(c=s.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=s.replace(y,"tb");break;case 232:c=s.replace(y,"tb-rl");break;case 220:c=s.replace(y,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+c+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(t=(s=e).length-10,o=(c=(33===s.charCodeAt(t)?s.substring(0,t):s).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:s=s.replace(c,"-webkit-"+c)+";"+s;break;case 207:case 102:s=s.replace(c,"-webkit-"+(102<o?"inline-":"")+"box")+";"+s.replace(c,"-webkit-"+c)+";"+s.replace(c,"-ms-"+c+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return c=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+c+"-ms-flex-"+c+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(R,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(R,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):s.replace(c,"-webkit-"+c)+s.replace(c,"-moz-"+c.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===r+n&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+s}return s}function i(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),I(2!==t?n:n.replace(C,"$1"),r,t)}function s(e,t){var r=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(S," or ($1)").substring(4):"("+t+")"}function o(e,t,r,n,a,i,s,o,c,l){for(var p,u=0,h=t;u<L;++u)switch(p=A[u].call(d,e,h,r,n,a,i,s,o,c,l)){case void 0:case!1:case!0:case null:break;default:h=p}if(h!==t)return h}function c(e){return void 0!==(e=e.prefix)&&(I=null,e?"function"!=typeof e?P=1:(P=2,I=e):P=0),c}function d(e,r){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<L){var a=o(-1,r,n,n,x,E,0,0,0,0);void 0!==a&&"string"==typeof a&&(r=a)}var i=t(D,n,r,0,0);return 0<L&&(void 0!==(a=o(-2,i,n,n,x,E,i.length,0,0,0))&&(i=a)),"",k=0,E=x=1,i}var l=/^\0+/g,p=/[\0\r\f]/g,u=/: */g,h=/zoo|gra/,m=/([,: ])(transform)/g,f=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,_=/:(read-only)/g,y=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,R=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,O=/([^-])(image-set\()/,E=1,x=1,k=0,P=1,D=[],A=[],L=0,I=null,j=0;return d.use=function e(t){switch(t){case void 0:case null:L=A.length=0;break;default:if("function"==typeof t)A[L++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else j=0|!!t}return e},d.set=c,void 0!==e&&c(e),d},s="/*|*/",o=s+"}";function c(e){e&&d.current.insert(e+"}")}var d={current:null},l=function(e,t,r,n,a,i,l,p,u,h){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return d.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===p)return t+s;break;case 3:switch(p){case 102:case 112:return d.current.insert(r[0]+t),"";default:return t+(0===h?s:"")}case-2:t.split(o).forEach(c)}},p=function(e){void 0===e&&(e={});var t,r=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var n=new i(t);var s,o={};s=e.container||document.head;var c,p=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(p,(function(e){e.getAttribute("data-emotion-"+r).split(" ").forEach((function(e){o[e]=!0})),e.parentNode!==s&&s.appendChild(e)})),n.use(e.stylisPlugins)(l),c=function(e,t,r,a){var i=t.name;d.current=r,n(e,t.styles),a&&(u.inserted[i]=!0)};var u={key:r,sheet:new a({key:r,container:s,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:o,registered:{},insert:c};return u},u=(r(7867),r(2015)),h=(Object.prototype.hasOwnProperty,(0,n.createContext)("undefined"!=typeof HTMLElement?p():null)),m=(0,n.createContext)({}),f=(h.Provider,function(e){var t=function(t,r){return(0,n.createElement)(h.Consumer,null,(function(n){return e(t,n,r)}))};return(0,n.forwardRef)(t)});var g=r(8087);var b=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var i=t[n];if(null!=i){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=e(i);else for(var o in s="",i)i[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=i}s&&(a&&(a+=" "),a+=s)}}return a};var v=function(){return null};f((function(e,t){return(0,n.createElement)(m.Consumer,null,(function(r){var a=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=(0,u.O)(r,t.registered);return(0,g.M)(t,a,!1),t.key+"-"+a.name},i={css:a,cx:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e,t,r){var n=[],a=(0,g.f)(e,n,r);return n.length<2?r:a+t(n)}(t.registered,a,b(r))},theme:r},s=e.children(i);var o=(0,n.createElement)(v,null);return(0,n.createElement)(n.Fragment,null,o,s)}))}))},2717:function(e,t){"use strict";t.Z=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},2015:function(e,t,r){"use strict";r.d(t,{O:function(){return f}});var n=function(e){for(var t,r=0,n=0,a=e.length;a>=4;++n,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(a){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=r(2717),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,c=function(e){return 45===e.charCodeAt(1)},d=function(e){return null!=e&&"boolean"!=typeof e},l=(0,i.Z)((function(e){return c(e)?e:e.replace(s,"-$&").toLowerCase()})),p=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(o,(function(e,t,r){return h={name:t,styles:r,next:h},t}))}return 1===a[e]||c(e)||"number"!=typeof t||0===t?t:t+"px"};function u(e,t,r,n){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return h={name:r.name,styles:r.styles,next:h},r.name;if(void 0!==r.styles){var a=r.next;if(void 0!==a)for(;void 0!==a;)h={name:a.name,styles:a.styles,next:h},a=a.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=u(e,t,r[a],!1);else for(var i in r){var s=r[i];if("object"!=typeof s)null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":d(s)&&(n+=l(i)+":"+p(i,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var o=u(e,t,s,!1);switch(i){case"animation":case"animationName":n+=l(i)+":"+o+";";break;default:n+=i+"{"+o+"}"}}else for(var c=0;c<s.length;c++)d(s[c])&&(n+=l(i)+":"+p(i,s[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=h,s=r(e);return h=i,u(e,t,s,n)}}if(null==t)return r;var o=t[r];return void 0===o||n?r:o}var h,m=/label:\s*([^\s;\n{]+)\s*;/g;var f=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,i="";h=void 0;var s=e[0];null==s||void 0===s.raw?(a=!1,i+=u(r,t,s,!1)):i+=s[0];for(var o=1;o<e.length;o++)i+=u(r,t,e[o],46===i.charCodeAt(i.length-1)),a&&(i+=s[o]);m.lastIndex=0;for(var c,d="";null!==(c=m.exec(i));)d+="-"+c[1];return{name:n(i)+d,styles:i,next:h}}},395:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(4572),a=r(7294),i=r(2717),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=(0,i.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=r(9883),d=r(8087),l=r(2015),p=o,u=function(e){return"theme"!==e&&"innerRef"!==e},h=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?p:u};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=function(){return null},g=function e(t,r){var i,s,o;void 0!==r&&(i=r.label,o=r.target,s=t.__emotion_forwardProp&&r.shouldForwardProp?function(e){return t.__emotion_forwardProp(e)&&r.shouldForwardProp(e)}:r.shouldForwardProp);var p=t.__emotion_real===t,u=p&&t.__emotion_base||t;"function"!=typeof s&&p&&(s=t.__emotion_forwardProp);var g=s||h(u),b=!g("as");return function(){var v=arguments,_=p&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&_.push("label:"+i+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{0,_.push(v[0][0]);for(var y=v.length,w=1;w<y;w++)_.push(v[w],v[0][w])}var S=(0,c.Xn)((function(e,t,r){return(0,a.createElement)(c.Ni.Consumer,null,(function(n){var i=b&&e.as||u,c="",p=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=n}"string"==typeof e.className?c=(0,d.f)(t.registered,p,e.className):null!=e.className&&(c=e.className+" ");var y=(0,l.O)(_.concat(p),t.registered,m);(0,d.M)(t,y,"string"==typeof i);c+=t.key+"-"+y.name,void 0!==o&&(c+=" "+o);var w=b&&void 0===s?h(i):g,S={};for(var R in e)b&&"as"===R||w(R)&&(S[R]=e[R]);S.className=c,S.ref=r||e.innerRef;var C=(0,a.createElement)(i,S),T=(0,a.createElement)(f,null);return(0,a.createElement)(a.Fragment,null,T,C)}))}));return S.displayName=void 0!==i?i:"Styled("+("string"==typeof u?u:u.displayName||u.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=u,S.__emotion_styles=_,S.__emotion_forwardProp=s,Object.defineProperty(S,"toString",{value:function(){return"."+o}}),S.withComponent=function(t,a){return e(t,void 0!==a?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r||{},{},a):r).apply(void 0,_)},S}},b=g.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){b[e]=b(e)}));var v=b},8087:function(e,t,r){"use strict";r.d(t,{M:function(){return a},f:function(){return n}});function n(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]):n+=r+" "})),n}var a=function(e,t,r){var n=e.key+"-"+t.name;if(!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles),void 0===e.inserted[t.name]){var a=t;do{e.insert("."+n,a,e.sheet,!0);a=a.next}while(void 0!==a)}}},7329:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=n(r(1227)),i="awaitqueue";t.Logger=class{constructor(e){e?(this._debug=(0,a.default)(`${i}:${e}`),this._warn=(0,a.default)(`${i}:WARN:${e}`),this._error=(0,a.default)(`${i}:ERROR:${e}`)):(this._debug=(0,a.default)(i),this._warn=(0,a.default)(`${i}:WARN`),this._error=(0,a.default)(`${i}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},2186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwaitQueue=t.AwaitQueueRemovedTaskError=t.AwaitQueueStoppedError=void 0;const n=new(r(7329).Logger);class a extends Error{constructor(e){super(null!=e?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}}t.AwaitQueueStoppedError=a;class i extends Error{constructor(e){super(null!=e?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)}}t.AwaitQueueRemovedTaskError=i;t.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,t){if(t=null!=t?t:e.name,n.debug(`push() [name:${t}]`),"function"!=typeof e)throw new TypeError("given task is not a function");if(t)try{Object.defineProperty(e,"name",{value:t})}catch(r){}return new Promise(((r,a)=>{const i={id:this.nextTaskId++,task:e,name:t,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:e=>{if(i.completed)return;i.completed=!0,this.pendingTasks.delete(i.id),n.debug(`resolving task [name:${i.name}]`),r(e);const[t]=this.pendingTasks.values();t&&!t.executedAt&&this.execute(t)},reject:e=>{if(!i.completed&&(i.completed=!0,this.pendingTasks.delete(i.id),n.debug(`rejecting task [name:${i.name}]: %s`,String(e)),a(e),!this.stopping)){const[e]=this.pendingTasks.values();e&&!e.executedAt&&this.execute(e)}}};this.pendingTasks.set(i.id,i),1===this.pendingTasks.size&&this.execute(i)}))}stop(){n.debug("stop()"),this.stopping=!0;for(const e of this.pendingTasks.values())n.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new a);this.stopping=!1}remove(e){n.debug(`remove() [taskIdx:${e}]`);const t=Array.from(this.pendingTasks.values())[e];t?t.reject(new i):n.debug(`stop() | no task with given idx [taskIdx:${e}]`)}dump(){const e=Date.now();let t=0;return Array.from(this.pendingTasks.values()).map((r=>({idx:t++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0})))}async execute(e){if(n.debug(`execute() [name:${e.name}]`),e.executedAt)throw new Error("task already being executed");e.executedAt=Date.now();try{const t=await e.task();e.resolve(t)}catch(t){e.reject(t)}}}},1284:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return o(t,e),t},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var l=c(r(7294)),p=r(8090),u=r(1096),h=d(r(6110)),m=d(r(965)),f=d(r(9777)),g=/(%[coOs])|(%(([0-9]*[.])?[0-9]+)?[dif])/g,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.theme=function(e){return i(i({},e),{method:t.props.log.method})},t}return a(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.log.amount!==e.log.amount},t.prototype.render=function(){var e=this.props.log;return l.createElement(p.ThemeProvider,{theme:this.theme},l.createElement(u.Message,{"data-method":e.method},e.amount>1?l.createElement(u.AmountIcon,null,e.amount):l.createElement(u.Icon,null),e.timestamp?l.createElement(u.Timestamp,null,e.timestamp):l.createElement("span",null),l.createElement(u.Content,null,this.getNode())))},t.prototype.getNode=function(){var e,t=this.props.log,r=this.typeCheck(t);if(r)return r;if(t.data.length>0&&"string"==typeof t.data[0]){var n=null===(e=t.data[0].match(g))||void 0===e?void 0:e.length;if(n){var a=t.data.slice(1+n);return l.createElement(l.Fragment,null,l.createElement(h.default,{data:t.data}),a.length>0&&l.createElement(m.default,{quoted:!1,log:i(i({},t),{data:a}),linkifyOptions:this.props.linkifyOptions}))}}if(t.data.every((function(e){return"string"==typeof e}))&&"error"===t.method)return l.createElement(f.default,{error:t.data.join(" ")});var s="string"!=typeof t.data[0];return l.createElement(m.default,{log:t,quoted:s,linkifyOptions:this.props.linkifyOptions})},t.prototype.typeCheck=function(e){return e?!(e.data instanceof Array)&&l.createElement(h.default,{data:["%c[console-feed] %cFailed to parse message! %clog.data was not an array!","color: red","color: orange","color: cyan"]}):l.createElement(h.default,{data:["%c[console-feed] %cFailed to parse message! %clog was typeof "+typeof e+", but it should've been a log object","color: red","color: orange","color: cyan"]})},t}(l.Component);t.default=b},2477:function(e,t,r){"use strict";t.__esModule=!0;var n=r(2903);t.default=function(e,t,r){var a={};function i(e){return"number"!=typeof e?"NaN":Math.floor(e)}var s=null;function o(e){for(var t=["background","border","color","font","line","margin","padding","text","-webkit-background","-webkit-border","-webkit-font","-webkit-margin","-webkit-padding","-webkit-text"],r=0;r<t.length;r++)if(e.startsWith(t[r]))return!0;return!1}function c(e){for(var t in s)e.style[t]=s[t]}return a.s=function(e){return"string"!=typeof e?"":String(e)},a.f=function(e){return"number"!=typeof e?"NaN":e},a.i=i,a.d=i,a.c=function(e){s={};var t=document.createElement("span");t.setAttribute("style",e);for(var r=0;r<t.style.length;r++){var n=t.style[r];o(n)&&(s[n]=t.style[n])}},n.String.format(e,t,a,r,(function(e,t){if(t instanceof Node)e.appendChild(t);else if(void 0!==t){var r=(i=String(t),(o=document.createDocumentFragment()).appendChild(document.createTextNode(i)),o);if(s){var n=document.createElement("span");n.appendChild(r),c(n);for(var a=0;a<n.children.length;++a)c(n.children[a]);r=n}e.appendChild(r)}var i,o;return e}))}},2880:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(r(6163)),i=n(r(2477));t.default=function(e){var t=document.createElement("span");return i.default(e[0],e.slice(1),t),a.default(t.outerHTML.replace(/(?:\r\n|\r|\n)/g,"<br />"))}},2903:function(e,t){"use strict";t.__esModule=!0,t.String=void 0,function(e){function t(e,t){var r=e.charCodeAt(t);return 48<=r&&r<=57}e.format=function(e,r,n,a,i,s){if(!e||!r||!r.length)return{formattedResult:i(a,e),unusedSubstitutions:r};function o(){return'String.format("'+e+'", "'+Array.prototype.join.call(r,'", "')+'")'}function c(e){console.error(o()+": "+e)}for(var d,l=a,p=s||function(e,r){var n=[],a=0;function i(e){n.length&&"string"===n[n.length-1].type?n[n.length-1].value+=e:n.push({type:"string",value:e})}function s(e,t,r){n.push({type:"specifier",specifier:e,precision:t,substitutionIndex:r})}for(var o=0,c=e.indexOf("%",o);-1!==c&&e.length!==o;c=e.indexOf("%",o))if(i(e.substring(o,c)),"%"!==e[o=c+1]){if(t(e,o)){for(var d=parseInt(e.substring(o),10);t(e,o);)++o;d>0&&"$"===e[o]&&(a=d-1,++o)}var l=-1;if("."===e[o])for(++o,l=parseInt(e.substring(o),10),isNaN(l)&&(l=0);t(e,o);)++o;e[o]in r?(s(e[o],l,a),++a,++o):(i(e.substring(c,o+1)),++o)}else i("%"),++o;return i(e.substring(o)),n}(e,n),u={},h=0;h<p.length;++h){var m=p[h];"string"!==m.type?"specifier"===m.type?m.substitutionIndex>=r.length?(c("not enough substitution arguments. Had "+r.length+" but needed "+(m.substitutionIndex+1)+", so substitution was skipped."),l=i(l,"%"+(m.precision>-1?m.precision:"")+m.specifier)):(u[m.substitutionIndex]=!0,m.specifier in n?l=i(l,n[m.specifier](r[m.substitutionIndex],m)):(d="unsupported format character “"+m.specifier+"”. Treating as a string.",console.warn(o()+": "+d),l=i(l,r[m.substitutionIndex]))):c('Unknown token type "'+m.type+'" found.'):l=i(l,m.value)}var f=[];for(h=0;h<r.length;++h)h in u||f.push(r[h]);return{formattedResult:l,unusedSubstitutions:f}}}(t.String||(t.String={}))},1096:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Content=t.Timestamp=t.AmountIcon=t.Icon=t.Message=t.Root=void 0;var a=n(r(3727)),i=function(e,t,r){return r["LOG_"+t.toUpperCase()+"_"+e.toUpperCase()]||r["LOG_"+e.toUpperCase()]};t.Root=a.default("div")({wordBreak:"break-word",width:"100%"}),t.Message=a.default("div")((function(e){var t=e.theme,r=t.styles,n=t.method;return{position:"relative",display:"flex",color:i("color",n,r),backgroundColor:i("background",n,r),borderTop:"1px solid "+i("border",n,r),borderBottom:"1px solid "+i("border",n,r),marginTop:-1,marginBottom:+/^warn|error$/.test(n),paddingLeft:10,boxSizing:"border-box","& *":{verticalAlign:"top",boxSizing:"border-box",fontFamily:r.BASE_FONT_FAMILY,whiteSpace:"pre-wrap",fontSize:r.BASE_FONT_SIZE},"& a":{color:r.LOG_LINK_COLOR}}})),t.Icon=a.default("div")((function(e){var t=e.theme,r=t.styles,n=t.method;return{width:r.LOG_ICON_WIDTH,height:r.LOG_ICON_HEIGHT,backgroundImage:i("icon",n,r),backgroundRepeat:"no-repeat",backgroundSize:r.LOG_ICON_BACKGROUND_SIZE,backgroundPosition:"50% 50%"}})),t.AmountIcon=a.default("div")((function(e){var t=e.theme,r=t.styles,n=t.method;return{height:"16px",margin:"1px 0",whiteSpace:"nowrap",fontSize:"10px",lineHeight:"17px",padding:"0px 3px",background:i("amount_background",n,r),color:i("amount_color",n,r),borderRadius:"8px",minWidth:"18px",textAlign:"center"}})),t.Timestamp=a.default("div")((function(e){var t=e.theme,r=t.styles;t.method;return{padding:"3px 0px 0px 5px",width:"110px",height:r.LOG_ICON_HEIGHT,color:"dimgray"}})),t.Content=a.default("div")((function(e){return{clear:"right",position:"relative",padding:e.theme.styles.PADDING,marginLeft:15,minHeight:18,flex:"auto",width:"calc(100% - 15px)"}}))},9456:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return o(t,e),t},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var l=c(r(7294)),p=r(8090),u=d(r(6491)),h=r(1096),m=d(r(1284)),f=function(e){return{variant:e.variant||"light",styles:i(i({},u.default(e)),e.styles)}},g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={theme:f(t.props),prevStyles:t.props.styles,prevVariant:t.props.variant},t}return a(t,e),t.getDerivedStateFromProps=function(e,t){return e.variant!==t.prevVariant||JSON.stringify(e.styles)!==JSON.stringify(e.prevStyles)?{theme:f(e),prevStyles:e.styles,prevVariant:e.variant}:null},t.prototype.render=function(){var e=this,t=this.props,r=t.filter,n=void 0===r?[]:r,a=t.logs,s=void 0===a?[]:a,o=t.searchKeywords,c=t.logFilter,d=t.logGrouping,u=void 0===d||d;if(o){var f=new RegExp(o),g=c||function(e){try{return f.test((t=e,r=new Set,JSON.stringify(t,(function(e,t){if("object"==typeof t&&null!==t){if(r.has(t))return;r.add(t)}return t}))))}catch(n){return!0}var t,r};s=s.filter(g)}return u&&(s=s.reduce((function(e,t){var r=e[e.length-1];return r&&r.amount&&r.method===t.method&&r.data.length===t.data.length&&r.data.every((function(e,r){return t.data[r]===e}))?(r.amount+=1,e):(e.push(i(i({},t),{amount:1})),e)}),[])),l.createElement(p.ThemeProvider,{theme:this.state.theme},l.createElement(h.Root,null,s.map((function(t,r){return 0!==n.length&&t.method&&-1===n.indexOf(t.method)?null:l.createElement(m.default,{log:t,key:t.id||t.method+"-"+r,linkifyOptions:e.props.linkifyOptions})}))))},t}(l.PureComponent);t.default=g},9777:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=i(r(7294)),c=s(r(8175));t.default=function(e){var t,r,n,a=e.error,i=-1===(n=(r=a).indexOf("\n"))?r:r.substr(0,n),s=a.split("\n");return s.length>1&&(t=s.slice(1)),t?o.createElement("details",null,o.createElement("summary",{style:{outline:"none",cursor:"pointer"}},i),o.createElement(c.default,null,t.join("\n\r"))):o.createElement(c.default,null,a)}},6110:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var d=o(r(7294)),l=r(7330),p=c(r(2880)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return d.createElement(l.Root,{"data-type":"formatted",dangerouslySetInnerHTML:{__html:p.default(this.props.data||[])}})},t}(d.PureComponent);t.default=u},965:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var d=o(r(7294)),l=r(8090),p=r(7330),u=c(r(8175)),h=c(r(1194)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.theme,n=t.quoted;return t.log.data.map((function(t,a){if("string"==typeof t){var i=!n&&t.length?t+" ":d.createElement("span",null,d.createElement("span",null,'"'),d.createElement("span",{style:{color:r.styles.OBJECT_VALUE_STRING_COLOR}},t),d.createElement("span",null,'" '));return d.createElement(p.Root,{"data-type":"string",key:a},d.createElement(u.default,{options:e.props.linkifyOptions},i))}return d.createElement(h.default,{data:t,key:a})}))},t}(d.PureComponent);t.default=l.withTheme(m)},7330:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Constructor=t.HTML=t.Table=t.Root=void 0;var a=n(r(3727));t.Root=a.default("div")({display:"inline-block",wordBreak:"break-all","&::after":{content:"' '",display:"inline-block"},"& > li, & > ol, & > details":{backgroundColor:"transparent !important",display:"inline-block"},"& ol:empty":{paddingLeft:"0 !important"}}),t.Table=a.default("span")({"& > li":{display:"inline-block",marginTop:5}}),t.HTML=a.default("span")({display:"inline-block","& div:hover":{backgroundColor:"rgba(255, 220, 158, .05) !important",borderRadius:"2px"}}),t.Constructor=a.default("span")({"& > span > span:nth-child(1)":{opacity:.6}})},1194:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return o(t,e),t},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var l=r(8090),p=c(r(7294)),u=r(3017),h=d(r(9777)),m=r(7330),f="__console_feed_remaining__";var g=function(e){if(!e||e.length<1)return 0;if(void 0===e[e.length-1].toString().split(f)[1])return e.length;var t=parseInt(e[e.length-1].toString().split(f)[1]);return e.length-1+t},b=function(e){var t=e.name,r=e.data,n=r;if("object"==typeof r&&!Array.isArray(r)&&null!==r){var a={};for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];if(Array.isArray(s)){var o=g(s);a[i]=new Array(o)}else a[i]=s}n=Object.assign(Object.create(Object.getPrototypeOf(r)),a)}return"string"==typeof t?p.createElement("span",null,p.createElement(u.ObjectName,{name:t}),p.createElement("span",null,": "),p.createElement(u.ObjectPreview,{data:n})):p.createElement(u.ObjectPreview,{data:n})},v=function(e){var t=e.name,r=e.data,n=e.isNonenumerable,a=void 0!==n&&n;return t===f?r>0?p.createElement("span",null,r," more..."):null:p.createElement("span",null,"string"==typeof t?p.createElement(u.ObjectName,{name:t,dimmed:a}):p.createElement(u.ObjectPreview,{data:t}),p.createElement("span",null,": "),p.createElement(u.ObjectValue,{object:r}))},_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.data,r=e.theme,n=r.styles,a=r.method,s=t instanceof HTMLElement,o="table"===a;return p.createElement(m.Root,{"data-type":o?"table":s?"html":"object"},o?p.createElement(m.Table,null,p.createElement(u.Inspector,i({},this.props,{theme:n,table:!0})),p.createElement(u.Inspector,i({},this.props,{theme:n,nodeRenderer:this.nodeRenderer.bind(this)}))):s?p.createElement(m.HTML,null,p.createElement(u.DOMInspector,i({},this.props,{theme:n}))):p.createElement(u.Inspector,i({},this.props,{theme:n,nodeRenderer:this.nodeRenderer.bind(this)})))},t.prototype.getCustomNode=function(e){var t,r,n,a=this.props.theme.styles,i=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if("Function"===i)return p.createElement("span",{style:{fontStyle:"italic"}},p.createElement(u.ObjectPreview,{data:e})," {",p.createElement("span",{style:{color:"rgb(181, 181, 181)"}},e.body),"}");if(e instanceof Error&&"string"==typeof e.stack)return p.createElement(h.default,{error:e.stack});if("Promise"===i)return p.createElement("span",{style:{fontStyle:"italic"}},"Promise ","{",p.createElement("span",{style:{opacity:.6}},"<pending>"),"}");if(e instanceof HTMLElement)return p.createElement(m.HTML,null,p.createElement(u.DOMInspector,{data:e,theme:a}));if(Array.isArray(e)){var s=g(e),o=a.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES;"string"==typeof e[e.length-1]&&e[e.length-1].includes(f)&&(e=e.slice(0,-1));var c=e.slice(0,o).map((function(e,t){return Array.isArray(e)?p.createElement(u.ObjectValue,{key:t,object:new Array(g(e))}):p.createElement(u.ObjectValue,{key:t,object:e})}));return s>o&&c.push(p.createElement("span",{key:"ellipsis"},"…")),p.createElement(p.Fragment,null,p.createElement("span",{style:a.objectDescription},0===s?"":"("+s+") "),p.createElement("span",{style:a.preview},"[",(n=", ",0===(r=c).length?[]:r.slice(1).reduce((function(e,t){return e.concat([n,t])}),[r[0]])),"]"))}return null},t.prototype.nodeRenderer=function(e){var t=e.depth,r=e.name,n=e.data,a=e.isNonenumerable;if(0===t)return this.getCustomNode(n)||p.createElement(b,{name:r,data:n});if("string"==typeof n&&n.includes(f)&&(r=f,n=n.split(f)[1]),"constructor"===r)return p.createElement(m.Constructor,null,p.createElement(u.ObjectLabel,{name:"<constructor>",data:n.name,isNonenumerable:a}));var i=this.getCustomNode(n);return i?p.createElement(m.Root,null,p.createElement(u.ObjectName,{name:r}),p.createElement("span",null,": "),i):p.createElement(v,{name:r,data:n,isNonenumerable:a})},t}(p.PureComponent);t.default=l.withTheme(_)},6491:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)};t.__esModule=!0;var a=r(3017);t.default=function(e){var t="light"===(e.variant||"light"),r=t?a.chromeLight:a.chromeDark;return n(n({},r),{PADDING:"3px 22px 2px 0",LOG_COLOR:r.BASE_COLOR,LOG_BACKGROUND:"transparent",LOG_BORDER:t?"rgb(236,236,236)":"rgb(44,44,44)",LOG_ICON_WIDTH:10,LOG_ICON_HEIGHT:18,LOG_ICON:"none",LOG_AMOUNT_BACKGROUND:"#42597f",LOG_AMOUNT_COLOR:"#8d8f91",LOG_LINK_COLOR:t?"rgb(66, 66, 66)":"rgb(177, 177, 177)",LOG_WARN_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACkSURBVChTbY7BCoJQFERn0Q/3BX1JuxQjsSCXiV8gtCgxhCIrKIRIqKDVzXl5w5cNHBjm6eGinXiAXu5inY2xYm/mbpIh+vcFhLA3sx0athNUhymEsP+10lAEEA17x8o/9wFuNGnYuVlWve0SQl7P0sBu3aq2R1Q/1JzSkYGd29eqNv2wjdnUuvNRciC/N+qe+7gidbA8zyHkOINsvA/sumcOkjcabcBmw2+mMgAAAABJRU5ErkJggg==)",LOG_WARN_BACKGROUND:t?"rgb(255,250,220)":"#332b00",LOG_WARN_COLOR:t?"rgb(73,45,2)":"#ffdc9e",LOG_WARN_BORDER:t?"rgb(255,244,181)":"#650",LOG_WARN_AMOUNT_BACKGROUND:"#ffbb17",LOG_WARN_AMOUNT_COLOR:"#8d8f91",LOG_ERROR_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADESURBVChTY4CB7ZI8tmfU5E6e01b+DMIgNkgMKg0BR9Vkux6YWPx/bemIgkFiIDmwogOaqrYPzazAEm8DwuGKYGyQHEgNw0VT05Mwib9v3v7/kJEHxiA2TDFIDcNNU4vPMFPACj58/P/v40cwGyYOUsNwy8IZRSFIEUgxskKQGoZrzp4ErQapYbgYHG371M4dLACTQGaD5EBqwD6/FpzQ9dTBE64IhkFiIDmwIhi4mlJqey8o4eR9r8jPIAxig8QgsgwMAFZz1YtGPXgjAAAAAElFTkSuQmCC)",LOG_ERROR_BACKGROUND:t?"rgb(255,235,235)":"#290000",LOG_ERROR_BORDER:t?"rgb(253,204,205)":"#5b0000",LOG_ERROR_COLOR:t?"rgb(252,0,5)":"#ff8080",LOG_ERROR_AMOUNT_BACKGROUND:"#dc2727",LOG_ERROR_AMOUNT_COLOR:"#8d8f91",LOG_DEBUG_ICON:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 459 459'%3e%3cpath fill='%234D88FF' d='M433.5 127.5h-71.4a177.7 177.7 0 0 0-45.9-51L357 35.7 321.3 0l-56.1 56.1c-10.2-2.6-23-5.1-35.7-5.1s-25.5 2.5-35.7 5.1L137.7 0 102 35.7l40.8 40.8a177.7 177.7 0 0 0-45.9 51H25.5v51H79c-2.5 7.7-2.5 17.9-2.5 25.5v25.5h-51v51h51V306a88 88 0 0 0 2.5 25.5H25.5v51h71.4A152.2 152.2 0 0 0 229.5 459c56.1 0 107.1-30.6 132.6-76.5h71.4v-51H380c2.5-7.7 2.5-17.9 2.5-25.5v-25.5h51v-51h-51V204c0-7.7 0-17.9-2.5-25.5h53.5v-51zm-153 204h-102v-51h102v51zm0-102h-102v-51h102v51z'/%3e%3c/svg%3e\")",LOG_DEBUG_BACKGROUND:"",LOG_DEBUG_BORDER:"",LOG_DEBUG_COLOR:"#4D88FF",LOG_COMMAND_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABaSURBVChTY6AtmDx5cvnUqVP1oFzsoL+/XwCo8DEQv584caIVVBg7mDBhghxQ4Y2+vr6vU6ZM8YAKYwdA00SB+CxQ8S+g4jCoMCYgSiFRVpPkGaAiHMHDwAAA5Ko+F4/l6+MAAAAASUVORK5CYII=)",LOG_RESULT_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABpSURBVChTY6A92LNnj96uXbvKoVzsYMeOHVbbt29/D1T4eP/+/QJQYVSwe/duD6CCr0B8A8iWgwqjAqBk2NatW38B6bPbtm0TBYkBFbsA+c9ANFgRCBCtEASAAoSthgGiPAMD2IOHgQEA521bM7uG52wAAAAASUVORK5CYII=)",LOG_INFO_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADISURBVChTY4ABp/AztmZBZ07qe538rO114rOa8+GTskYHbKHSEOARd6nLIOTsf61gIA46U6kVePYQiK3uc/K/hPG+LrCi8IyrtkZh5yCKgk/80w46ba0RdGYGhH/2v6rXyf88qtttGVwSLp2ECQLxeiAu1wo6uwpJ7L+o2f6TDA6xZz8jCyqFnuHXCj4djywmZXHoM/EK0azGqhBsNYpngL6VCTnGqRF4xgKo+D5IDO4ZEEAKnjcQBafvqwWf/YoSPDCAP8AZGAC7mLM81zgOTQAAAABJRU5ErkJggg==)",BASE_FONT_FAMILY:"Consolas, Lucida Console, Courier New, monospace",BASE_FONT_SIZE:"12px",ARROW_FONT_SIZE:10,OBJECT_VALUE_STRING_COLOR:"rgb(233,63,59)"})}},3727:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(r(395));t.default=a.default},5288:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(r(8965)),i=n(r(6910)),s=r(5575);t.default=function(e,t,r,n){void 0===r&&(r=!0);for(var o=e,c={pointers:{},src:{npm:"https://npmjs.com/package/console-feed",github:"https://github.com/samdenty/console-feed"}},d=function(e){var a=o[e];o[e]=function(){a.apply(this,arguments);var o=[].slice.call(arguments);setTimeout((function(){var a=i.default(e,o);if(a){var c=a;r&&(c=s.Encode(a,n)),t(c,a)}}))},c.pointers[e]=a},l=0,p=a.default;l<p.length;l++){d(p[l])}return o.feed=c,o}},9721:function(e,t){"use strict";t.__esModule=!0,t.default=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+"-"+Date.now()}},6910:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var d=c(r(9721)),l=s(r(5226)),p=s(r(2391)),u=s(r(7769));t.default=function(e,t,r){var a=r||d.default();switch(e){case"clear":return{method:e,id:a};case"count":return!!(i="string"==typeof t[0]?t[0]:"default")&&n(n({},p.increment(i)),{id:a});case"time":case"timeEnd":var i;return!!(i="string"==typeof t[0]?t[0]:"default")&&("time"===e?(l.start(i),!1):n(n({},l.stop(i)),{id:a}));case"assert":if(0!==t.length){var s=u.test.apply(u,o([t[0]],t.slice(1)));if(s)return n(n({},s),{id:a})}return!1;case"error":return{method:e,id:a,data:t.map((function(e){try{return e.stack||e}catch(t){return e}}))};default:return{method:e,id:a,data:t}}}},7769:function(e,t){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n};t.__esModule=!0,t.test=void 0,t.test=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return!e&&(0===t.length&&t.push("console.assert"),{method:"error",data:r(["Assertion failed:"],t)})}},2391:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.increment=void 0;var a=r(3585),i=n(r(1616)),s=r(4138);t.increment=function(e){return i.default(s.count(e)),{method:"log",data:[e+": "+a.state.count[e]]}}},5226:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.stop=t.start=void 0;var a=r(3585),i=n(r(1616)),s=r(4138);t.start=function(e){i.default(s.timeStart(e))},t.stop=function(e){var t=null===a.state||void 0===a.state?void 0:a.state.timings[e];return t&&!t.end?(i.default(s.timeEnd(e)),{method:"log",data:[e+": "+a.state.timings[e].time+"ms"]}):{method:"warn",data:["Timer '"+e+"' does not exist"]}}},4138:function(e,t){"use strict";t.__esModule=!0,t.timeEnd=t.timeStart=t.count=void 0,t.count=function(e){return{type:"COUNT",name:e}},t.timeStart=function(e){return{type:"TIME_START",name:e}},t.timeEnd=function(e){return{type:"TIME_END",name:e}}},1616:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var a=n(r(3591)),i=r(3585);t.default=function(e){i.update(a.default(i.state,e))}},3591:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};t.__esModule=!0,t.initialState=void 0,t.initialState={timings:{},count:{}};var n=function(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()};t.default=function(e,a){var i,s,o;switch(void 0===e&&(e=t.initialState),a.type){case"COUNT":var c=e.count[a.name]||0;return r(r({},e),{count:r(r({},e.count),(i={},i[a.name]=c+1,i))});case"TIME_START":return r(r({},e),{timings:r(r({},e.timings),(s={},s[a.name]={start:n()},s))});case"TIME_END":var d=e.timings[a.name],l=n(),p=l-d.start;return r(r({},e),{timings:r(r({},e.timings),(o={},o[a.name]=r(r({},d),{end:l,time:p}),o))});default:return e}}},3585:function(e,t){"use strict";t.__esModule=!0,t.update=t.state=void 0,t.update=function(e){t.state=e}},1254:function(e,t){"use strict";t.__esModule=!0,t.default={type:"BigInt",shouldTransform:function(e,t){return"bigint"==typeof t},toSerializable:function(e){return e+"n"},fromSerializable:function(e){return BigInt(e.slice(0,-1))}}},76:function(e,t){"use strict";t.__esModule=!0,t.default={type:"Function",lookup:Function,shouldTransform:function(e,t){return"function"==typeof t},toSerializable:function(e){var t="";try{t=e.toString().substring(t.indexOf("{")+1,t.lastIndexOf("}"))}catch(r){}return{name:e.name,body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable:function(e){try{var t=function(){};return"string"==typeof e.name&&Object.defineProperty(t,"name",{value:e.name,writable:!1}),"string"==typeof e.body&&Object.defineProperty(t,"body",{value:e.body,writable:!1}),"string"==typeof e.proto&&(t.constructor={name:e.proto}),t}catch(r){return e}}}},9329:function(e,t){"use strict";var r;function n(e){for(var t={},r=0,n=e.attributes;r<n.length;r++){var a=n[r];t[a.name]=a.value}return t}t.__esModule=!0,t.default={type:"HTMLElement",shouldTransform:function(e,t){return t&&t.children&&"string"==typeof t.innerHTML&&"string"==typeof t.tagName},toSerializable:function(e){return{tagName:e.tagName.toLowerCase(),attributes:n(e),innerHTML:e.innerHTML}},fromSerializable:function(e){try{var t=(r||(r=document.implementation.createHTMLDocument("sandbox"))).createElement(e.tagName);t.innerHTML=e.innerHTML;for(var n=0,a=Object.keys(e.attributes);n<a.length;n++){var i=a[n];try{t.setAttribute(i,e.attributes[i])}catch(s){}}return t}catch(s){return e}}}},5761:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};t.__esModule=!0,t.default={type:"Map",lookup:Map,shouldTransform:function(e,t){return t&&t.constructor&&"Map"===t.constructor.name},toSerializable:function(e){var t={};return e.forEach((function(e,r){var n="object"==typeof r?JSON.stringify(r):r;t[n]=e})),{name:"Map",body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable:function(e){var t=e.body,n=r({},t);return"string"==typeof e.proto&&(n.constructor={name:e.proto}),n}}},4290:function(e,t){"use strict";var r;t.__esModule=!0,function(e){e[e.infinity=0]="infinity",e[e.minusInfinity=1]="minusInfinity",e[e.minusZero=2]="minusZero"}(r||(r={})),t.default={type:"Arithmetic",lookup:Number,shouldTransform:function(e,t){return"number"===e&&(t===1/0||t===-1/0||function(e){return 1/e==-1/0}(t))},toSerializable:function(e){return e===1/0?r.infinity:e===-1/0?r.minusInfinity:r.minusZero},fromSerializable:function(e){return e===r.infinity?1/0:e===r.minusInfinity?-1/0:e===r.minusZero?-0:e}}},5575:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.Decode=t.Encode=void 0;var a=n(r(4290)),i=n(r(1254)),s=n(r(76)),o=n(r(9329)),c=n(r(5761)),d=n(r(5954)),l=[o.default,s.default,a.default,c.default,i.default],p=new d.default;p.addTransforms(l),t.Encode=function(e,t){return JSON.parse(p.encode(e,t))},t.Decode=function(e){var t=p.decode(JSON.stringify(e));return t.data.pop(),t}},5954:function(e,t){"use strict";t.__esModule=!0;var r="@t",n=/^#*@(t|r)$/,a="__console_feed_remaining__",i=(0,eval)("this"),s="function"==typeof ArrayBuffer,o="function"==typeof Map,c="function"==typeof Set,d=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],l=Array.prototype.slice,p={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},u=function(){function e(e,t,r){this.references=e,this.transforms=t,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0,this.limit=null!=r?r:1/0}return e._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},e.prototype._createCircularCandidate=function(e,t,r){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:r,refIdx:-1})},e.prototype._applyTransform=function(e,t,n,a){var i=Object.create(null),s=a.toSerializable(e);return"object"==typeof s&&this._createCircularCandidate(e,t,n),i[r]=a.type,i.data=this._handleValue((function(){return s}),t,n),i},e.prototype._handleArray=function(e){for(var t=[],r=Math.min(e.length,this.limit),n=e.length-r,i=function(r){t[r]=s._handleValue((function(){return e[r]}),t,r)},s=this,o=0;o<r;o++)i(o);return t[r]=a+n,t},e.prototype._handlePlainObject=function(e){var t,r,i=Object.create(null),s=0,o=0,c=function(t){if(Reflect.has(e,t)){if(s>=d.limit)return o++,"continue";var r=n.test(t)?"#"+t:t;i[r]=d._handleValue((function(){return e[t]}),i,r),s++,o++}},d=this;for(var l in e)c(l);var p=o-s,u=null===(r=null===(t=null==e?void 0:e.__proto__)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.name;return u&&"Object"!==u&&(i.constructor={name:u}),p&&(i[a]=p),i},e.prototype._handleObject=function(e,t,r){return this._createCircularCandidate(e,t,r),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},e.prototype._ensureCircularReference=function(t){var r=this.circularCandidates.indexOf(t);if(r>-1){var n=this.circularCandidatesDescrs[r];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),e._createRefMark(n.refIdx)}return null},e.prototype._handleValue=function(e,t,r){try{var n=e(),a=typeof n,i="object"===a&&null!==n;if(i){var s=this._ensureCircularReference(n);if(s)return s}var o=this._findTransform(a,n);return o?this._applyTransform(n,t,r,o):i?this._handleObject(n,t,r):n}catch(c){try{return this._handleValue((function(){return c instanceof Error?c:new Error(c)}),t,r)}catch(d){return null}}},e.prototype._makeTransformsMap=function(){if(o){var e=new Map;return this.transforms.forEach((function(t){t.lookup&&e.set(t.lookup,t)})),e}},e.prototype._findTransform=function(e,t){if(o&&(t&&t.constructor&&(null==(a=this.transformsMap.get(t.constructor))?void 0:a.shouldTransform(e,t))))return a;for(var r=0,n=this.transforms;r<n.length;r++){var a;if((a=n[r]).shouldTransform(e,t))return a}},e.prototype.transform=function(){for(var t=this,r=[this._handleValue((function(){return t.references}),null,null)],n=0,a=this.circularCandidatesDescrs;n<a.length;n++){var i=a[n];i.refIdx>0&&(r[i.refIdx]=i.parent[i.key],i.parent[i.key]=e._createRefMark(i.refIdx))}return r},e}(),h=function(){function e(e,t){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=e,this.transformMap=t}return e.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var r in"constructor"in e&&(e.constructor&&"string"==typeof e.constructor.name||(e.constructor={name:"Object"})),e)e.hasOwnProperty(r)&&(this._handleValue(e[r],e,r),n.test(r)&&(t[r.substring(1)]=e[r],delete e[r]));for(var a in t)e[a]=t[a]},e.prototype._handleTransformedObject=function(e,t,n){var a=e[r],i=this.transformMap[a];if(!i)throw new Error("Can't find transform for \""+a+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[n]=i.fromSerializable(e.data)},e.prototype._handleCircularSelfRefDuringTransform=function(e,t,r){var n=this.references;Object.defineProperty(t,r,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[e]),this.val},set:function(e){this.val=e}})},e.prototype._handleCircularRef=function(e,t,r){this.activeTransformsStack.includes(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,r):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[r]=this.references[e])},e.prototype._handleValue=function(e,t,n){if("object"==typeof e&&null!==e){var a=e["@r"];if(void 0!==a)this._handleCircularRef(a,t,n);else if(e[r])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(var i=0;i<e.length;i++)this._handleValue(e[i],e,i);else this._handlePlainObject(e)}},e.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},e}(),m=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",lookup:Date,shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",lookup:RegExp,shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",lookup:Error,shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){var t,r;return e.stack||null===(r=(t=Error).captureStackTrace)||void 0===r||r.call(t,e),{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(i[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",lookup:s&&ArrayBuffer,shouldTransform:function(e,t){return s&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return l.call(t)},fromSerializable:function(e){if(s){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){if(s)return ArrayBuffer.isView(t)&&!(t instanceof DataView);for(var r=0,n=d;r<n.length;r++){var a=n[r];if("function"==typeof i[a]&&t instanceof i[a])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:l.call(e)}},fromSerializable:function(e){return"function"==typeof i[e.ctorName]?new i[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",lookup:o&&Map,shouldTransform:function(e,t){return o&&t instanceof Map},toSerializable:function(e){var t=[];return e.forEach((function(e,r){t.push(r),t.push(e)})),t},fromSerializable:function(e){if(o){for(var t=new Map,r=0;r<e.length;r+=2)t.set(e[r],e[r+1]);return t}for(var n=[],a=0;a<e.length;a+=2)n.push([e[r],e[r+1]]);return n}},{type:"[[Set]]",lookup:c&&Set,shouldTransform:function(e,t){return c&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach((function(e){t.push(e)})),t},fromSerializable:function(e){if(c){for(var t=new Set,r=0;r<e.length;r++)t.add(e[r]);return t}return e}}],f=function(){function e(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||p,this.addTransforms(m)}return e.prototype.addTransforms=function(e){for(var t=0,r=e=Array.isArray(e)?e:[e];t<r.length;t++){var n=r[t];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},e.prototype.removeTransforms=function(e){for(var t=0,r=e=Array.isArray(e)?e:[e];t<r.length;t++){var n=r[t],a=this.transforms.indexOf(n);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[n.type]}return this},e.prototype.encode=function(e,t){var r=new u(e,this.transforms,t).transform();return this.serializer.serialize(r)},e.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new h(t,this.transformsMap).transform()},e}();t.default=f},5558:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){if(e.feed){for(var t=0,r=Object.keys(e.feed.pointers);t<r.length;t++){var n=r[t];e[n]=e.feed.pointers[n]}return delete e.feed}return!1}},8965:function(e,t){"use strict";t.__esModule=!0;t.default=["log","debug","info","warn","error","table","clear","time","timeEnd","count","assert","command","result","dir"]},6582:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]});t.__esModule=!0,t.Encode=t.Decode=t.Unhook=t.Hook=t.Console=void 0,n(t,r(9456),"default","Console"),n(t,r(5288),"default","Hook"),n(t,r(5558),"default","Unhook"),n(t,r(5575),"Decode"),n(t,r(5575),"Encode")},3017:function(e,t,r){"use strict";r.r(t),r.d(t,{DOMInspector:function(){return Me},Inspector:function(){return Ne},ObjectInspector:function(){return be},ObjectLabel:function(){return ue},ObjectName:function(){return re},ObjectPreview:function(){return le},ObjectRootLabel:function(){return pe},ObjectValue:function(){return ie},TableInspector:function(){return xe},chromeDark:function(){return m},chromeLight:function(){return f}});var n=r(7294),a=r(5697),i=r.n(a),s=r(7689),o=r.n(s);function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d(e,t){return e(t={exports:{}},t.exports),t.exports}var l=d((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),p=c(l),u=d((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.default=e.exports,e.exports.__esModule=!0}));c(u);var h=c(d((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a=u(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.default=e.exports,e.exports.__esModule=!0}))),m={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"rgb(36, 36, 36)",BASE_COLOR:"rgb(213, 213, 213)",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(227, 110, 236)",OBJECT_VALUE_NULL_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(127, 127, 127)",OBJECT_VALUE_REGEXP_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_STRING_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(233, 63, 59)",OBJECT_VALUE_NUMBER_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_BOOLEAN_COLOR:"hsl(252, 100%, 75%)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(85, 106, 242)",HTML_TAG_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_COLOR:"rgb(93, 176, 215)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(155, 187, 220)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(242, 151, 102)",HTML_COMMENT_COLOR:"rgb(137, 137, 137)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"rgb(145, 145, 145)",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"rgb(85, 85, 85)",TABLE_TH_BACKGROUND_COLOR:"rgb(44, 44, 44)",TABLE_TH_HOVER_COLOR:"rgb(48, 48, 48)",TABLE_SORT_ICON_COLOR:"black",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0) 50%, rgba(51, 139, 255, 0.0980392) 50%, rgba(51, 139, 255, 0.0980392))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},f={BASE_FONT_FAMILY:"Menlo, monospace",BASE_FONT_SIZE:"11px",BASE_LINE_HEIGHT:1.2,BASE_BACKGROUND_COLOR:"white",BASE_COLOR:"black",OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES:10,OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES:5,OBJECT_NAME_COLOR:"rgb(136, 19, 145)",OBJECT_VALUE_NULL_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_UNDEFINED_COLOR:"rgb(128, 128, 128)",OBJECT_VALUE_REGEXP_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_STRING_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_SYMBOL_COLOR:"rgb(196, 26, 22)",OBJECT_VALUE_NUMBER_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_BOOLEAN_COLOR:"rgb(28, 0, 207)",OBJECT_VALUE_FUNCTION_PREFIX_COLOR:"rgb(13, 34, 170)",HTML_TAG_COLOR:"rgb(168, 148, 166)",HTML_TAGNAME_COLOR:"rgb(136, 18, 128)",HTML_TAGNAME_TEXT_TRANSFORM:"lowercase",HTML_ATTRIBUTE_NAME_COLOR:"rgb(153, 69, 0)",HTML_ATTRIBUTE_VALUE_COLOR:"rgb(26, 26, 166)",HTML_COMMENT_COLOR:"rgb(35, 110, 37)",HTML_DOCTYPE_COLOR:"rgb(192, 192, 192)",ARROW_COLOR:"#6e6e6e",ARROW_MARGIN_RIGHT:3,ARROW_FONT_SIZE:12,ARROW_ANIMATION_DURATION:"0",TREENODE_FONT_FAMILY:"Menlo, monospace",TREENODE_FONT_SIZE:"11px",TREENODE_LINE_HEIGHT:1.2,TREENODE_PADDING_LEFT:12,TABLE_BORDER_COLOR:"#aaa",TABLE_TH_BACKGROUND_COLOR:"#eee",TABLE_TH_HOVER_COLOR:"hsla(0, 0%, 90%, 1)",TABLE_SORT_ICON_COLOR:"#6e6e6e",TABLE_DATA_BACKGROUND_IMAGE:"linear-gradient(to bottom, white, white 50%, rgb(234, 243, 255) 50%, rgb(234, 243, 255))",TABLE_DATA_BACKGROUND_SIZE:"128px 32px"},g=Object.freeze({__proto__:null,chromeDark:m,chromeLight:f}),b=d((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));c(b);var v=d((function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}},e.exports.default=e.exports,e.exports.__esModule=!0}));c(v);var _=d((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0}));c(_);var y=d((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));c(y);var w=d((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));c(w);var S=c(d((function(e){e.exports=function(e,t){return b(e)||v(e,t)||y(e,t)||w()},e.exports.default=e.exports,e.exports.__esModule=!0}))),R=d((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),C=c(R),T=d((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),s=new x(n||[]);return i._invoke=function(e,t,r){var n=p;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw i;return P()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=T(s,r);if(o){if(o===f)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?m:u,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=m,r.method="throw",r.arg=c.arg)}}}(e,r,s),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(D){return{type:"throw",arg:D}}}e.wrap=d;var p="suspendedStart",u="suspendedYield",h="executing",m="completed",f={};function g(){}function b(){}function v(){}var _={};_[i]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(k([])));w&&w!==r&&n.call(w,i)&&(_=w);var S=v.prototype=g.prototype=Object.create(_);function R(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,i,s,o){var c=l(e[a],e,i);if("throw"!==c.type){var d=c.arg,p=d.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(p).then((function(e){d.value=e,s(d)}),(function(e){return r("throw",e,s,o)}))}o(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=l(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,f;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:P}}function P(){return{value:t,done:!0}}return b.prototype=S.constructor=v,v.constructor=b,b.displayName=c(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,o,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},R(C.prototype),C.prototype[s]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var s=new C(d(t,r,n,a),i);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},R(S),c(S,o,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return o.type="throw",o.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),d=n.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}})),O=d((function(e){e.exports=function(e){if(Array.isArray(e))return _(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));c(O);var E=d((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));c(E);var x=d((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));c(x);var k=c(d((function(e){e.exports=function(e){return O(e)||E(e)||y(e)||x()},e.exports.default=e.exports,e.exports.__esModule=!0}))),P=c(d((function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),D=(0,n.createContext)([{},function(){}]),A={WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",OUserSelect:"none",userSelect:"none"};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(e){return{DOMNodePreview:{htmlOpenTag:{base:{color:e.HTML_TAG_COLOR},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM},htmlAttributeName:{color:e.HTML_ATTRIBUTE_NAME_COLOR},htmlAttributeValue:{color:e.HTML_ATTRIBUTE_VALUE_COLOR}},htmlCloseTag:{base:{color:e.HTML_TAG_COLOR},offsetLeft:{marginLeft:-e.TREENODE_PADDING_LEFT},tagName:{color:e.HTML_TAGNAME_COLOR,textTransform:e.HTML_TAGNAME_TEXT_TRANSFORM}},htmlComment:{color:e.HTML_COMMENT_COLOR},htmlDoctype:{color:e.HTML_DOCTYPE_COLOR}},ObjectPreview:{objectDescription:{fontStyle:"italic"},preview:{fontStyle:"italic"},arrayMaxProperties:e.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,objectMaxProperties:e.OBJECT_PREVIEW_OBJECT_MAX_PROPERTIES},ObjectName:{base:{color:e.OBJECT_NAME_COLOR},dimmed:{opacity:.6}},ObjectValue:{objectValueNull:{color:e.OBJECT_VALUE_NULL_COLOR},objectValueUndefined:{color:e.OBJECT_VALUE_UNDEFINED_COLOR},objectValueRegExp:{color:e.OBJECT_VALUE_REGEXP_COLOR},objectValueString:{color:e.OBJECT_VALUE_STRING_COLOR},objectValueSymbol:{color:e.OBJECT_VALUE_SYMBOL_COLOR},objectValueNumber:{color:e.OBJECT_VALUE_NUMBER_COLOR},objectValueBoolean:{color:e.OBJECT_VALUE_BOOLEAN_COLOR},objectValueFunctionPrefix:{color:e.OBJECT_VALUE_FUNCTION_PREFIX_COLOR,fontStyle:"italic"},objectValueFunctionName:{fontStyle:"italic"}},TreeView:{treeViewOutline:{padding:0,margin:0,listStyleType:"none"}},TreeNode:{treeNodeBase:{color:e.BASE_COLOR,backgroundColor:e.BASE_BACKGROUND_COLOR,lineHeight:e.TREENODE_LINE_HEIGHT,cursor:"default",boxSizing:"border-box",listStyle:"none",fontFamily:e.TREENODE_FONT_FAMILY,fontSize:e.TREENODE_FONT_SIZE},treeNodePreviewContainer:{},treeNodePlaceholder:I({whiteSpace:"pre",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},A),treeNodeArrow:{base:I(I({color:e.ARROW_COLOR,display:"inline-block",fontSize:e.ARROW_FONT_SIZE,marginRight:e.ARROW_MARGIN_RIGHT},parseFloat(e.ARROW_ANIMATION_DURATION)>0?{transition:"transform ".concat(e.ARROW_ANIMATION_DURATION," ease 0s")}:{}),A),expanded:{WebkitTransform:"rotateZ(90deg)",MozTransform:"rotateZ(90deg)",transform:"rotateZ(90deg)"},collapsed:{WebkitTransform:"rotateZ(0deg)",MozTransform:"rotateZ(0deg)",transform:"rotateZ(0deg)"}},treeNodeChildNodesContainer:{margin:0,paddingLeft:e.TREENODE_PADDING_LEFT}},TableInspector:{base:{color:e.BASE_COLOR,position:"relative",border:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontFamily:e.BASE_FONT_FAMILY,fontSize:e.BASE_FONT_SIZE,lineHeight:"120%",boxSizing:"border-box",cursor:"default"}},TableInspectorHeaderContainer:{base:{top:0,height:"17px",left:0,right:0,overflowX:"hidden"},table:{tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",height:"100%",width:"100%",margin:0}},TableInspectorDataContainer:{tr:{display:"table-row"},td:{boxSizing:"border-box",border:"none",height:"16px",verticalAlign:"top",padding:"1px 4px",WebkitUserSelect:"text",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px"},div:{position:"static",top:"17px",bottom:0,overflowY:"overlay",transform:"translateZ(0)",left:0,right:0,overflowX:"hidden"},table:{positon:"static",left:0,top:0,right:0,bottom:0,borderTop:"0 none transparent",margin:0,backgroundImage:e.TABLE_DATA_BACKGROUND_IMAGE,backgroundSize:e.TABLE_DATA_BACKGROUND_SIZE,tableLayout:"fixed",borderSpacing:0,borderCollapse:"separate",width:"100%",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorTH:{base:{position:"relative",height:"auto",textAlign:"left",backgroundColor:e.TABLE_TH_BACKGROUND_COLOR,borderBottom:"1px solid ".concat(e.TABLE_BORDER_COLOR),fontWeight:"normal",verticalAlign:"middle",padding:"0 4px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",lineHeight:"14px",":hover":{backgroundColor:e.TABLE_TH_HOVER_COLOR}},div:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:e.BASE_FONT_SIZE,lineHeight:"120%"}},TableInspectorLeftBorder:{none:{borderLeft:"none"},solid:{borderLeft:"1px solid ".concat(e.TABLE_BORDER_COLOR)}},TableInspectorSortIcon:I({display:"block",marginRight:3,width:8,height:7,marginTop:-7,color:e.TABLE_SORT_ICON_COLOR,fontSize:12},A)}},M="chromeLight",N=(0,n.createContext)(j(g[M])),B=function(e){return(0,n.useContext)(N)[e]},F=function(e){var t=function(t){var r=t.theme,a=void 0===r?M:r,i=h(t,["theme"]),s=(0,n.useMemo)((function(){switch(Object.prototype.toString.call(a)){case"[object String]":return j(g[a]);case"[object Object]":return j(a);default:return j(g[M])}}),[a]);return n.createElement(N.Provider,{value:s},n.createElement(e,i))};return t.propTypes={theme:i().oneOfType([i().string,i().object])},t};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e){var t=e.expanded,r=e.styles;return n.createElement("span",{style:U(U({},r.base),t?r.expanded:r.collapsed)},"▶")},H=(0,n.memo)((function(e){var t=e=U({expanded:!0,nodeRenderer:function(e){var t=e.name;return n.createElement("span",null,t)},onClick:function(){},shouldShowArrow:!1,shouldShowPlaceholder:!0},e),r=t.expanded,a=t.onClick,i=t.children,s=t.nodeRenderer,o=t.title,c=t.shouldShowArrow,d=t.shouldShowPlaceholder,l=B("TreeNode"),p=s;return n.createElement("li",{"aria-expanded":r,role:"treeitem",style:l.treeNodeBase,title:o},n.createElement("div",{style:l.treeNodePreviewContainer,onClick:a},c||n.Children.count(i)>0?n.createElement(G,{expanded:r,styles:l.treeNodeArrow}):d&&n.createElement("span",{style:l.treeNodePlaceholder}," "),n.createElement(p,e)),n.createElement("ol",{role:"group",style:l.treeNodeChildNodesContainer},r?i:void 0))}));function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}H.propTypes={name:i().string,data:i().any,expanded:i().bool,shouldShowArrow:i().bool,shouldShowPlaceholder:i().bool,nodeRenderer:i().func,onClick:i().func};var K="$";function W(e,t){return!t(e).next().done}var Y=function(e,t,r,n,a){var i,s=[].concat((i=n,Array.from({length:i},(function(e,t){return[K].concat(Array.from({length:t},(function(){return"*"}))).join(".")})))).concat(r).filter((function(e){return"string"==typeof e})),o=[];return s.forEach((function(r){var n=r.split(".");!function e(r,a,i){if(i!==n.length){var s=n[i];if(0===i)!W(r,t)||s!==K&&"*"!==s||e(r,K,i+1);else if("*"===s){var c,d=$(t(r));try{for(d.s();!(c=d.n()).done;){var l=c.value,p=l.name,u=l.data;W(u,t)&&e(u,"".concat(a,".").concat(p),i+1)}}catch(m){d.e(m)}finally{d.f()}}else{var h=r[s];W(h,t)&&e(h,"".concat(a,".").concat(s),i+1)}}else o.push(a)}(e,"",0)})),o.reduce((function(e,t){return e[t]=!0,e}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a))};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=(0,n.memo)((function(e){var t=e.data,r=e.dataIterator,a=e.path,i=e.depth,s=e.nodeRenderer,o=(0,n.useContext)(D),c=S(o,2),d=c[0],l=c[1],u=W(t,r),m=!!d[a],f=(0,n.useCallback)((function(){return u&&l((function(e){return J(J({},e),{},P({},a,!m))}))}),[u,l,a,m]);return n.createElement(H,p({expanded:m,onClick:f,shouldShowArrow:u,shouldShowPlaceholder:i>0,nodeRenderer:s},e),m?k(r(t)).map((function(e){var t=e.name,o=e.data,c=h(e,["name","data"]);return n.createElement(Z,p({name:t,data:o,depth:i+1,path:"".concat(a,".").concat(t),key:t,dataIterator:r,nodeRenderer:s},c))})):null)}));Z.propTypes={name:i().string,data:i().any,dataIterator:i().func,depth:i().number,expanded:i().bool,nodeRenderer:i().func};var X=(0,n.memo)((function(e){var t=e.name,r=e.data,a=e.dataIterator,i=e.nodeRenderer,s=e.expandPaths,o=e.expandLevel,c=B("TreeView"),d=(0,n.useState)({}),l=S(d,2)[1];return(0,n.useLayoutEffect)((function(){return l((function(e){return Y(r,a,s,o,e)}))}),[r,a,s,o]),n.createElement(D.Provider,{value:d},n.createElement("ol",{role:"tree",style:c.treeViewOutline},n.createElement(Z,{name:t,data:r,dataIterator:a,depth:0,path:K,nodeRenderer:i})))}));function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}X.propTypes={name:i().string,data:i().any,dataIterator:i().func,nodeRenderer:i().func,expandPaths:i().oneOfType([i().string,i().array]),expandLevel:i().number};var re=function(e){var t=e.name,r=e.dimmed,a=void 0!==r&&r,i=e.styles,s=void 0===i?{}:i,o=B("ObjectName"),c=te(te(te({},o.base),a?o.dimmed:{}),s);return n.createElement("span",{style:c},t)};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}re.propTypes={name:i().string,dimmed:i().bool};var ie=function(e){var t=e.object,r=e.styles,a=B("ObjectValue"),i=function(e){return ae(ae({},a[e]),r)};switch(C(t)){case"bigint":return n.createElement("span",{style:i("objectValueNumber")},String(t),"n");case"number":return n.createElement("span",{style:i("objectValueNumber")},String(t));case"string":return n.createElement("span",{style:i("objectValueString")},'"',t,'"');case"boolean":return n.createElement("span",{style:i("objectValueBoolean")},String(t));case"undefined":return n.createElement("span",{style:i("objectValueUndefined")},"undefined");case"object":return null===t?n.createElement("span",{style:i("objectValueNull")},"null"):t instanceof Date?n.createElement("span",null,t.toString()):t instanceof RegExp?n.createElement("span",{style:i("objectValueRegExp")},t.toString()):Array.isArray(t)?n.createElement("span",null,"Array(".concat(t.length,")")):t.constructor?"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)?n.createElement("span",null,"Buffer[".concat(t.length,"]")):n.createElement("span",null,t.constructor.name):n.createElement("span",null,"Object");case"function":return n.createElement("span",null,n.createElement("span",{style:i("objectValueFunctionPrefix")},"ƒ "),n.createElement("span",{style:i("objectValueFunctionName")},t.name,"()"));case"symbol":return n.createElement("span",{style:i("objectValueSymbol")},t.toString());default:return n.createElement("span",null)}};ie.propTypes={object:i().any};var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;function ce(e,t){var r=Object.getOwnPropertyDescriptor(e,t);if(r.get)try{return r.get()}catch(n){return r.get}return e[t]}function de(e,t){return 0===e.length?[]:e.slice(1).reduce((function(e,r){return e.concat([t,r])}),[e[0]])}var le=function(e){var t=e.data,r=B("ObjectPreview"),a=t;if("object"!==C(a)||null===a||a instanceof Date||a instanceof RegExp)return n.createElement(ie,{object:a});if(Array.isArray(a)){var i=r.arrayMaxProperties,s=a.slice(0,i).map((function(e,t){return n.createElement(ie,{key:t,object:e})}));a.length>i&&s.push(n.createElement("span",{key:"ellipsis"},"…"));var o=a.length;return n.createElement(n.Fragment,null,n.createElement("span",{style:r.objectDescription},0===o?"":"(".concat(o,") ")),n.createElement("span",{style:r.preview},"[",de(s,", "),"]"))}var c=r.objectMaxProperties,d=[];for(var l in a)if(se.call(a,l)){var p=void 0;d.length===c-1&&Object.keys(a).length>c&&(p=n.createElement("span",{key:"ellipsis"},"…"));var u=ce(a,l);if(d.push(n.createElement("span",{key:l},n.createElement(re,{name:l||'""'}),": ",n.createElement(ie,{object:u}),p)),p)break}var h=a.constructor?a.constructor.name:"Object";return n.createElement(n.Fragment,null,n.createElement("span",{style:r.objectDescription},"Object"===h?"":"".concat(h," ")),n.createElement("span",{style:r.preview},"{",de(d,", "),"}"))},pe=function(e){var t=e.name,r=e.data;return"string"==typeof t?n.createElement("span",null,n.createElement(re,{name:t}),n.createElement("span",null,": "),n.createElement(le,{data:r})):n.createElement(le,{data:r})},ue=function(e){var t=e.name,r=e.data,a=e.isNonenumerable,i=void 0!==a&&a,s=r;return n.createElement("span",null,"string"==typeof t?n.createElement(re,{name:t,dimmed:i}):n.createElement(le,{data:t}),n.createElement("span",null,": "),n.createElement(ie,{object:s}))};function he(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ue.propTypes={isNonenumerable:i().bool};var fe=function(e){var t=e.depth,r=e.name,a=e.data,i=e.isNonenumerable;return 0===t?n.createElement(pe,{name:r,data:a}):n.createElement(ue,{name:r,data:a,isNonenumerable:i})},ge=function(e){var t=e.showNonenumerable,r=void 0!==t&&t,a=e.sortObjectKeys,i=e.nodeRenderer,s=h(e,["showNonenumerable","sortObjectKeys","nodeRenderer"]),o=function(e,t){return T.mark((function r(n){var a,i,s,o,c,d,l,p,u,h,m,f,g,b;return T.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("object"===C(n)&&null!==n||"function"==typeof n){r.next=3;break}return r.abrupt("return");case 3:if((a=Array.isArray(n))||!n[Symbol.iterator]){r.next=32;break}i=0,s=he(n),r.prev=7,s.s();case 9:if((o=s.n()).done){r.next=22;break}if(c=o.value,!Array.isArray(c)||2!==c.length){r.next=17;break}return d=S(c,2),l=d[0],p=d[1],r.next=15,{name:l,data:p};case 15:r.next=19;break;case 17:return r.next=19,{name:i.toString(),data:c};case 19:i++;case 20:r.next=9;break;case 22:r.next=27;break;case 24:r.prev=24,r.t0=r.catch(7),s.e(r.t0);case 27:return r.prev=27,s.f(),r.finish(27);case 30:r.next=64;break;case 32:u=Object.getOwnPropertyNames(n),!0!==t||a?"function"==typeof t&&u.sort(t):u.sort(),h=he(u),r.prev=35,h.s();case 37:if((m=h.n()).done){r.next=53;break}if(f=m.value,!oe.call(n,f)){r.next=45;break}return g=ce(n,f),r.next=43,{name:f||'""',data:g};case 43:r.next=51;break;case 45:if(!e){r.next=51;break}b=void 0;try{b=ce(n,f)}catch(v){}if(void 0===b){r.next=51;break}return r.next=51,{name:f,data:b,isNonenumerable:!0};case 51:r.next=37;break;case 53:r.next=58;break;case 55:r.prev=55,r.t1=r.catch(35),h.e(r.t1);case 58:return r.prev=58,h.f(),r.finish(58);case 61:if(!e||n===Object.prototype){r.next=64;break}return r.next=64,{name:"__proto__",data:Object.getPrototypeOf(n),isNonenumerable:!0};case 64:case"end":return r.stop()}}),r,null,[[7,24,27,30],[35,55,58,61]])}))}(r,a),c=i||fe;return n.createElement(X,p({nodeRenderer:c,dataIterator:o},s))};ge.propTypes={expandLevel:i().number,expandPaths:i().oneOfType([i().string,i().array]),name:i().string,data:i().any,showNonenumerable:i().bool,sortObjectKeys:i().oneOfType([i().bool,i().func]),nodeRenderer:i().func};var be=F(ge);function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Array.prototype.includes||(Array.prototype.includes=function(e){var t=Object(this),r=parseInt(t.length)||0;if(0===r)return!1;var n,a,i=parseInt(arguments[1])||0;for(i>=0?n=i:(n=r+i)<0&&(n=0);n<r;){if(e===(a=t[n])||e!=e&&a!=a)return!0;n++}return!1});var ye=function(e){var t=e.rows,r=e.columns,a=e.rowsData,i=B("TableInspectorDataContainer"),s=B("TableInspectorLeftBorder");return n.createElement("div",{style:i.div},n.createElement("table",{style:i.table},n.createElement("colgroup",null),n.createElement("tbody",null,t.map((function(e,t){return n.createElement("tr",{key:e,style:i.tr},n.createElement("td",{style:_e(_e({},i.td),s.none)},e),r.map((function(e){var r=a[t];return"object"===C(r)&&null!==r&&se.call(r,e)?n.createElement("td",{key:e,style:_e(_e({},i.td),s.solid)},n.createElement(ie,{object:r[e]})):n.createElement("td",{key:e,style:_e(_e({},i.td),s.solid)})})))})))))};function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=function(e){return n.createElement("div",{style:{position:"absolute",top:1,right:0,bottom:1,display:"flex",alignItems:"center"}},e.children)},Ce=function(e){var t=e.sortAscending,r=B("TableInspectorSortIcon"),a=t?"▲":"▼";return n.createElement("div",{style:r},a)},Te=function(e){var t=e.sortAscending,r=void 0!==t&&t,a=e.sorted,i=void 0!==a&&a,s=e.onClick,o=void 0===s?void 0:s,c=e.borderStyle,d=void 0===c?{}:c,l=e.children,u=h(e,["sortAscending","sorted","onClick","borderStyle","children"]),m=B("TableInspectorTH"),f=(0,n.useState)(!1),g=S(f,2),b=g[0],v=g[1],_=(0,n.useCallback)((function(){return v(!0)}),[]),y=(0,n.useCallback)((function(){return v(!1)}),[]);return n.createElement("th",p({},u,{style:Se(Se(Se({},m.base),d),b?m.base[":hover"]:{}),onMouseEnter:_,onMouseLeave:y,onClick:o}),n.createElement("div",{style:m.div},l),i&&n.createElement(Re,null,n.createElement(Ce,{sortAscending:r})))},Oe=function(e){var t=e.indexColumnText,r=void 0===t?"(index)":t,a=e.columns,i=void 0===a?[]:a,s=e.sorted,o=e.sortIndexColumn,c=e.sortColumn,d=e.sortAscending,l=e.onTHClick,p=e.onIndexTHClick,u=B("TableInspectorHeaderContainer"),h=B("TableInspectorLeftBorder");return n.createElement("div",{style:u.base},n.createElement("table",{style:u.table},n.createElement("tbody",null,n.createElement("tr",null,n.createElement(Te,{borderStyle:h.none,sorted:s&&o,sortAscending:d,onClick:p},r),i.map((function(e){return n.createElement(Te,{borderStyle:h.solid,key:e,sorted:s&&c===e,sortAscending:d,onClick:l.bind(null,e)},e)}))))))},Ee=function(e){var t=e.data,r=e.columns,a=B("TableInspector"),i=(0,n.useState)({sorted:!1,sortIndexColumn:!1,sortColumn:void 0,sortAscending:!1}),s=S(i,2),o=s[0],c=o.sorted,d=o.sortIndexColumn,l=o.sortColumn,p=o.sortAscending,u=s[1],h=(0,n.useCallback)((function(){u((function(e){var t=e.sortIndexColumn,r=e.sortAscending;return{sorted:!0,sortIndexColumn:!0,sortColumn:void 0,sortAscending:!t||!r}}))}),[]),m=(0,n.useCallback)((function(e){u((function(t){var r=t.sortColumn,n=t.sortAscending;return{sorted:!0,sortIndexColumn:!1,sortColumn:e,sortAscending:e!==r||!n}}))}),[]);if("object"!==C(t)||null===t)return n.createElement("div",null);var f=function(e){if("object"===C(e)){var t;if(Array.isArray(e)){var r=e.length;t=k(Array(r).keys())}else null!==e&&(t=Object.keys(e));var n=t.reduce((function(t,r){var n=e[r];return"object"===C(n)&&null!==n&&Object.keys(n).reduce((function(e,t){return e.includes(t)||e.push(t),e}),t),t}),[]);return{rowHeaders:t,colHeaders:n}}}(t),g=f.rowHeaders,b=f.colHeaders;void 0!==r&&(b=r);var v,_,y,w=g.map((function(e){return t[e]}));if(void 0!==l?v=w.map((function(e,t){return"object"===C(e)&&null!==e?[e[l],t]:[void 0,t]})):d&&(v=g.map((function(e,t){return[g[t],t]}))),void 0!==v){var R=v.sort((_=function(e){return e[0]},y=p,function(e,t){var r,n=_(e),a=_(t),i=C(n),s=C(a),o=function(e,t){return e<t?-1:e>t?1:0};if(i===s)r=o(n,a);else{var c={string:0,number:1,object:2,symbol:3,boolean:4,undefined:5,function:6};r=o(c[i],c[s])}return y||(r=-r),r})).map((function(e){return e[1]}));g=R.map((function(e){return g[e]})),w=R.map((function(e){return w[e]}))}return n.createElement("div",{style:a.base},n.createElement(Oe,{columns:b,sorted:c,sortIndexColumn:d,sortColumn:l,sortAscending:p,onTHClick:m,onIndexTHClick:h}),n.createElement(ye,{rows:g,columns:b,rowsData:w}))};Ee.propTypes={data:i().oneOfType([i().array,i().object]),columns:i().array};var xe=F(Ee),ke=function(e){return 0===e.childNodes.length||1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.textContent.length<80},Pe=function(e){var t=e.tagName,r=e.attributes,a=e.styles;return n.createElement("span",{style:a.base},"<",n.createElement("span",{style:a.tagName},t),function(){if(r){for(var e=[],t=0;t<r.length;t++){var i=r[t];e.push(n.createElement("span",{key:t}," ",n.createElement("span",{style:a.htmlAttributeName},i.name),'="',n.createElement("span",{style:a.htmlAttributeValue},i.value),'"'))}return e}}(),">")},De=function(e){var t=e.tagName,r=e.isChildNode,a=void 0!==r&&r,i=e.styles;return n.createElement("span",{style:p({},i.base,a&&i.offsetLeft)},"</",n.createElement("span",{style:i.tagName},t),">")},Ae={1:"ELEMENT_NODE",3:"TEXT_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE"},Le=function(e){var t=e.isCloseTag,r=e.data,a=e.expanded,i=B("DOMNodePreview");if(t)return n.createElement(De,{styles:i.htmlCloseTag,isChildNode:!0,tagName:r.tagName});switch(r.nodeType){case Node.ELEMENT_NODE:return n.createElement("span",null,n.createElement(Pe,{tagName:r.tagName,attributes:r.attributes,styles:i.htmlOpenTag}),ke(r)?r.textContent:!a&&"…",!a&&n.createElement(De,{tagName:r.tagName,styles:i.htmlCloseTag}));case Node.TEXT_NODE:return n.createElement("span",null,r.textContent);case Node.CDATA_SECTION_NODE:return n.createElement("span",null,"<![CDATA["+r.textContent+"]]>");case Node.COMMENT_NODE:return n.createElement("span",{style:i.htmlComment},"\x3c!--",r.textContent,"--\x3e");case Node.PROCESSING_INSTRUCTION_NODE:return n.createElement("span",null,r.nodeName);case Node.DOCUMENT_TYPE_NODE:return n.createElement("span",{style:i.htmlDoctype},"<!DOCTYPE ",r.name,r.publicId?' PUBLIC "'.concat(r.publicId,'"'):"",!r.publicId&&r.systemId?" SYSTEM":"",r.systemId?' "'.concat(r.systemId,'"'):"",">");case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return n.createElement("span",null,r.nodeName);default:return n.createElement("span",null,Ae[r.nodeType])}};Le.propTypes={isCloseTag:i().bool,name:i().string,data:i().object.isRequired,expanded:i().bool.isRequired};var Ie=T.mark((function e(t){var r,n;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.childNodes){e.next=17;break}if(!ke(t)){e.next=4;break}return e.abrupt("return");case 4:r=0;case 5:if(!(r<t.childNodes.length)){e.next=14;break}if((n=t.childNodes[r]).nodeType!==Node.TEXT_NODE||0!==n.textContent.trim().length){e.next=9;break}return e.abrupt("continue",11);case 9:return e.next=11,{name:"".concat(n.tagName,"[").concat(r,"]"),data:n};case 11:r++,e.next=5;break;case 14:if(!t.tagName){e.next=17;break}return e.next=17,{name:"CLOSE_TAG",data:{tagName:t.tagName},isCloseTag:!0};case 17:case"end":return e.stop()}}),e)})),je=function(e){return n.createElement(X,p({nodeRenderer:Le,dataIterator:Ie},e))};je.propTypes={data:i().object.isRequired};var Me=F(je),Ne=function(e){var t=e.table,r=void 0!==t&&t,a=e.data,i=h(e,["table","data"]);return r?n.createElement(xe,p({data:a},i)):o()(a)?n.createElement(Me,p({data:a},i)):n.createElement(be,p({data:a},i))};Ne.propTypes={data:i().any,name:i().string,table:i().bool},t.default=Ne},9662:function(e,t,r){var n=r(614),a=r(6330),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(a(e)+" is not a function")}},6077:function(e,t,r){var n=r(614),a=String,i=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw i("Can't set "+a(e)+" as a prototype")}},9670:function(e,t,r){var n=r(111),a=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw i(a(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,r){"use strict";var n,a,i,s=r(3013),o=r(9781),c=r(7854),d=r(614),l=r(111),p=r(2597),u=r(648),h=r(6330),m=r(8880),f=r(8052),g=r(7045),b=r(7976),v=r(9518),_=r(7674),y=r(5112),w=r(9711),S=r(9909),R=S.enforce,C=S.get,T=c.Int8Array,O=T&&T.prototype,E=c.Uint8ClampedArray,x=E&&E.prototype,k=T&&v(T),P=O&&v(O),D=Object.prototype,A=c.TypeError,L=y("toStringTag"),I=w("TYPED_ARRAY_TAG"),j="TypedArrayConstructor",M=s&&!!_&&"Opera"!==u(c.opera),N=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},z=function(e){var t=v(e);if(l(t)){var r=C(t);return r&&p(r,j)?r[j]:z(t)}},U=function(e){if(!l(e))return!1;var t=u(e);return p(B,t)||p(F,t)};for(n in B)(i=(a=c[n])&&a.prototype)?R(i)[j]=a:M=!1;for(n in F)(i=(a=c[n])&&a.prototype)&&(R(i)[j]=a);if((!M||!d(k)||k===Function.prototype)&&(k=function(){throw A("Incorrect invocation")},M))for(n in B)c[n]&&_(c[n],k);if((!M||!P||P===D)&&(P=k.prototype,M))for(n in B)c[n]&&_(c[n].prototype,P);if(M&&v(x)!==P&&_(x,P),o&&!p(P,L))for(n in N=!0,g(P,L,{configurable:!0,get:function(){return l(this)?this[I]:void 0}}),B)c[n]&&m(c[n],I,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:N&&I,aTypedArray:function(e){if(U(e))return e;throw A("Target is not a typed array")},aTypedArrayConstructor:function(e){if(d(e)&&(!_||b(k,e)))return e;throw A(h(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(o){if(r)for(var a in B){var i=c[a];if(i&&p(i.prototype,e))try{delete i.prototype[e]}catch(s){try{i.prototype[e]=t}catch(d){}}}P[e]&&!r||f(P,e,r?t:M&&O[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,a;if(o){if(_){if(r)for(n in B)if((a=c[n])&&p(a,e))try{delete a[e]}catch(i){}if(k[e]&&!r)return;try{return f(k,e,r?t:M&&k[e]||t)}catch(i){}}for(n in B)!(a=c[n])||a[e]&&!r||f(a,e,t)}},getTypedArrayConstructor:z,isView:function(e){if(!l(e))return!1;var t=u(e);return"DataView"===t||p(B,t)||p(F,t)},isTypedArray:U,TypedArray:k,TypedArrayPrototype:P}},1589:function(e,t,r){var n=r(1400),a=r(6244),i=r(6135),s=Array,o=Math.max;e.exports=function(e,t,r){for(var c=a(e),d=n(t,c),l=n(void 0===r?c:r,c),p=s(o(l-d,0)),u=0;d<l;d++,u++)i(p,u,e[d]);return p.length=u,p}},4362:function(e,t,r){var n=r(1589),a=Math.floor,i=function(e,t){var r=e.length,c=a(r/2);return r<8?s(e,t):o(e,i(n(e,0,c),t),i(n(e,c),t),t)},s=function(e,t){for(var r,n,a=e.length,i=1;i<a;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},o=function(e,t,r,n){for(var a=t.length,i=r.length,s=0,o=0;s<a||o<i;)e[s+o]=s<a&&o<i?n(t[s],r[o])<=0?t[s++]:r[o++]:s<a?t[s++]:r[o++];return e};e.exports=i},4326:function(e,t,r){var n=r(1702),a=n({}.toString),i=n("".slice);e.exports=function(e){return i(a(e),8,-1)}},648:function(e,t,r){var n=r(1694),a=r(614),i=r(4326),s=r(5112)("toStringTag"),o=Object,c="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=o(e),s))?r:c?i(t):"Object"==(n=i(t))&&a(t.callee)?"Arguments":n}},9920:function(e,t,r){var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,r){var n=r(9781),a=r(3070),i=r(9114);e.exports=n?function(e,t,r){return a.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,r){"use strict";var n=r(4948),a=r(3070),i=r(9114);e.exports=function(e,t,r){var s=n(t);s in e?a.f(e,s,i(0,r)):e[s]=r}},7045:function(e,t,r){var n=r(6339),a=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),a.f(e,t,r)}},8052:function(e,t,r){var n=r(614),a=r(3070),i=r(6339),s=r(3072);e.exports=function(e,t,r,o){o||(o={});var c=o.enumerable,d=void 0!==o.name?o.name:t;if(n(r)&&i(r,d,o),o.global)c?e[t]=r:s(t,r);else{try{o.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=r:a.f(e,t,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},3072:function(e,t,r){var n=r(7854),a=Object.defineProperty;e.exports=function(e,t){try{a(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},9781:function(e,t,r){var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:function(e,t,r){var n=r(7854),a=r(111),i=n.document,s=a(i)&&a(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},8886:function(e,t,r){var n=r(8113).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},256:function(e,t,r){var n=r(8113);e.exports=/MSIE|Trident/.test(n)},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7686:function(e,t,r){var n,a,i=r(7854),s=r(8113),o=i.process,c=i.Deno,d=o&&o.versions||c&&c.version,l=d&&d.v8;l&&(a=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!a&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(a=+n[1]),e.exports=a},2120:function(e,t,r){var n=r(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,r){var n=r(7293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,r){var n=r(4374),a=Function.prototype.call;e.exports=n?a.bind(a):function(){return a.apply(a,arguments)}},6530:function(e,t,r){var n=r(9781),a=r(2597),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,o=a(i,"name"),c=o&&"something"===function(){}.name,d=o&&(!n||n&&s(i,"name").configurable);e.exports={EXISTS:o,PROPER:c,CONFIGURABLE:d}},5668:function(e,t,r){var n=r(1702),a=r(9662);e.exports=function(e,t,r){try{return n(a(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(i){}}},1470:function(e,t,r){var n=r(4326),a=r(1702);e.exports=function(e){if("Function"===n(e))return a(e)}},1702:function(e,t,r){var n=r(4374),a=Function.prototype,i=a.call,s=n&&a.bind.bind(i,i);e.exports=n?s:function(e){return function(){return i.apply(e,arguments)}}},5005:function(e,t,r){var n=r(7854),a=r(614);e.exports=function(e,t){return arguments.length<2?(r=n[e],a(r)?r:void 0):n[e]&&n[e][t];var r}},8173:function(e,t,r){var n=r(9662),a=r(8554);e.exports=function(e,t){var r=e[t];return a(r)?void 0:n(r)}},7854:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,r){var n=r(1702),a=r(7908),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(a(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,r){var n=r(9781),a=r(7293),i=r(317);e.exports=!n&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},2788:function(e,t,r){var n=r(1702),a=r(614),i=r(5465),s=n(Function.toString);a(i.inspectSource)||(i.inspectSource=function(e){return s(e)}),e.exports=i.inspectSource},9909:function(e,t,r){var n,a,i,s=r(4811),o=r(7854),c=r(111),d=r(8880),l=r(2597),p=r(5465),u=r(6200),h=r(3501),m="Object already initialized",f=o.TypeError,g=o.WeakMap;if(s||p.state){var b=p.state||(p.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,n=function(e,t){if(b.has(e))throw f(m);return t.facade=e,b.set(e,t),t},a=function(e){return b.get(e)||{}},i=function(e){return b.has(e)}}else{var v=u("state");h[v]=!0,n=function(e,t){if(l(e,v))throw f(m);return t.facade=e,d(e,v,t),t},a=function(e){return l(e,v)?e[v]:{}},i=function(e){return l(e,v)}}e.exports={set:n,get:a,has:i,enforce:function(e){return i(e)?a(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=a(t)).type!==e)throw f("Incompatible receiver, "+e+" required");return r}}}},614:function(e,t,r){var n=r(4154),a=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===a}:function(e){return"function"==typeof e}},8554:function(e){e.exports=function(e){return null==e}},111:function(e,t,r){var n=r(614),a=r(4154),i=a.all;e.exports=a.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===i}:function(e){return"object"==typeof e?null!==e:n(e)}},1913:function(e){e.exports=!1},2190:function(e,t,r){var n=r(5005),a=r(614),i=r(7976),s=r(3307),o=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return a(t)&&i(t.prototype,o(e))}},6244:function(e,t,r){var n=r(7466);e.exports=function(e){return n(e.length)}},6339:function(e,t,r){var n=r(1702),a=r(7293),i=r(614),s=r(2597),o=r(9781),c=r(6530).CONFIGURABLE,d=r(2788),l=r(9909),p=l.enforce,u=l.get,h=String,m=Object.defineProperty,f=n("".slice),g=n("".replace),b=n([].join),v=o&&!a((function(){return 8!==m((function(){}),"length",{value:8}).length})),_=String(String).split("String"),y=e.exports=function(e,t,r){"Symbol("===f(h(t),0,7)&&(t="["+g(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(o?m(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&s(r,"arity")&&e.length!==r.arity&&m(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?o&&m(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(a){}var n=p(e);return s(n,"source")||(n.source=b(_,"string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return i(this)&&u(this).source||d(this)}),"toString")},4758:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},3070:function(e,t,r){var n=r(9781),a=r(4664),i=r(3353),s=r(9670),o=r(4948),c=TypeError,d=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p="enumerable",u="configurable",h="writable";t.f=n?i?function(e,t,r){if(s(e),t=o(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=l(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:u in r?r[u]:n[u],enumerable:p in r?r[p]:n[p],writable:!1})}return d(e,t,r)}:d:function(e,t,r){if(s(e),t=o(t),s(r),a)try{return d(e,t,r)}catch(n){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},9518:function(e,t,r){var n=r(2597),a=r(614),i=r(7908),s=r(6200),o=r(9920),c=s("IE_PROTO"),d=Object,l=d.prototype;e.exports=o?d.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return a(r)&&t instanceof r?r.prototype:t instanceof d?l:null}},7976:function(e,t,r){var n=r(1702);e.exports=n({}.isPrototypeOf)},7674:function(e,t,r){var n=r(5668),a=r(9670),i=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(s){}return function(r,n){return a(r),i(n),t?e(r,n):r.__proto__=n,r}}():void 0)},2140:function(e,t,r){var n=r(6916),a=r(614),i=r(111),s=TypeError;e.exports=function(e,t){var r,o;if("string"===t&&a(r=e.toString)&&!i(o=n(r,e)))return o;if(a(r=e.valueOf)&&!i(o=n(r,e)))return o;if("string"!==t&&a(r=e.toString)&&!i(o=n(r,e)))return o;throw s("Can't convert object to primitive value")}},4488:function(e,t,r){var n=r(8554),a=TypeError;e.exports=function(e){if(n(e))throw a("Can't call method on "+e);return e}},6200:function(e,t,r){var n=r(2309),a=r(9711),i=n("keys");e.exports=function(e){return i[e]||(i[e]=a(e))}},5465:function(e,t,r){var n=r(7854),a=r(3072),i="__core-js_shared__",s=n[i]||a(i,{});e.exports=s},2309:function(e,t,r){var n=r(1913),a=r(5465);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,r){var n=r(7686),a=r(7293),i=r(7854).String;e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1400:function(e,t,r){var n=r(9303),a=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?a(r+t,0):i(r,t)}},9303:function(e,t,r){var n=r(4758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7466:function(e,t,r){var n=r(9303),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},7908:function(e,t,r){var n=r(4488),a=Object;e.exports=function(e){return a(n(e))}},4590:function(e,t,r){var n=r(3002),a=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw a("Wrong offset");return r}},3002:function(e,t,r){var n=r(9303),a=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw a("The argument can't be less than 0");return t}},7593:function(e,t,r){var n=r(6916),a=r(111),i=r(2190),s=r(8173),o=r(2140),c=r(5112),d=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!a(e)||i(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!a(r)||i(r))return r;throw d("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},4948:function(e,t,r){var n=r(7593),a=r(2190);e.exports=function(e){var t=n(e,"string");return a(t)?t:t+""}},1694:function(e,t,r){var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(r){return"Object"}}},9711:function(e,t,r){var n=r(1702),a=0,i=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++a+i,36)}},3307:function(e,t,r){var n=r(6293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,r){var n=r(9781),a=r(7293);e.exports=n&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,r){var n=r(7854),a=r(614),i=n.WeakMap;e.exports=a(i)&&/native code/.test(String(i))},5112:function(e,t,r){var n=r(7854),a=r(2309),i=r(2597),s=r(9711),o=r(6293),c=r(3307),d=n.Symbol,l=a("wks"),p=c?d.for||d:d&&d.withoutSetter||s;e.exports=function(e){return i(l,e)||(l[e]=o&&i(d,e)?d[e]:p("Symbol."+e)),l[e]}},3462:function(e,t,r){"use strict";var n=r(7854),a=r(6916),i=r(260),s=r(6244),o=r(4590),c=r(7908),d=r(7293),l=n.RangeError,p=n.Int8Array,u=p&&p.prototype,h=u&&u.set,m=i.aTypedArray,f=i.exportTypedArrayMethod,g=!d((function(){var e=new Uint8ClampedArray(2);return a(h,e,{length:1,0:3},1),3!==e[1]})),b=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&d((function(){var e=new p(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));f("set",(function(e){m(this);var t=o(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(g)return a(h,this,r,t);var n=this.length,i=s(r),d=0;if(i+t>n)throw l("Wrong length");for(;d<i;)this[t+d]=r[d++]}),!g||b)},3824:function(e,t,r){"use strict";var n=r(7854),a=r(1470),i=r(7293),s=r(9662),o=r(4362),c=r(260),d=r(8886),l=r(256),p=r(7686),u=r(2120),h=c.aTypedArray,m=c.exportTypedArrayMethod,f=n.Uint16Array,g=f&&a(f.prototype.sort),b=!(!g||i((function(){g(new f(2),null)}))&&i((function(){g(new f(2),{})}))),v=!!g&&!i((function(){if(p)return p<74;if(d)return d<67;if(l)return!0;if(u)return u<602;var e,t,r=new f(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(g(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));m("sort",(function(e){return void 0!==e&&s(e),v?g(this,e):o(h(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!v||b)},1227:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!=typeof process&&"env"in process&&(e={}.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:function(e,t,r){e.exports=function(e){function t(e){let r,a,i,s=null;function o(...e){if(!o.enabled)return;const n=o,a=Number(new Date),i=a-(r||a);n.diff=i,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,a)=>{if("%%"===r)return"%";s++;const i=t.formatters[a];if("function"==typeof i){const t=e[s];r=i.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(a!==t.namespaces&&(a=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(a),...t.skips.map(a).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},8090:function(e,t,r){"use strict";r.r(t),r.d(t,{ThemeProvider:function(){return h},useTheme:function(){return f},withTheme:function(){return m}});var n=r(4572),a=r(7294),i=r(9883),s=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}var c=r(8679),d=r.n(c);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var p=function(e,t){return"function"==typeof t?t(e):function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},t)},u=s((function(e){return s((function(t){return p(e,t)}))})),h=function(e){return(0,a.createElement)(i.Ni.Consumer,null,(function(t){return e.theme!==t&&(t=u(t)(e.theme)),(0,a.createElement)(i.Ni.Provider,{value:t},e.children)}))};function m(e){var t=e.displayName||e.name||"Component",r=function(t,r){return(0,a.createElement)(i.Ni.Consumer,null,(function(n){return(0,a.createElement)(e,o({theme:n,ref:r},t))}))},n=(0,a.forwardRef)(r);return n.displayName="WithTheme("+t+")",d()(n,e)}function f(){return a.useContext(i.Ni)}},284:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},7187:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),r([].slice.call(arguments))}f(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&f(e,"error",t,r)}(e,a,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var a,i,s,d;if(o(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(a=c(e))>0&&s.length>a&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,d=l,console&&console.warn&&console.warn(d)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=l.bind(n);return a.listener=r,n.wrapFn=a,a}function u(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):m(a,a.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function f(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){n.once&&e.removeEventListener(t,a),r(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var d=c.length,l=m(c,d);for(r=0;r<d;++r)n(l[r],this,t)}return!0},i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){return o(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,s;if(o(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return u(this,e,!0)},i.prototype.rawListeners=function(e){return u(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},6920:function(e,t,r){"use strict";r.d(t,{P:function(){return i}});var n=r(7294);const a="undefined"!=typeof window;function i(e,t){if(!a)return;const r=(0,n.useRef)();(0,n.useEffect)((()=>{r.current=t}),[t]),(0,n.useEffect)((()=>{if(!(window&&window.addEventListener))return void console.warn("`window` does not support `addEventListener()`!");const t=e=>{r&&r.current&&r.current(e)};return window.addEventListener(e,t),()=>{window&&window.removeEventListener(e,t)}}),[e,window])}},236:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var n=r(7294),a=r(151),i=r(960),s=r(9293);let o=function(e){return e.Log="log",e.Warn="warn",e.Error="error",e}({});const c=(e,t,r)=>{switch(e){case o.Log:return void console.log(t+": "+r);case o.Warn:return void console.warn(t+": "+r);case o.Error:return void console.error(t+": "+r)}},d="undefined"!=typeof window;let l=function(){function e(){this._sendTransport=null,this._recvTransport=null,this._audioInputDeviceProducer=null,this._consumers=new Map}var t=e.prototype;return t.init=function(e,t){this._mediasoupDevice=e,this._protooPeer=t},t.createTransports=async function(e,t){await this._createSendTransport(e,t),await this._createRecvTransport(e,t)},t.closeTransports=function(){this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close()},t._removeConsumer=function(e){c(o.Log,"recvTransport Consumer","Removing consumer with ID: `"+e+"`"),this._consumers.delete(e)},t._setupSendTransportEventHandlers=function(){this._sendTransport?(this._sendTransport.observer.on("close",(()=>{c(o.Log,"DialogTransportController._sendTransport","Received `close` event"),this._sendTransport&&(this._sendTransport=null)})),this._sendTransport.observer.on("newproducer",(e=>{c(o.Log,"DialogTransportController._sendTransport","Received `newproducer` event. new producer id: `"+e.id+"`")})),this._sendTransport.observer.on("newconsumer",(e=>{c(o.Log,"DialogTransportController._sendTransport","Received `newconsumer` event. new consumer id: `"+e.id+"`")})),this._sendTransport.on("connect",((e,t,r)=>{let{dtlsParameters:n}=e;c(o.Log,"DialogTransportController._sendTransport","Received `connect` event"),this._sendTransport?this._protooPeer?this._protooPeer.request("connectWebRtcTransport",{transportId:this._sendTransport.id,dtlsParameters:n}).then(t).catch(r):c(o.Error,"DialogTransportController._sendTransport, after `connect` event","`this._protooPeer` is falsey!"):c(o.Error,"DialogTransportController._sendTransport, after `connect` event","`this._sendTransport` is falsey!")})),this._sendTransport.on("connectionstatechange",(e=>{let t=o.Log;"failed"!==e&&"disconnected"!==e||(t=o.Warn),c(t,"DialogTransportController._sendTransport","Received `connectionstatechange` event. New connectionState: `"+e+"`")})),this._sendTransport.on("produce",(async(e,t,r)=>{let{kind:n,rtpParameters:a,appData:i}=e;if(c(o.Log,"DialogTransportController._sendTransport","Received `produce` event. kind: `"+n+"`"),!this._sendTransport){const e={name:"DialogTransportController._sendTransport",message:"`this._sendTransport` is falsey!"};return c(o.Error,"DialogTransportController._sendTransport, in `produce` event handler",e.message),void r(e)}if(!this._protooPeer){const e={name:"DialogTransportController._sendTransport",message:"`this._protooPeer` is falsey!"};return c(o.Error,"DialogTransportController._sendTransport, in `produce` event handler",e.message),void r(e)}try{const{id:e}=await this._protooPeer.request("produce",{transportId:this._sendTransport.id,kind:n,rtpParameters:a,appData:i});t({id:e})}catch(s){c(o.Error,"DialogTransportController._sendTransport",'When sending "produce" request to Protoo, got error:\n'+s),r(s)}}))):c(o.Error,"DialogTransportController._setupSendTransportEventHandlers()","`this._sendTransport` is falsey!")},t._createSendTransport=async function(e,t){if(!this._protooPeer)return void c(o.Error,"DialogTransportController._createSendTransport()","`this._protooPeer` is falsey!");if(!this._mediasoupDevice)return void c(o.Error,"DialogTransportController._createSendTransport()","`this._mediasoupDevice` is falsey!");const r=await this._protooPeer.request("createWebRtcTransport",{producing:!0,consuming:!1,sctpCapabilities:void 0}),n={id:r.id,iceParameters:r.iceParameters,iceCandidates:r.iceCandidates,dtlsParameters:r.dtlsParameters,sctpParameters:r.sctpParameters,iceServers:e,iceTransportPolicy:t};this._sendTransport=this._mediasoupDevice.createSendTransport(n),this._setupSendTransportEventHandlers()},t._setupRecvTransportEventHandlers=function(){this._recvTransport?(this._recvTransport.observer.on("close",(()=>{c(o.Log,"DialogTransportController._recvTransport","Received `close` event"),this._recvTransport&&(this._recvTransport=null)})),this._recvTransport.observer.on("newproducer",(e=>{c(o.Log,"DialogTransportController._recvTransport","Received `newproducer` event. New producer id: `"+e.id+"`")})),this._recvTransport.observer.on("newconsumer",(e=>{c(o.Log,"DialogTransportController._recvTransport","Received `newconsumer` event. New consumer id: `"+e.id+"`")})),this._recvTransport.on("connect",((e,t,r)=>{let{dtlsParameters:n}=e;c(o.Log,"DialogTransportController._recvTransport","Received `connect` event"),this._recvTransport?this._protooPeer?this._protooPeer.request("connectWebRtcTransport",{transportId:this._recvTransport.id,dtlsParameters:n}).then(t).catch(r):c(o.Error,"DialogTransportController._recvTransport, during `connect` event handler","`this._protooPeer` is falsey!"):c(o.Error,"DialogTransportController._recvTransport, during `connect` event handler","`this._recvTransport` is falsey!")}))):c(o.Error,"DialogTransportController._setupRecvTransportEventHandlers()","`this._recvTransport` is falsey!")},t._createRecvTransport=async function(e,t){if(!this._protooPeer)return void c(o.Error,"DialogTransportController._createRecvTransport()","`this._protooPeer` is falsey!");if(!this._mediasoupDevice)return void c(o.Error,"DialogTransportController._createRecvTransport()","`this._mediasoupDevice` is falsey!");const r=await this._protooPeer.request("createWebRtcTransport",{producing:!1,consuming:!0,sctpCapabilities:void 0});this._recvTransport=this._mediasoupDevice.createRecvTransport({id:r.id,iceParameters:r.iceParameters,iceCandidates:r.iceCandidates,dtlsParameters:r.dtlsParameters,sctpParameters:r.sctpParameters,iceServers:e,iceTransportPolicy:t}),this._setupRecvTransportEventHandlers()},t.createAudioInputDeviceProducer=function(e){if(!this._sendTransport)return void c(o.Error,"DialogTransportController.createAudioInputDeviceProducer()","`_sendTransport` is falsey!");let t=!1;var r;(e.getTracks().map((async e=>{this._sendTransport?e&&"audio"===e.kind&&(t=!0,this._audioInputDeviceProducer?(c(o.Log,"DialogTransportController.createAudioInputDeviceProducer()","Producer already exists; replacing its track with the new track."),this._audioInputDeviceProducer.track&&this._audioInputDeviceProducer.track!==e&&(this._audioInputDeviceProducer.track.stop(),this._audioInputDeviceProducer.replaceTrack({track:e}))):(this._audioInputDeviceProducer=await this._sendTransport.produce({track:e,stopTracks:!1,codecOptions:{opusStereo:!1,opusDtx:!0},zeroRtpOnPause:!0,disableTrackOnPause:!0}),this._audioInputDeviceProducer.on("transportclose",(()=>{c(o.Log,"_audioInputDeviceProducer","Received `transportclose`."),this._audioInputDeviceProducer&&(this._audioInputDeviceProducer=null)})))):c(o.Error,"DialogTransportController.createAudioInputDeviceProducer()","During `stream` track processing, `_sendTransport` is falsey!")})),!t&&this._audioInputDeviceProducer)&&(null===(r=this._protooPeer)||void 0===r||r.request("closeProducer",{producerId:this._audioInputDeviceProducer.id}),this._audioInputDeviceProducer.close(),this._audioInputDeviceProducer=null)},t.handleNewConsumer=async function(e,t,r){if(!this._recvTransport)return void c(o.Error,"Protoo Signaling: 'newConsumer'","`this._recvTransport` is falsey!");const{peerId:n,producerId:a,id:i,kind:s,rtpParameters:d,appData:l}=e.data;try{const e=await this._recvTransport.consume({id:i,producerId:a,kind:s,rtpParameters:d,appData:{...l,peerId:n}});this._consumers.set(e.id,e),e.on("transportclose",(()=>{c(o.Error,"recvTransport Consumer","Received `transportclose` event. Consumer ID: `"+e.id+"`"),this._removeConsumer(e.id)})),t()}catch(p){throw r(),p}},t.handleConsumerClosed=async function(e){const t=this._consumers.get(e);t?(t.close(),this._removeConsumer(t.id)):c(o.Warn,"DialogTransportController.handleConsumerClosed()","Received `consumerClosed` notification without related consumer. ID: `"+e+"`")},t.handleConsumerLayersChanged=function(e,t,r){c(o.Log,"DialogTransportController.handleConsumerLayersChanged()","consumerId: `"+e+"` spatialLayer: `"+t+"` temporalLayer: `"+r+"`");this._consumers.get(e)||c(o.Warn,"DialogTransportController.handleConsumerLayersChanged()","Received `consumerLayersChanged` notification without related consumerId: `"+e+"`")},t.handleConsumerScore=function(e,t){c(o.Log,"DialogTransportController.handleConsumerScore","consumerId: `"+e+"` score: `"+JSON.stringify(t)+"`");this._consumers.get(e)||c(o.Warn,"DialogTransportController.handleConsumerScore()","Received `consumerScore` notification without related consumerId: `"+e+"`")},t.getConsumerAudioTracks=function(){c(o.Log,"getConsumerAudioTracks()","There are "+this._consumers.size+" consumers.");let e=[];return this._consumers.forEach((t=>{t.track&&"audio"===t.track.kind&&e.push({consumerId:t.id,track:t.track})})),e},e}();let p=function(){function e(){this.signalingState="new",this._mediasoupDevice=null,this._protooPeer=null,this._transportController=new l}var t=e.prototype;return t._setupSignalingEventHandlers=function(){this._protooPeer?(this._protooPeer.on("close",(()=>{this.signalingState="closed",c(o.Warn,"Protoo Signaling","Received `close` event"),this._transportController.closeTransports()})),this._protooPeer.on("disconnected",(()=>{this.signalingState="disconnected",c(o.Log,"Protoo Signaling","Received `disconnected` event")})),this._protooPeer.on("failed",(e=>{this.signalingState="failed",c(o.Error,"Protoo Signaling","Received `failed` event. Attempt #"+e+"/3. ")})),this._protooPeer.on("request",(async(e,t,r)=>{var n;if(c(o.Log,"Protoo Signaling","Received `request` event.\nMethod: "+e.method+"\nRequest ID: "+(null===(n=e.data)||void 0===n?void 0:n.id)),"newConsumer"===e.method)this._transportController.handleNewConsumer(e,t,r)})),this._protooPeer.on("notification",(e=>{switch(e.method){case"newPeer":{const{peerId:t}=e.data;c(o.Log,"Protoo Signaling","Received `newPeer` notification. peerId: `"+t+"`");break}case"peerClosed":{const{peerId:t}=e.data;c(o.Log,"Protoo Signaling","Received `peerClosed` notification. peerId: `"+t+"`");break}case"peerBlocked":{const{peerId:t}=e.data;c(o.Log,"Protoo Signaling","Received `peerBlocked` notification. peerId: `"+t+"`");break}case"peerUnblocked":{const{peerId:t}=e.data;c(o.Log,"Protoo Signaling","Received `peerUnblocked` notification. peerId: `"+t+"`");break}case"downlinkBwe":c(o.Log,"Protoo Signaling","Received `downlinkBwe` notification. downlinkBwe: `"+e.data+"`");break;case"consumerClosed":{const{consumerId:t}=e.data;this._transportController.handleConsumerClosed(t);break}case"consumerLayersChanged":{const{consumerId:t,spatialLayer:r,temporalLayer:n}=e.data;this._transportController.handleConsumerLayersChanged(t,r,n);break}case"consumerScore":{const{consumerId:t,score:r}=e.data;this._transportController.handleConsumerScore(t,r);break}case"activeSpeaker":break;default:c(o.Log,"Protoo Signaling","Received `notification` event.\nMethod: "+e.method+"\nData: "+JSON.stringify(e.data))}}))):c(o.Error,"DialogAdapter._setupSignalingEventHandlers()","`this._protooPeer` is falsey!")},t._getIceServers=function(e){let{host:t,port:r,turn:n}=e;const a=[];return n&&n.enabled?(n.transports.forEach((e=>{this._dialogConnectionParams.forceTcp||a.push({urls:"turns:"+t+":"+e.port,username:n.username,credential:n.credential}),a.push({urls:"turns:"+t+":"+e.port+"?transport=tcp",username:n.username,credential:n.credential})})),a.push({urls:"stun:stun1.l.google.com:19302"})):a.push({urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}),a},t._joinDialogRoom=async function(){if(!this._protooPeer)return void c(o.Error,"DialogAdapter._joinDialogRoom()","`this._protooPeer` is falsey!");this._mediasoupDevice=new i.Device({});const e=await this._protooPeer.request("getRouterRtpCapabilities");await this._mediasoupDevice.load({routerRtpCapabilities:e}),this._transportController.init(this._mediasoupDevice,this._protooPeer);const t=this._getIceServers(this._dialogConnectionParams);await this._transportController.createTransports(t,this._dialogConnectionParams.iceTransportPolicy),await this._protooPeer.request("join",{displayName:this._signalingPeerID,rtpCapabilities:this._mediasoupDevice.rtpCapabilities,sctpCapabilities:void 0,token:"jwt.verify commented out in dialog/Room.js - doesnt matter"}),c(o.Log,"_joinDialogRoom()","Joined Dialog Room!")},t.connectToDialog=async function(e){let{dialogConnectionParams:t,dataFromReticulum:r}=e;return new Promise(((e,n)=>{if("connecting"===this.signalingState||"connected"===this.signalingState||"failed"===this.signalingState)return n("Not ready for new connection; signaling state is `"+this.signalingState+"`");this.signalingState="connecting",this._dialogConnectionParams=t,this._signalingPeerID=r.reticulumSessionID;const a=new URL("wss://"+this._dialogConnectionParams.host+":"+this._dialogConnectionParams.port);a.searchParams.append("roomId",r.reticulumHubID),a.searchParams.append("peerId",r.reticulumSessionID);const i=new s.qo(a.toString(),{retry:{retries:2}});this._protooPeer=new s._z(i),this._setupSignalingEventHandlers(),this._protooPeer.on("open",(async()=>{this.signalingState="connected",c(o.Log,"Protoo Signaling","Received `open` event. Joining Dialog Room...");try{await this._joinDialogRoom(),e("ok")}catch(t){c(o.Warn,"Protoo Signaling","Error in `_joinDialogRoom()`:\n"+t),n(t)}}))}))},t.disconnectFromDialog=function(){this._protooPeer?(this._protooPeer.removeAllListeners(),this._protooPeer.closed||(c(o.Log,"disconnectFromDialog()","Closing Protoo signaling connection..."),this._protooPeer.close())):c(o.Warn,"disconnectFromDialog()","Can't close signaling connection without a `_protooPeer`!")},t.setInputAudioMediaStream=function(e){this._transportController.createAudioInputDeviceProducer(e)},t.getConsumerAudioTracks=function(){return this._transportController.getConsumerAudioTracks()},e}();var u=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M.676 6.941A12.964 12.964 0 0110 3c3.657 0 6.963 1.511 9.324 3.941a.75.75 0 01-.008 1.053l-.353.354a.75.75 0 01-1.069-.008C15.894 6.28 13.097 5 10 5 6.903 5 4.106 6.28 2.106 8.34a.75.75 0 01-1.069.008l-.353-.354a.75.75 0 01-.008-1.053zm2.825 2.833A8.976 8.976 0 0110 7a8.976 8.976 0 016.499 2.774.75.75 0 01-.011 1.049l-.354.354a.75.75 0 01-1.072-.012A6.978 6.978 0 0010 9c-1.99 0-3.786.83-5.061 2.165a.75.75 0 01-1.073.012l-.354-.354a.75.75 0 01-.01-1.05zm2.82 2.84A4.989 4.989 0 0110 11c1.456 0 2.767.623 3.68 1.614a.75.75 0 01-.022 1.039l-.354.354a.75.75 0 01-1.085-.026A2.99 2.99 0 0010 13c-.88 0-1.67.377-2.22.981a.75.75 0 01-1.084.026l-.354-.354a.75.75 0 01-.021-1.039zm2.795 2.752a1.248 1.248 0 011.768 0 .75.75 0 010 1.06l-.354.354a.75.75 0 01-1.06 0l-.354-.353a.75.75 0 010-1.06z",clipRule:"evenodd"}))}));var h=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))}));var m=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M11 5a3 3 0 11-6 0 3 3 0 016 0zM2.615 16.428a1.224 1.224 0 01-.569-1.175 6.002 6.002 0 0111.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 018 18a9.953 9.953 0 01-5.385-1.572zM16.25 5.75a.75.75 0 00-1.5 0v2h-2a.75.75 0 000 1.5h2v2a.75.75 0 001.5 0v-2h2a.75.75 0 000-1.5h-2v-2z"}))}));var f=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M11 5a3 3 0 11-6 0 3 3 0 016 0zM2.046 15.253c-.058.468.172.92.57 1.175A9.953 9.953 0 008 18c1.982 0 3.83-.578 5.384-1.573.398-.254.628-.707.57-1.175a6.001 6.001 0 00-11.908 0zM12.75 7.75a.75.75 0 000 1.5h5.5a.75.75 0 000-1.5h-5.5z"}))})),g=r(4160),b=r(5541);let v=function(e){return e[e.Button=0]="Button",e[e.ALink=1]="ALink",e[e.Link=2]="Link",e}({});const _=e=>{let{className:t="",buttonType:r,onClick:a,buttonText:i,buttonIconLeft:s=null,buttonIconRight:o=null,filled:c=!0,disabled:d=!1,type:l=v.Button,linkTarget:p="_blank"}=e,u="transition-all duration-75 group text-lg font-semibold box-border min-h-[41px] flex items-center justify-center py-1 px-2 rounded-md active:translate-x-[2px] active:translate-y-[2px] "+(d?"bg-neutral-400 text-neutral-300 cursor-not-allowed":c?"hover:underline bg-blue-700 dark:bg-indigo-700 hover:bg-blue-800 dark:hover:bg-indigo-800 text-slate-50":"text-blue-800 dark:text-indigo-800 hover:underline bg-neutral-50"),h=(0,b.m)(u,t);return l===v.ALink?n.createElement("div",{className:"transition-{transform, opacity, scale} duration-700"},n.createElement("a",{href:a,target:p,className:h},n.createElement("div",{className:"relative flex items-center justify-center"},n.createElement("div",{className:"relative flex justify-center items-center"},s),i?n.createElement("span",{className:"relative -top-0.5 h-6 mx-2 flex justify-center items-center"},i):null,n.createElement("div",{className:"relative flex justify-center items-center"},o)))):l===v.Link?n.createElement(g.rU,{to:a,className:h},n.createElement("div",{className:"relative flex items-center justify-center"},n.createElement("div",{className:"relative flex justify-center items-center"},s),i?n.createElement("span",{className:"relative -top-0.5 h-6 mx-2 flex justify-center items-center"},i):null,n.createElement("div",{className:"relative flex justify-center items-center"},o))):n.createElement("button",{type:r||"button",disabled:d,onClick:a,className:h},n.createElement("div",{className:"relative flex items-center justify-center"},n.createElement("div",{className:"relative flex justify-center items-center"},s),i?n.createElement("span",{className:"relative -top-0.5 h-6 mx-2 flex justify-center items-center"},i):null,n.createElement("div",{className:"relative flex justify-center items-center"},o)))},y=e=>{let{onConnectClicked:t,onDisconnectClicked:r,dialogHost:a,setDialogHost:i,dialogPort:s,setDialogPort:o,hubID:c,setHubID:d,sessionID:l,setSessionID:p}=e;const{0:g,1:b}=(0,n.useState)(!1),{0:v,1:y}=(0,n.useState)(!1),{0:w,1:S}=(0,n.useState)(!1);return n.createElement("div",{className:"flex flex-col mb-8 bg-slate-200 dark:bg-neutral-900 rounded-md items-center"},n.createElement("div",{className:"flex flex-col gap-1 w-full justify-center items-center bg-blue-300/40 dark:bg-indigo-900 rounded-t-md p-2"},n.createElement("div",{className:"flex gap-1 justify-center"},n.createElement("h2",{className:"font-semibold text-xl h-8"},n.createElement(u,{className:"w-5 h-5 inline-block mr-1 relative -top-0.5"}),"Connect/Disconnect"),n.createElement("button",{className:"transition-all opacity-70 hover:opacity-100",onClick:e=>b(!g)},n.createElement(h,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"}))),g?n.createElement("ul",{className:"w-full max-w-xl list-disc mx-2 mt-2 p-2 pl-6 rounded-md bg-yellow-50 dark:bg-yellow-800"},n.createElement("li",null,"Ensure that Dialog is running first (unless you're testing that failure case)."),n.createElement("li",null,'For convenience, the connection parameters in this form are saved to local storage for future sessions once you tap "Connect".')):null),n.createElement("div",{className:"px-6 pb-4"},n.createElement("form",{className:"w-full max-w-sm flex flex-col gap-2 bg-slate-300 dark:bg-slate-700 rounded-md p-2 md:p-3 my-4"},n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{htmlFor:"dialog-host",className:"font-semibold"},"Dialog Host"),n.createElement("input",{id:"dialog-host",className:"h-8 rounded-md p-2 w-full dark:text-neutral-950",type:"text",placeholder:"Host",value:a,onChange:e=>i(e.target.value)})),n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{htmlFor:"dialog-port",className:"font-semibold"},"Dialog Port"),n.createElement("input",{id:"dialog-port",className:"h-8 rounded-md p-2 w-full dark:text-neutral-950",type:"text",placeholder:"Port",value:s,onChange:e=>o(e.target.value)})),n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"flex gap-1"},n.createElement("label",{htmlFor:"dialog-hub-id",className:"font-semibold"},"Room/Hub ID"),n.createElement("button",{className:"transition-all opacity-70 hover:opacity-100",onClick:e=>{e.preventDefault(),y(!v)}},n.createElement(h,{className:"w-6 h-6 text-slate-700"}))),n.createElement("input",{id:"dialog-hub-id",className:"h-8 rounded-md p-2 w-full mt-1 dark:text-neutral-950",type:"text",placeholder:"Room/Hub ID",value:c,onChange:e=>d(e.target.value)}),v?n.createElement("div",{className:"flex flex-col gap-1 text-sm mt-1 rounded-md bg-yellow-50 dark:bg-yellow-800 p-1"},n.createElement("p",null,'Dialog and its underlying Mediasoup tech use the word "Room" to refer to "the virtual space in which everyone can hear/see each other."'),n.createElement("p",null,'Reticulum uses the word "Hub" to refer to "the virtual space in which everyone can hear/see each other."'),n.createElement("p",null,"If you have Reticulum running, try inputting the ",n.createElement("i",null,"Reticulum")," Hub ID here, i.e. hubs.mozilla.com/",n.createElement("strong",null,"E4e8oLx"),"/hubs-demo-promenade"),n.createElement("p",null,"Doing so will let you use this Tester to hear the unspatialized audio from folks in that Hub."),n.createElement("p",null,"Really, though, you can input anything in this field, and Dialog will make a new Room if it has to.")):null),n.createElement("div",{className:"flex flex-col"},n.createElement("div",{className:"flex gap-1"},n.createElement("label",{htmlFor:"dialog-session-id",className:"font-semibold"},"Client Session ID"),n.createElement("button",{className:"transition-all opacity-70 hover:opacity-100"},n.createElement(h,{className:"w-6 h-6 text-slate-700",onClick:e=>{e.preventDefault(),S(!w)}}))),n.createElement("input",{id:"dialog-session-id",className:"h-8 rounded-md p-2 w-full mt-1 dark:text-neutral-950",type:"text",placeholder:"Session ID",value:l,onChange:e=>p(e.target.value)}),w?n.createElement("div",{className:"flex flex-col gap-1 text-sm mt-1 rounded-md bg-yellow-50 dark:bg-yellow-800 p-1"},n.createElement("p",null,"I don't quite understand exactly what this ID is, where it comes from, or how it is used. TBD!"),n.createElement("p",null,'Dialog and its underlying Protoo signaling tech use the term "Peer ID" to identify other clients connected to the same Dialog Room.'),n.createElement("p",null,"Reticulum uses a few terms to refer to this (and related) concepts, such as ",n.createElement("code",null,"localClientID"),", ",n.createElement("code",null,"clientId"),", ",n.createElement("code",null,"session_id"),", and ",n.createElement("code",null,"peerId"),"."),n.createElement("p",null,"I haven't figured out whether or not this ID needs to be unique across clients."),n.createElement("p",null,"I'll fill in this section once I understand it more.")):null)),n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("div",{className:"flex flex-row gap-2"},n.createElement(_,{className:"w-52",buttonType:"button",buttonIconLeft:n.createElement(m,{className:"w-5 h-5"}),buttonText:"Connect",onClick:t}),n.createElement(_,{buttonType:"button",buttonIconLeft:n.createElement(f,{className:"w-5 h-5"}),buttonText:"Disconnect",onClick:r})))))};var w=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M10 3.75a.75.75 0 00-1.264-.546L4.703 7H3.167a.75.75 0 00-.7.48A6.985 6.985 0 002 10c0 .887.165 1.737.468 2.52.111.29.39.48.7.48h1.535l4.033 3.796A.75.75 0 0010 16.25V3.75zM15.95 5.05a.75.75 0 00-1.06 1.061 5.5 5.5 0 010 7.778.75.75 0 001.06 1.06 7 7 0 000-9.899z"}),n.createElement("path",{d:"M13.829 7.172a.75.75 0 00-1.061 1.06 2.5 2.5 0 010 3.536.75.75 0 001.06 1.06 4 4 0 000-5.656z"}))}));var S=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z",clipRule:"evenodd"}))}));const R=e=>{let{audioTrackInfo:t}=e;return n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("p",null,t.consumerId),n.createElement("audio",{autoPlay:!0,controls:!0,className:"w-full rounded-md",ref:e=>{e&&(e.srcObject=t.mediaStream,e.play())}}))},C=e=>{let{dialogAdapter:t}=e;const{0:r,1:a}=(0,n.useState)(!1),{0:i,1:s}=(0,n.useState)([]);return n.createElement("div",{className:"flex flex-col mb-8 p-6 pt-4 bg-slate-200 dark:bg-neutral-900 rounded-md items-center"},n.createElement("div",{className:"flex gap-1"},n.createElement("h2",{className:"font-semibold text-xl h-8"},n.createElement(w,{className:"w-5 h-5 inline-block mr-1 relative -top-0.5"}),"Remote Audio Streams"),n.createElement("button",{className:"transition-all opacity-70 hover:opacity-100",onClick:e=>a(!r)},n.createElement(h,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"}))),r?n.createElement("ul",{className:"w-full max-w-xl list-disc ml-4 p-4"},n.createElement("li",null,"Once you're connected to a Dialog instance, tap the button below to start listening to audio streams associated with all remote Dialog Consumers."),n.createElement("li",null,"🤞 At some point, there will be a checkbox here for automatically adding/removing audio streams in this list.")):null,n.createElement(_,{className:"max-w-md mt-4",buttonType:"button",buttonIconLeft:n.createElement(S,{className:"w-5 h-5"}),buttonText:"Refresh Audio Streams",onClick:()=>{let e=t.getConsumerAudioTracks();for(let t=0;t<e.length;t++){const r=new MediaStream;r.addTrack(e[t].track),e[t].mediaStream=r}s(e)}}),n.createElement("div",{id:"outputAudioElContainer",className:"w-full max-w-sm bg-slate-300 rounded-md p-2 flex flex-col items-center gap-1 mt-4"},i.map(((e,t)=>n.createElement(R,{key:t,audioTrackInfo:e})))))};var T=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5z",clipRule:"evenodd"}),n.createElement("path",{fillRule:"evenodd",d:"M6.194 12.753a.75.75 0 001.06.053L16.5 4.44v2.81a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.553l-9.056 8.194a.75.75 0 00-.053 1.06z",clipRule:"evenodd"}))}));const O=e=>{let{}=e;return n.createElement("header",{className:"mb-8 flex flex-col items-center"},n.createElement("h1",{className:"text-2xl font-semibold"},"Hubs WebRTC Tester"),n.createElement("div",{className:"flex gap-1"},n.createElement("a",{className:"font-semibold underline",href:"/about"},"Learn how Hubs uses WebRTC"),n.createElement("span",null,"•"),n.createElement("a",{className:"underline",target:"_blank",href:"https://github.com/zfox23/dialog/tree/hubs-webrtc-tester/hubs-webrtc-tester"},"View Source",n.createElement(T,{className:"h-4 w-4 ml-1 -top-0.5 relative inline-block"}))),n.createElement("p",{className:"mt-4"},"⚠️ This tool is under early and active development. Some functionality may not work as expected."))};var E=r(5785);var x=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))}));var k=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z",clipRule:"evenodd"}))})),P=r(6582),D=r(9498),A=r(6920);const L=e=>{let{}=e;const{0:t,1:r}=(0,n.useState)(!d||(!localStorage.getItem("logsExpanded")||"true"===localStorage.getItem("logsExpanded"))),{0:a,1:i}=(0,n.useState)(!d||(!localStorage.getItem("displayLogs")||"true"===localStorage.getItem("displayLogs"))),{0:s,1:o}=(0,n.useState)(!d||(!localStorage.getItem("displayWarnings")||"true"===localStorage.getItem("displayWarnings"))),{0:c,1:l}=(0,n.useState)(!d||(!localStorage.getItem("displayErrors")||"true"===localStorage.getItem("displayErrors"))),{0:p,1:u}=(0,n.useState)([]),{0:h,1:m}=(0,n.useState)([]),{0:f,1:g}=(0,n.useState)((0,D.t1)());return(0,A.P)("darkThemeChanged",(e=>{g(e.detail)})),(0,n.useEffect)((()=>{let e=[];a&&e.push("log"),s&&e.push("warn"),c&&e.push("error"),localStorage.setItem("displayLogs",a.toString()),localStorage.setItem("displayWarnings",s.toString()),localStorage.setItem("displayErrors",c.toString()),u(e)}),[a,s,c]),(0,n.useEffect)((()=>{const e=(0,P.Hook)(window.console,(e=>{m((t=>[].concat((0,E.Z)(t),[e])))}),!1);return()=>{(0,P.Unhook)(e)}}),[]),n.createElement("div",{className:"flex flex-col mb-8 w-full bg-slate-200 dark:bg-neutral-900 rounded-md items-center border-b-4 border-blue-300 dark:border-indigo-800"},n.createElement("div",{className:"flex gap-1 w-full justify-center bg-blue-300/40 dark:bg-indigo-900 rounded-t-md p-2"},n.createElement("h2",{className:"font-semibold text-xl h-8"},n.createElement(x,{className:"w-6 h-6 inline-block mr-1 relative"}),"Tester Logs"),n.createElement("button",{className:"transition-all opacity-90 hover:opacity-100",onClick:e=>{localStorage.setItem("logsExpanded",(!t).toString()),r(!t)}},n.createElement(k,{className:"w-6 h-6 scale-y-75 "+(t?"rotate-90":"rotate-0")+" text-slate-800 dark:text-slate-100 transition-transform"}))),n.createElement("div",{className:"flex gap-4 bg-slate-300 dark:bg-slate-700 rounded-md py-2 px-4 my-4"},n.createElement("div",{className:"text-red-700 dark:text-red-400"},n.createElement("input",{id:"showErrorsCheckbox",type:"checkbox",className:"mr-1",checked:c,onChange:e=>{l(e.target.checked)}}),n.createElement("label",{htmlFor:"showErrorsCheckbox",className:""},"Errors")),n.createElement("div",{className:"text-yellow-700 dark:text-yellow-400"},n.createElement("input",{id:"showWarningsCheckbox",type:"checkbox",className:"mr-1",checked:s,onChange:e=>{o(e.target.checked)}}),n.createElement("label",{htmlFor:"showWarningsCheckbox",className:""},"Warnings")),n.createElement("div",{className:"items-center"},n.createElement("input",{id:"showLogCheckbox",type:"checkbox",className:"mr-1",checked:a,onChange:e=>{i(e.target.checked)}}),n.createElement("label",{htmlFor:"showLogCheckbox",className:""},"Logs"))),n.createElement("div",{className:"overflow-auto w-full flex flex-col-reverse relative transition-all "+(t?"max-h-96":"max-h-16")},n.createElement("div",{className:"overflow-y-scroll flex flex-col-reverse"},n.createElement(P.Console,{filter:p,logs:h,variant:f?"dark":"light"})),n.createElement("div",{className:"h-6 pointer-events-none absolute top-0 w-full bg-gradient-to-b to-transparent from-slate-200 dark:from-neutral-900"})))};r(3462),r(3824);var I=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z"}),n.createElement("path",{d:"M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z"}))}));var j=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}));var M=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM18.584 5.106a.75.75 0 011.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 11-1.06-1.06 8.25 8.25 0 000-11.668.75.75 0 010-1.06z"}),n.createElement("path",{d:"M15.932 7.757a.75.75 0 011.061 0 6 6 0 010 8.486.75.75 0 01-1.06-1.061 4.5 4.5 0 000-6.364.75.75 0 010-1.06z"}))}));var N=n.forwardRef((function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM17.78 9.22a.75.75 0 10-1.06 1.06L18.44 12l-1.72 1.72a.75.75 0 001.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L20.56 12l1.72-1.72a.75.75 0 00-1.06-1.06l-1.72 1.72-1.72-1.72z"}))}));const B=e=>{let{deviceInfo:t}=e,r=t.label;return r&&0!==r.length||(r="Unknown Device"),n.createElement("option",{value:t.deviceId,label:r,"data-kind":t.kind},t.label)},F=e=>{let{dialogAdapter:t}=e;const{0:r,1:a}=(0,n.useState)(!1),{0:i,1:s}=(0,n.useState)(),{0:l,1:p}=(0,n.useState)(),{0:u,1:h}=(0,n.useState)([]),{0:m,1:f}=(0,n.useState)(!d||(!localStorage.getItem("echoCancellation")||"true"===localStorage.getItem("echoCancellation"))),{0:g,1:b}=(0,n.useState)(!d||(!localStorage.getItem("noiseSuppression")||"true"===localStorage.getItem("noiseSuppression"))),{0:v,1:y}=(0,n.useState)(!d||(!localStorage.getItem("autoGainControl")||"true"===localStorage.getItem("autoGainControl"))),{0:w,1:S}=(0,n.useState)(),{0:R,1:C}=(0,n.useState)(),{0:T,1:O}=(0,n.useState)(),E=(0,n.useRef)(null);(0,n.useEffect)((()=>{localStorage.setItem("echoCancellation",m.toString()),localStorage.setItem("noiseSuppression",g.toString()),localStorage.setItem("autoGainControl",v.toString()),"connected"===t.signalingState&&x()}),[w,m,g,v]);!function(e,t){void 0===t&&(t=[]);const r=(0,n.useRef)(),a=(0,n.useRef)(),i=t=>{if(null!=a.current){const r=t-a.current;e(r)}a.current=t,r.current=requestAnimationFrame(i)};(0,n.useEffect)((()=>(r.current=requestAnimationFrame(i),()=>cancelAnimationFrame(r.current))),t)}((e=>{if(!E.current)return;const t=E.current.getContext("2d");if(!t)return;const r=E.current.clientWidth,n=E.current.clientHeight;E.current.width=r,E.current.height=n,t.clearRect(0,0,r,n);const a=(()=>{if(!i)return 0;const e=new Uint8Array(i.frequencyBinCount);return i.getByteFrequencyData(e),e.reduce(((e,t)=>e+t))/i.frequencyBinCount/128})();t.fillStyle=a>.8?"rgb(255, 0, 0)":"rgb(0, 255, 0)",t.fillRect(0,0,a*r,n)}),[i]);const x=async()=>{let e={echoCancellation:m,noiseSuppression:g,autoGainControl:v,deviceId:{}};w&&(e.deviceId={exact:w}),c(o.Log,"AudioInputOutputPanel.setAudioInput()","Calling `getUserMedia()`...");const r=await navigator.mediaDevices.getUserMedia({audio:e,video:!1}),n=r.getTracks()[0].getSettings(),a=n.deviceId;w&&a!==w&&(c(o.Warn,"AudioInputOutputPanel.setAudioInput()","You selected audio input device `"+w+"`; `getUserMedia()` selected `"+a+"`!"),S(a)),m!==!!n.echoCancellation&&(c(o.Warn,"AudioInputOutputPanel.setAudioInput()","You set echoCancellation: `"+m+"`; `getUserMedia()` selected `"+!!n.echoCancellation+"`!"),f(!!n.echoCancellation)),g!==!!n.noiseSuppression&&(c(o.Warn,"AudioInputOutputPanel.setAudioInput()","You set noiseSuppression: `"+g+"`; `getUserMedia()` selected `"+!!n.noiseSuppression+"`!"),b(!!n.noiseSuppression)),v!==!!n.autoGainControl&&(c(o.Warn,"AudioInputOutputPanel.setAudioInput()","You set autoGainControl: `"+v+"`; `getUserMedia()` selected `"+!!n.autoGainControl+"`!"),y(!!n.autoGainControl));const i=new AudioContext,d=i.createMediaStreamSource(r),l=i.createAnalyser();l.minDecibels=-100,l.maxDecibels=-30,l.fftSize=64,d.connect(l),s(l),p(r),O(i);try{await t.setInputAudioMediaStream(r)}catch(u){return void c(o.Warn,"AudioInputOutputPanel.setAudioInput()",u)}};return n.createElement("div",{className:"flex flex-col mb-8 bg-slate-200 dark:bg-neutral-900 rounded-md items-center"},n.createElement("div",{className:"flex flex-col gap-1 w-full justify-center items-center bg-blue-300/40 dark:bg-indigo-900 rounded-t-md p-2"},n.createElement("div",{className:"flex gap-1 justify-center"},n.createElement("h2",{className:"font-semibold text-xl h-8"},n.createElement(I,{className:"w-5 h-5 inline-block mr-1 relative -top-0.5"}),"Audio I/O"),n.createElement("button",{className:"transition-all opacity-70 hover:opacity-100",onClick:e=>a(!r)},n.createElement(j,{className:"w-6 h-6 text-slate-700 dark:text-slate-200"}))),r?n.createElement("ul",{className:"w-full max-w-xl list-disc mx-2 mt-2 p-2 pl-6 rounded-md bg-yellow-50 dark:bg-yellow-800"},n.createElement("li",null,"Enable audio input using the button below to begin transmitting audio to Dialog."),n.createElement("li",null,n.createElement("strong",null,"Current test client limitation:")," If you enable audio input and then connect to Dialog, your input audio will not be transmitted."),n.createElement("li",null,"Audio input and output device selection is a common source of bugs and bug-like behavior for Web applications. Use this panel to manually test the behavior of audio I/O device selection while connected to and disconnected from the Dialog server.")):null),n.createElement("div",{className:"px-6 py-4"},n.createElement("div",{className:"flex flex-row flex-wrap justify-center gap-2"},n.createElement(_,{className:"w-72",buttonType:"button",buttonIconLeft:n.createElement(M,{className:"w-5 h-5"}),buttonText:"Enable Audio Input",onClick:async()=>{c(o.Log,"AudioInputOutputPanel.onEnableClicked()","Enabling audio input...");try{await x(),await(async()=>{if(!d)return;if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return void c(o.Warn,"AudioInputOutputPanel.setupAudioIODropdowns()","Your browser does not support `enumerateDevices()`; audio input/output device selection is unavailable.");let e;try{e=await navigator.mediaDevices.enumerateDevices()}catch(n){return void c(o.Error,"AudioInputOutputPanel.setupAudioIODropdowns()","Error in `enumerateDevices()`:\n"+n)}let t=0,r=0;for(let a=0;a<e.length;a++)"audioinput"===e[a].kind?t++:"audiooutput"===e[a].kind&&r++;c(o.Log,"AudioInputOutputPanel.setupAudioIODropdowns()","Media device enumeration complete.\n"+t+" input devices found.\n"+r+" output devices found."),h(e)})()}catch(e){return void c(o.Warn,"AudioInputOutputPanel.onEnableClicked()","Error while getting new audio input stream:\n"+e)}}}),n.createElement(_,{className:"w-64",buttonType:"button",buttonIconLeft:n.createElement(N,{className:"w-5 h-5"}),buttonText:"Disable Audio Input",onClick:()=>{c(o.Log,"AudioInputOutputPanel.onDisableClicked()","Disabling audio input..."),null==l||l.getTracks().forEach((e=>e.stop())),p(null),null==T||T.close()}})),n.createElement("div",{className:"flex flex-col gap-2 bg-slate-300 dark:bg-slate-700 rounded-md p-2 md:p-3 my-4"},n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("p",{className:"font-semibold"},"Audio Input Device Settings"),n.createElement("div",null,n.createElement("input",{id:"echoCancellationCheckbox",type:"checkbox",className:"mr-1",checked:m,onChange:e=>{f(e.target.checked)}}),n.createElement("label",{htmlFor:"echoCancellationCheckbox",className:""},"Echo Cancellation")),n.createElement("div",null,n.createElement("input",{id:"noiseSuppressionCheckbox",type:"checkbox",className:"mr-1",checked:g,onChange:e=>{b(e.target.checked)}}),n.createElement("label",{htmlFor:"noiseSuppressionCheckbox",className:""},"Noise Suppression")),n.createElement("div",null,n.createElement("input",{id:"autoGainControlCheckbox",type:"checkbox",className:"mr-1",checked:v,onChange:e=>{y(e.target.checked)}}),n.createElement("label",{htmlFor:"autoGainControlCheckbox",className:""},"Auto Gain Control"))),n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{htmlFor:"inputDeviceSelect",className:"font-semibold"},"Audio Input Device"),n.createElement("select",{className:"h-8 rounded-md px-2 py-1 w-full bg-slate-50 disabled:bg-neutral-300 dark:disabled:bg-neutral-300 disabled:cursor-not-allowed dark:text-neutral-950",id:"inputDeviceSelect",value:w,onChange:e=>{const t=e.target.value;c(o.Log,"AudioInputOutputPanel.onInputDeviceSelectChanged()","Input device changed to ID: `"+t+"`"),S(t)},disabled:0===u.filter((e=>"audioinput"===e.kind)).length},u.filter((e=>"audioinput"===e.kind)).map(((e,t)=>n.createElement(B,{key:t,deviceInfo:e})))),n.createElement("canvas",{ref:E,className:"w-full h-2 bg-slate-50 dark:bg-neutral-200 rounded-md"})),n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{htmlFor:"outputDeviceSelect",className:"font-semibold"},"Audio Output Device"),n.createElement("select",{className:"h-8 rounded-md px-2 py-1 w-full bg-slate-50 disabled:bg-neutral-300 dark:disabled:bg-neutral-300 disabled:cursor-not-allowed dark:text-neutral-950",id:"outputDeviceSelect",onChange:async e=>{const t=e.target.value;if(c(o.Log,"AudioInputOutputPanel.onOutputDeviceSelectChanged()","Output device changed to ID: `"+t+"`"),document.querySelectorAll("audio").forEach((e=>{void 0!==e.sinkId&&void 0!==e.setSinkId?e.setSinkId(t).then((()=>{c(o.Log,"AudioInputOutputPanel.onOutputDeviceSelectChanged()","New audio output device with ID `"+t+"` successfully attached to `"+e+"`.")})).catch((t=>{c(o.Error,"AudioInputOutputPanel.onOutputDeviceSelectChanged()","Error when setting output device on `"+e+"`:\n"+t)})):c(o.Error,"AudioInputOutputPanel.onOutputDeviceSelectChanged()","Your browser does not support output device selection.")})),void 0!==(null==T?void 0:T.setSinkId))try{await(null==T?void 0:T.setSinkId(t))}catch(e){c(o.Error,"AudioInputOutputPanel.onOutputDeviceSelectChanged()","Error during `audioContext.setSinkId():\n"+e)}C(t)},disabled:0===u.filter((e=>"audiooutput"===e.kind)).length},u.filter((e=>"audiooutput"===e.kind)).map(((e,t)=>n.createElement(B,{key:t,deviceInfo:e}))))))))},z="hubs.local",U="4443",G="6Ek8qkK",H="anonymous";var V=e=>{let{}=e;const t=new p,{0:r,1:i}=(0,n.useState)(d&&localStorage.getItem("dialogHost")||z),{0:s,1:o}=(0,n.useState)(d&&localStorage.getItem("dialogPort")||U),{0:c,1:l}=(0,n.useState)({enabled:!1}),{0:u,1:h}=(0,n.useState)(d&&localStorage.getItem("hubID")||G),{0:m,1:f}=(0,n.useState)(d&&localStorage.getItem("sessionID")||H);return n.createElement(a.A,null,n.createElement(O,null),n.createElement(y,{onConnectClicked:async()=>{console.log("You tapped the Connect button!"),localStorage.setItem("dialogHost",r),localStorage.setItem("dialogPort",s),localStorage.setItem("hubID",u),localStorage.setItem("sessionID",m);const e={host:r,port:parseInt(s),turn:c,forceTcp:!1,iceTransportPolicy:"all"},n={reticulumHubID:u,reticulumSessionID:m};try{await t.connectToDialog({dialogConnectionParams:e,dataFromReticulum:n})}catch(a){console.warn(a)}},onDisconnectClicked:()=>{console.log("You tapped the Disconnect button!"),t.disconnectFromDialog()},dialogHost:r,setDialogHost:i,dialogPort:s,setDialogPort:o,hubID:u,setHubID:h,sessionID:m,setSessionID:f}),n.createElement(F,{dialogAdapter:t}),n.createElement(L,null),n.createElement(C,{dialogAdapter:t}))}},7855:function(e,t,r){const n=r(1227)("h264-profile-level-id");n.log=console.info.bind(console);t.ProfileConstrainedBaseline=1,t.ProfileBaseline=2,t.ProfileMain=3,t.ProfileConstrainedHigh=4,t.ProfileHigh=5;const a=0,i=10;t.Level1_b=a,t.Level1=i,t.Level1_1=11,t.Level1_2=12,t.Level1_3=13,t.Level2=20,t.Level2_1=21,t.Level2_2=22,t.Level3=30,t.Level3_1=31,t.Level3_2=32,t.Level4=40,t.Level4_1=41,t.Level4_2=42,t.Level5=50,t.Level5_1=51,t.Level5_2=52;class s{constructor(e,t){this.profile=e,this.level=t}}t.ProfileLevelId=s;const o=new s(1,31);class c{constructor(e){this._mask=~p("x",e),this._maskedValue=p("1",e)}isMatch(e){return this._maskedValue===(e&this._mask)}}class d{constructor(e,t,r){this.profile_idc=e,this.profile_iop=t,this.profile=r}}const l=[new d(66,new c("x1xx0000"),1),new d(77,new c("1xxx0000"),1),new d(88,new c("11xx0000"),1),new d(66,new c("x0xx0000"),2),new d(88,new c("10xx0000"),2),new d(77,new c("0x0x0000"),3),new d(100,new c("00000000"),5),new d(100,new c("00001100"),4)];function p(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function u(e={}){const t=e["level-asymmetry-allowed"];return 1===t||"1"===t}t.parseProfileLevelId=function(e){if("string"!=typeof e||6!==e.length)return null;const t=parseInt(e,16);if(0===t)return null;const r=255&t,o=t>>8&255,c=t>>16&255;let d;switch(r){case 11:d=0!=(16&o)?a:11;break;case i:case 12:case 13:case 20:case 21:case 22:case 30:case 31:case 32:case 40:case 41:case 42:case 50:case 51:case 52:d=r;break;default:return n("parseProfileLevelId() | unrecognized level_idc:%s",r),null}for(const n of l)if(c===n.profile_idc&&n.profile_iop.isMatch(o))return new s(n.profile,d);return n("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){if(e.level==a)switch(e.profile){case 1:return"42f00b";case 2:return"42100b";case 3:return"4d100b";default:return n("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}let t;switch(e.profile){case 1:t="42e0";break;case 2:t="4200";break;case 3:t="4d00";break;case 4:t="640c";break;case 5:t="6400";break;default:return n("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}let r=e.level.toString(16);return 1===r.length&&(r=`0${r}`),`${t}${r}`},t.parseSdpProfileLevelId=function(e={}){const r=e["profile-level-id"];return r?t.parseProfileLevelId(r):o},t.isSameProfile=function(e={},r={}){const n=t.parseSdpProfileLevelId(e),a=t.parseSdpProfileLevelId(r);return Boolean(n&&a&&n.profile===a.profile)},t.generateProfileLevelIdForAnswer=function(e={},r={}){if(!e["profile-level-id"]&&!r["profile-level-id"])return n("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const o=t.parseSdpProfileLevelId(e),c=t.parseSdpProfileLevelId(r);if(!o)throw new TypeError("invalid local_profile_level_id");if(!c)throw new TypeError("invalid remote_profile_level_id");if(o.profile!==c.profile)throw new TypeError("H264 Profile mismatch");const d=u(e)&&u(r),l=o.level,p=c.level,h=function(e,t){return e===a?t!==i&&t!==a:t===a?e!==i:e<t}(m=l,f=p)?m:f;var m,f;const g=d?l:h;return n("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",o.profile,g),t.profileLevelIdToString(new s(o.profile,g))}},8679:function(e,t,r){"use strict";var n=r(9864),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function c(e){return n.isMemo(e)?s:o[e.$$typeof]||a}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=s;var d=Object.defineProperty,l=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(m){var a=h(r);a&&a!==m&&e(t,a,n)}var s=l(r);p&&(s=s.concat(p(r)));for(var o=c(t),f=c(r),g=0;g<s.length;++g){var b=s[g];if(!(i[b]||n&&n[b]||f&&f[b]||o&&o[b])){var v=u(r,b);try{d(t,b,v)}catch(_){}}}}return t}},7689:function(e,t,r){var n=r(6240),a=r(312);e.exports=function(e){return!(!n(e)||!a(window)||"function"!=typeof window.Node)&&("number"==typeof e.nodeType&&"string"==typeof e.nodeName)}},6240:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&null!==e}},312:function(e){"use strict";e.exports=function(e){if(null==e)return!1;var t=Object(e);return t===t.window}},6163:function(e,t,r){e.exports=r(5867).default},5867:function(e,t,r){"use strict";t.default=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.default.tokenize(e),a=[],s=[];for(r=new c(r),t=0;t<n.length;t++){var g=n[t];if(g.type!==d)if(g.type===p){var b=h(g.chars,r);a.push.apply(a,b)}else a.push(g);else{a.push(g);var v=g.tagName.toUpperCase();if(!("A"===v||o.contains(r.ignoreTags,v)))continue;var _=a.length;m(v,n,++t,a),t+=a.length-_-1}}for(t=0;t<a.length;t++){var y=a[t];switch(y.type){case d:var w="<"+y.tagName;if(y.attributes.length>0)w+=" "+f(y.attributes).join(" ");w+=">",s.push(w);break;case l:s.push("</"+y.tagName+">");break;case p:s.push(y.chars);break;case u:s.push("\x3c!--"+y.chars+"--\x3e")}}return s.join("")};var n,a=r(2226),i=(n=a)&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8425));var o=s.options,c=o.Options,d="StartTag",l="EndTag",p="Chars",u="Comment";function h(e,t){for(var r=s.tokenize(e),n=[],a=0;a<r.length;a++){var i=r[a];if("nl"===i.type&&t.nl2br)n.push({type:d,tagName:"br",attributes:[],selfClosing:!0});else if(i.isLink&&t.check(i)){var o=t.resolve(i),c=o.formatted,u=o.formattedHref,h=o.tagName,m=o.className,f=o.target,g=o.attributes,b=[["href",u]];for(var v in m&&b.push(["class",m]),f&&b.push(["target",f]),g)b.push([v,g[v]]);n.push({type:d,tagName:h,attributes:b,selfClosing:!1}),n.push({type:p,chars:c}),n.push({type:l,tagName:h})}else n.push({type:p,chars:i.toString()})}return n}function m(e,t,r,n){for(var a=1;r<t.length&&a>0;){var i=t[r];i.type===d&&i.tagName.toUpperCase()===e?a++:i.type===l&&i.tagName.toUpperCase()===e&&a--,n.push(i),r++}return n}function f(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],a=n[0],i=n[1];t.push(a+'="'+(i.replace(/"/g,"&quot;")+'"'))}return t}},7100:function(e,t,r){"use strict";var n,a=r(7294),i=(n=a)&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8425));var o=s.options,c=o.Options;function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===i.default.Children.count(e.props.children))return e;var n=[];i.default.Children.forEach(e.props.children,(function(e){"string"==typeof e?(r+=1,n.push.apply(n,function(e,t){for(var r=s.tokenize(e),n=[],a=0,o=0;o<r.length;o++){var c=r[o];if("nl"===c.type&&t.nl2br)n.push(i.default.createElement("br",{key:"linkified-"+ ++a}));else if(c.isLink&&t.check(c)){var d=t.resolve(c),l=d.formatted,p=d.formattedHref,u=d.tagName,h=d.className,m=d.target,f=d.attributes,g={key:"linkified-"+ ++a,href:p};if(h&&(g.className=h),m&&(g.target=m),f)for(var b in f)g[b]=f[b];n.push(i.default.createElement(u,g,l))}else n.push(c.toString())}return n}(e,t))):i.default.isValidElement(e)?"string"==typeof e.type&&o.contains(t.ignoreTags,e.type.toUpperCase())?n.push(e):n.push(d(e,t,++r)):n.push(e)}));var a={key:"linkified-element-"+r};for(var c in e.props)a[c]=e.props[c];return i.default.cloneElement(e,a,n)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e={key:"linkified-element-0"};for(var t in this.props)"options"!==t&&"tagName"!==t&&(e[t]=this.props[t]);var r=new c(this.props.options),n=this.props.tagName||"span";return d(i.default.createElement(n,e),r,0)},t}(i.default.Component);t.default=l},8425:function(e,t,r){"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var n=r(2227),a=o(r(7951)),i=o(r(6417)),s=o(r(5788));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=function(e){return s.run(i.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=c(e),n=[],a=0;a<r.length;a++){var i=r[a];!i.isLink||t&&i.type!==t||n.push(i.toObject())}return n},t.inherits=n.inherits,t.options=a,t.parser=s,t.scanner=i,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=c(e);return 1===r.length&&r[0].isLink&&(!t||r[0].type===t)},t.tokenize=c},5788:function(e,t,r){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var n=r(5439),a=r(3370),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=r(3333);var o=function(e){return new n.TokenState(e)},c=o(),d=o(),l=o(),p=o(),u=o(),h=o(),m=o(),f=o(a.URL),g=o(),b=o(a.URL),v=o(a.URL),_=o(),y=o(),w=o(),S=o(),R=o(),C=o(a.URL),T=o(a.URL),O=o(a.URL),E=o(a.URL),x=o(),k=o(),P=o(),D=o(),A=o(),L=o(),I=o(a.EMAIL),j=o(),M=o(a.EMAIL),N=o(a.MAILTOEMAIL),B=o(),F=o(),z=o(),U=o(),G=o(a.NL);c.on(s.NL,G).on(s.PROTOCOL,d).on(s.MAILTO,l).on(s.SLASH,p),d.on(s.SLASH,p),p.on(s.SLASH,u),c.on(s.TLD,h).on(s.DOMAIN,h).on(s.LOCALHOST,f).on(s.NUM,h),u.on(s.TLD,v).on(s.DOMAIN,v).on(s.NUM,v).on(s.LOCALHOST,v),h.on(s.DOT,m),A.on(s.DOT,L),m.on(s.TLD,f).on(s.DOMAIN,h).on(s.NUM,h).on(s.LOCALHOST,h),L.on(s.TLD,I).on(s.DOMAIN,A).on(s.NUM,A).on(s.LOCALHOST,A),f.on(s.DOT,m),I.on(s.DOT,L),f.on(s.COLON,g).on(s.SLASH,v),g.on(s.NUM,b),b.on(s.SLASH,v),I.on(s.COLON,j),j.on(s.NUM,M);var H=[s.DOMAIN,s.AT,s.LOCALHOST,s.NUM,s.PLUS,s.POUND,s.PROTOCOL,s.SLASH,s.TLD,s.UNDERSCORE,s.SYM,s.AMPERSAND],V=[s.COLON,s.DOT,s.QUERY,s.PUNCTUATION,s.CLOSEBRACE,s.CLOSEBRACKET,s.CLOSEANGLEBRACKET,s.CLOSEPAREN,s.OPENBRACE,s.OPENBRACKET,s.OPENANGLEBRACKET,s.OPENPAREN];v.on(s.OPENBRACE,y).on(s.OPENBRACKET,w).on(s.OPENANGLEBRACKET,S).on(s.OPENPAREN,R),_.on(s.OPENBRACE,y).on(s.OPENBRACKET,w).on(s.OPENANGLEBRACKET,S).on(s.OPENPAREN,R),y.on(s.CLOSEBRACE,v),w.on(s.CLOSEBRACKET,v),S.on(s.CLOSEANGLEBRACKET,v),R.on(s.CLOSEPAREN,v),C.on(s.CLOSEBRACE,v),T.on(s.CLOSEBRACKET,v),O.on(s.CLOSEANGLEBRACKET,v),E.on(s.CLOSEPAREN,v),x.on(s.CLOSEBRACE,v),k.on(s.CLOSEBRACKET,v),P.on(s.CLOSEANGLEBRACKET,v),D.on(s.CLOSEPAREN,v),y.on(H,C),w.on(H,T),S.on(H,O),R.on(H,E),y.on(V,x),w.on(V,k),S.on(V,P),R.on(V,D),C.on(H,C),T.on(H,T),O.on(H,O),E.on(H,E),C.on(V,C),T.on(V,T),O.on(V,O),E.on(V,E),x.on(H,C),k.on(H,T),P.on(H,O),D.on(H,E),x.on(V,x),k.on(V,k),P.on(V,P),D.on(V,D),v.on(H,v),_.on(H,v),v.on(V,_),_.on(V,_),l.on(s.TLD,N).on(s.DOMAIN,N).on(s.NUM,N).on(s.LOCALHOST,N),N.on(H,N).on(V,B),B.on(H,N).on(V,B);var $=[s.DOMAIN,s.NUM,s.PLUS,s.POUND,s.QUERY,s.UNDERSCORE,s.SYM,s.AMPERSAND,s.TLD];h.on($,F).on(s.AT,z),f.on($,F).on(s.AT,z),m.on($,F),F.on($,F).on(s.AT,z).on(s.DOT,U),U.on($,F),z.on(s.TLD,A).on(s.DOMAIN,A).on(s.LOCALHOST,I);t.State=n.TokenState,t.TOKENS=i,t.run=function(e){for(var t=e.length,r=0,n=[],i=[];r<t;){for(var s=c,o=null,d=null,l=0,p=null,u=-1;r<t&&!(o=s.next(e[r]));)i.push(e[r++]);for(;r<t&&(d=o||s.next(e[r]));)o=null,(s=d).accepts()?(u=0,p=s):u>=0&&u++,r++,l++;if(u<0)for(var h=r-l;h<r;h++)i.push(e[h]);else{i.length>0&&(n.push(new a.TEXT(i)),i=[]),r-=u,l-=u;var m=p.emit();n.push(new m(e.slice(r-l,r)))}}return i.length>0&&n.push(new a.TEXT(i)),n},t.start=c},6417:function(e,t,r){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var n=r(5439),a=r(3333),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a);var s="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),o="0123456789".split(""),c="0123456789abcdefghijklmnopqrstuvwxyz".split(""),d=[" ","\f","\r","\t","\v"," "," ","᠎"],l=[],p=function(e){return new n.CharacterState(e)},u=p(),h=p(a.NUM),m=p(a.DOMAIN),f=p(),g=p(a.WS);u.on("@",p(a.AT)).on(".",p(a.DOT)).on("+",p(a.PLUS)).on("#",p(a.POUND)).on("?",p(a.QUERY)).on("/",p(a.SLASH)).on("_",p(a.UNDERSCORE)).on(":",p(a.COLON)).on("{",p(a.OPENBRACE)).on("[",p(a.OPENBRACKET)).on("<",p(a.OPENANGLEBRACKET)).on("(",p(a.OPENPAREN)).on("}",p(a.CLOSEBRACE)).on("]",p(a.CLOSEBRACKET)).on(">",p(a.CLOSEANGLEBRACKET)).on(")",p(a.CLOSEPAREN)).on("&",p(a.AMPERSAND)).on([",",";","!",'"',"'"],p(a.PUNCTUATION)),u.on("\n",p(a.NL)).on(d,g),g.on(d,g);for(var b=0;b<s.length;b++){var v=(0,n.stateify)(s[b],u,a.TLD,a.DOMAIN);l.push.apply(l,v)}var _=(0,n.stateify)("file",u,a.DOMAIN,a.DOMAIN),y=(0,n.stateify)("ftp",u,a.DOMAIN,a.DOMAIN),w=(0,n.stateify)("http",u,a.DOMAIN,a.DOMAIN),S=(0,n.stateify)("mailto",u,a.DOMAIN,a.DOMAIN);l.push.apply(l,_),l.push.apply(l,y),l.push.apply(l,w),l.push.apply(l,S);var R=_.pop(),C=y.pop(),T=w.pop(),O=S.pop(),E=p(a.DOMAIN),x=p(a.PROTOCOL),k=p(a.MAILTO);C.on("s",E).on(":",x),T.on("s",E).on(":",x),l.push(E),R.on(":",x),E.on(":",x),O.on(":",k);var P=(0,n.stateify)("localhost",u,a.LOCALHOST,a.DOMAIN);l.push.apply(l,P),u.on(o,h),h.on("-",f).on(o,h).on(c,m),m.on("-",f).on(c,m);for(var D=0;D<l.length;D++)l[D].on("-",f).on(c,m);f.on("-",f).on(o,m).on(c,m),u.defaultTransition=p(a.SYM);var A=u;t.State=n.CharacterState,t.TOKENS=i,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),r=e.length,n=[],a=0;a<r;){for(var i=u,s=null,o=0,c=null,d=-1;a<r&&(s=i.next(t[a]));)(i=s).accepts()?(d=0,c=i):d>=0&&d++,o++,a++;if(!(d<0)){a-=d,o-=d;var l=c.emit();n.push(new l(e.substr(a-o,o)))}}return n},t.start=A},5439:function(e,t,r){"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var n=r(2227);var a=function(e){this.j=[],this.T=e||null};a.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var r=0;r<e.length;r++)this.j.push([e[r],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var r=this.j[t],n=r[0],a=r[1];if(this.test(e,n))return a}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var i=(0,n.inherits)(a,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),s=(0,n.inherits)(a,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.next(new e(""));return r===this.defaultTransition?(r=new this.constructor(t),this.on(e,r)):t&&(r.T=t),r},test:function(e,t){return e instanceof t}});t.CharacterState=i,t.TokenState=s,t.stateify=function(e,t,r,n){for(var a=0,s=e.length,o=t,c=[],d=void 0;a<s&&(d=o.next(e[a]));)o=d,a++;if(a>=s)return[];for(;a<s-1;)d=new i(n),c.push(d),o.on(e[a],d),o=d,a++;return d=new i(r),c.push(d),o.on(e[s-1],d),c}},9770:function(e,t){"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}},3370:function(e,t,r){"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var n=r(9770),a=r(2227),i=r(3333);var s=(0,n.createTokenClass)();s.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var o=(0,a.inherits)(s,(0,n.createTokenClass)(),{type:"email",isLink:!0}),c=(0,a.inherits)(s,(0,n.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),d=(0,a.inherits)(s,(0,n.createTokenClass)(),{type:"text"}),l=(0,a.inherits)(s,(0,n.createTokenClass)(),{type:"nl"}),p=(0,a.inherits)(s,(0,n.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",r=!1,n=!1,a=this.v,s=[],o=0;a[o]instanceof i.PROTOCOL;)r=!0,s.push(a[o].toString().toLowerCase()),o++;for(;a[o]instanceof i.SLASH;)n=!0,s.push(a[o].toString()),o++;for(;(e=a[o])instanceof i.DOMAIN||e instanceof i.TLD;)s.push(a[o].toString().toLowerCase()),o++;for(;o<a.length;o++)s.push(a[o].toString());return s=s.join(""),r||n||(s=t+"://"+s),s},hasProtocol:function(){return this.v[0]instanceof i.PROTOCOL}});t.Base=s,t.MAILTOEMAIL=o,t.EMAIL=c,t.NL=l,t.TEXT=d,t.URL=p},3333:function(e,t,r){"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var n=r(9770),a=r(2227),i=(0,n.createTokenClass)();function s(e){var t=e?{v:e}:{};return(0,a.inherits)(i,(0,n.createTokenClass)(),t)}i.prototype={toString:function(){return this.v+""}};var o=s(),c=s("@"),d=s(":"),l=s("."),p=s(),u=s(),h=s("\n"),m=s(),f=s("+"),g=s("#"),b=s(),v=s("mailto:"),_=s("?"),y=s("/"),w=s("_"),S=s(),R=s(),C=s(),T=s("{"),O=s("["),E=s("<"),x=s("("),k=s("}"),P=s("]"),D=s(">"),A=s(")"),L=s("&");t.Base=i,t.DOMAIN=o,t.AT=c,t.COLON=d,t.DOT=l,t.PUNCTUATION=p,t.LOCALHOST=u,t.NL=h,t.NUM=m,t.PLUS=f,t.POUND=g,t.QUERY=_,t.PROTOCOL=b,t.MAILTO=v,t.SLASH=y,t.UNDERSCORE=w,t.SYM=S,t.TLD=R,t.WS=C,t.OPENBRACE=T,t.OPENBRACKET=O,t.OPENANGLEBRACKET=E,t.OPENPAREN=x,t.CLOSEBRACE=k,t.CLOSEBRACKET=P,t.CLOSEANGLEBRACKET=D,t.CLOSEPAREN=A,t.AMPERSAND=L},2227:function(e,t){"use strict";t.__esModule=!0,t.inherits=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.create(e.prototype);for(var a in r)n[a]=r[a];return n.constructor=t,t.prototype=n,t}},7951:function(e,t){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={defaultProtocol:"http",events:null,format:i,formatHref:i,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function a(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:n.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:n.events,this.format=e.hasOwnProperty("format")?e.format:n.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:n.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:n.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:n.tagName,this.target=e.hasOwnProperty("target")?e.target:n.target,this.validate=e.hasOwnProperty("validate")?e.validate:n.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||n.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||n.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:n.ignoreTags,r=0;r<t.length;r++)this.ignoreTags.push(t[r].toUpperCase())}function i(e){return e}t.defaults=n,t.Options=a,t.contains=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},a.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,a){var i=void 0,s=this[e];if(!s)return s;switch(void 0===s?"undefined":r(s)){case"function":return s(t,a.type);case"object":return"function"==typeof(i=s.hasOwnProperty(a.type)?s[a.type]:n[e])?i(t,a.type):i}return s},getObject:function(e,t,r){var n=this[e];return"function"==typeof n?n(t,r.type):n}}},2226:function(e,t,r){"use strict";t.__esModule=!0;var n=c(r(8379)),a=c(r(7305)),i=c(r(1497)),s=c(r(4630)),o=c(r(4030));function c(e){return e&&e.__esModule?e:{default:e}}var d={HTML5NamedCharRefs:n.default,EntityParser:a.default,EventedTokenizer:i.default,Tokenizer:s.default,tokenize:o.default};t.default=d},7305:function(e,t){"use strict";function r(e){this.named=e}t.__esModule=!0;var n=/^#[xX]([A-Fa-f0-9]+)$/,a=/^#([0-9]+)$/,i=/^([A-Za-z0-9]+)$/;r.prototype.parse=function(e){if(e){var t=e.match(n);return t?"&#x"+t[1]+";":(t=e.match(a))?"&#"+t[1]+";":(t=e.match(i))?this.named[t[1]]||"&"+t[1]+";":void 0}},t.default=r},1497:function(e,t,r){"use strict";t.__esModule=!0;var n=r(55);function a(e,t){this.delegate=e,this.entityParser=t,this.state=null,this.input=null,this.index=-1,this.line=-1,this.column=-1,this.tagLine=-1,this.tagColumn=-1,this.reset()}a.prototype={reset:function(){this.state="beforeData",this.input="",this.index=0,this.line=1,this.column=0,this.tagLine=-1,this.tagColumn=-1,this.delegate.reset()},tokenize:function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},tokenizePart:function(e){for(this.input+=(0,n.preprocessInput)(e);this.index<this.input.length;)this.states[this.state].call(this)},tokenizeEOF:function(){this.flushData()},flushData:function(){"data"===this.state&&(this.delegate.finishData(),this.state="beforeData")},peek:function(){return this.input.charAt(this.index)},consume:function(){var e=this.peek();return this.index++,"\n"===e?(this.line++,this.column=0):this.column++,e},consumeCharRef:function(){var e=this.input.indexOf(";",this.index);if(-1!==e){var t=this.input.slice(this.index,e),r=this.entityParser.parse(t);if(r){for(var n=t.length;n;)this.consume(),n--;return this.consume(),r}}},markTagStart:function(){this.tagLine=this.line,this.tagColumn=this.column,this.delegate.tagOpen&&this.delegate.tagOpen()},states:{beforeData:function(){"<"===this.peek()?(this.state="tagOpen",this.markTagStart(),this.consume()):(this.state="data",this.delegate.beginData())},data:function(){var e=this.peek();"<"===e?(this.delegate.finishData(),this.state="tagOpen",this.markTagStart(),this.consume()):"&"===e?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();"!"===e?this.state="markupDeclaration":"/"===e?this.state="endTagOpen":(0,n.isAlpha)(e)&&(this.state="tagName",this.delegate.beginStartTag(),this.delegate.appendToTagName(e.toLowerCase()))},markupDeclaration:function(){"-"===this.consume()&&"-"===this.input.charAt(this.index)&&(this.consume(),this.state="commentStart",this.delegate.beginComment())},commentStart:function(){var e=this.consume();"-"===e?this.state="commentStartDash":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData(e),this.state="comment")},commentStartDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("-"),this.state="comment")},comment:function(){var e=this.consume();"-"===e?this.state="commentEndDash":this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();"-"===e?this.state="commentEnd":(this.delegate.appendToCommentData("-"+e),this.state="comment")},commentEnd:function(){var e=this.consume();">"===e?(this.delegate.finishComment(),this.state="beforeData"):(this.delegate.appendToCommentData("--"+e),this.state="comment")},tagName:function(){var e=this.consume();(0,n.isSpace)(e)?this.state="beforeAttributeName":"/"===e?this.state="selfClosingStartTag":">"===e?(this.delegate.finishTag(),this.state="beforeData"):this.delegate.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():"/"===e?(this.state="selfClosingStartTag",this.consume()):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeName",this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},attributeName:function(){var e=this.peek();(0,n.isSpace)(e)?(this.state="afterAttributeName",this.consume()):"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.state="beforeAttributeValue",this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():"/"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="selfClosingStartTag"):"="===e?(this.consume(),this.state="beforeAttributeValue"):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.state="attributeName",this.delegate.beginAttribute(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();(0,n.isSpace)(e)?this.consume():'"'===e?(this.state="attributeValueDoubleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):"'"===e?(this.state="attributeValueSingleQuoted",this.delegate.beginAttributeValue(!0),this.consume()):">"===e?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.state="attributeValueUnquoted",this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();'"'===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef('"')||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();"'"===e?(this.delegate.finishAttributeValue(),this.state="afterAttributeValueQuoted"):"&"===e?this.delegate.appendToAttributeValue(this.consumeCharRef("'")||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();(0,n.isSpace)(e)?(this.delegate.finishAttributeValue(),this.consume(),this.state="beforeAttributeName"):"&"===e?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef(">")||"&")):">"===e?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.state="beforeData"):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();(0,n.isSpace)(e)?(this.consume(),this.state="beforeAttributeName"):"/"===e?(this.consume(),this.state="selfClosingStartTag"):">"===e?(this.consume(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},selfClosingStartTag:function(){">"===this.peek()?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.state="beforeData"):this.state="beforeAttributeName"},endTagOpen:function(){var e=this.consume();(0,n.isAlpha)(e)&&(this.state="tagName",this.delegate.beginEndTag(),this.delegate.appendToTagName(e.toLowerCase()))}}},t.default=a},8379:function(e,t){"use strict";t.__esModule=!0;t.default={nbsp:" "}},4030:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){return new n.default(new a.default(i.default),t).tokenize(e)};var n=s(r(4630)),a=s(r(7305)),i=s(r(8379));function s(e){return e&&e.__esModule?e:{default:e}}},4630:function(e,t,r){"use strict";t.__esModule=!0;var n,a=r(1497),i=(n=a)&&n.__esModule?n:{default:n};function s(e,t){this.token=null,this.startLine=1,this.startColumn=0,this.options=t||{},this.tokenizer=new i.default(this,e)}s.prototype={tokenize:function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},tokenizePart:function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},tokenizeEOF:function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},reset:function(){this.token=null,this.startLine=1,this.startColumn=0},addLocInfo:function(){this.options.loc&&(this.token.loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},beginData:function(){this.token={type:"Chars",chars:""},this.tokens.push(this.token)},appendToData:function(e){this.token.chars+=e},finishData:function(){this.addLocInfo()},beginComment:function(){this.token={type:"Comment",chars:""},this.tokens.push(this.token)},appendToCommentData:function(e){this.token.chars+=e},finishComment:function(){this.addLocInfo()},beginStartTag:function(){this.token={type:"StartTag",tagName:"",attributes:[],selfClosing:!1},this.tokens.push(this.token)},beginEndTag:function(){this.token={type:"EndTag",tagName:""},this.tokens.push(this.token)},finishTag:function(){this.addLocInfo()},markTagAsSelfClosing:function(){this.token.selfClosing=!0},appendToTagName:function(e){this.token.tagName+=e},beginAttribute:function(){this._currentAttribute=["","",null],this.token.attributes.push(this._currentAttribute)},appendToAttributeName:function(e){this._currentAttribute[0]+=e},beginAttributeValue:function(e){this._currentAttribute[2]=e},appendToAttributeValue:function(e){this._currentAttribute[1]=this._currentAttribute[1]||"",this._currentAttribute[1]+=e},finishAttributeValue:function(){}},t.default=s},55:function(e,t){"use strict";t.__esModule=!0,t.isSpace=function(e){return r.test(e)},t.isAlpha=function(e){return n.test(e)},t.preprocessInput=function(e){return e.replace(a,"\n")};var r=/[\t\n\f ]/,n=/[A-Za-z]/,a=/\r\n?/g},8175:function(e,t,r){e.exports=r(7100).default},3504:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;const n=r(8562),a=r(4493),i=r(9992),s=new n.Logger("Consumer");class o extends a.EnhancedEventEmitter{constructor({id:e,localId:t,producerId:r,rtpReceiver:n,track:i,rtpParameters:o,appData:c}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,s.debug("constructor()"),this._id=e,this._localId=t,this._producerId=r,this._rtpReceiver=n,this._track=i,this._rtpParameters=o,this._paused=!i.enabled,this._appData=c||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new i.InvalidStateError("closed");return new Promise(((e,t)=>{this.safeEmit("@getstats",e,t)}))}pause(){s.debug("pause()"),this._closed?s.error("pause() | Consumer closed"):this._paused?s.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){s.debug("resume()"),this._closed?s.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):s.debug("resume() | Consumer is already resumed")}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch(e){}}}t.Consumer=o},1623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsumer=void 0;const n=r(8562),a=r(4493),i=new n.Logger("DataConsumer");class s extends a.EnhancedEventEmitter{constructor({id:e,dataProducerId:t,dataChannel:r,sctpStreamParameters:n,appData:s}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,i.debug("constructor()"),this._id=e,this._dataProducerId=t,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=s||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(i.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(i.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",(()=>{this._closed||(i.debug('DataChannel "open" event'),this.safeEmit("open"))})),this._dataChannel.addEventListener("error",(e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?i.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):i.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)})),this._dataChannel.addEventListener("close",(()=>{this._closed||(i.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))})),this._dataChannel.addEventListener("message",(e=>{this._closed||this.safeEmit("message",e.data)}))}}t.DataConsumer=s},5504:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProducer=void 0;const n=r(8562),a=r(4493),i=r(9992),s=new n.Logger("DataProducer");class o extends a.EnhancedEventEmitter{constructor({id:e,dataChannel:t,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,s.debug("constructor()"),this._id=e,this._dataChannel=t,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(s.debug("send()"),this._closed)throw new i.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",(()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))})),this._dataChannel.addEventListener("error",(e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):s.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)})),this._dataChannel.addEventListener("close",(()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))})),this._dataChannel.addEventListener("message",(()=>{this._closed||s.warn('DataChannel "message" event in a DataProducer, message discarded')})),this._dataChannel.addEventListener("bufferedamountlow",(()=>{this._closed||this.safeEmit("bufferedamountlow")}))}}t.DataProducer=o},3120:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=t.detectDevice=void 0;const s=r(2238),o=r(8562),c=r(4493),d=r(9992),l=i(r(3347)),p=i(r(5280)),u=r(5202),h=r(2960),m=r(6656),f=r(5372),g=r(3560),b=r(564),v=r(1419),_=r(9862),y=r(2205),w=r(7392),S=r(3433),R=r(4770),C=new o.Logger("Device");function T(){if("object"==typeof navigator&&"ReactNative"===navigator.product)return C.debug("detectDevice() | React-Native detected"),"undefined"==typeof RTCPeerConnection?void C.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):"undefined"!=typeof RTCRtpTransceiver?(C.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(C.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if("object"!=typeof navigator||"string"!=typeof navigator.userAgent)C.warn("detectDevice() | unknown device");else{const e=navigator.userAgent,t=new s.UAParser(e);C.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",e,t.getResult());const r=t.getBrowser(),n=r.name?.toLowerCase()??"",a=parseInt(r.major??"0"),i=t.getEngine(),o=i.name?.toLowerCase()??"",c=t.getOS(),d=c.name?.toLowerCase()??"",l=parseFloat(c.version??"0"),p="ios"===d,u=["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(n),h=["firefox","mobile firefox","mobile focus"].includes(n),m=["safari","mobile safari"].includes(n),f=["edge"].includes(n);if((u||f)&&!p&&a>=111)return"Chrome111";if(u&&!p&&a>=74||f&&!p&&a>=88)return"Chrome74";if(u&&!p&&a>=70)return"Chrome70";if(u&&!p&&a>=67)return"Chrome67";if(u&&!p&&a>=55)return"Chrome55";if(h&&!p&&a>=60)return"Firefox60";if(h&&p&&l>=14.3)return"Safari12";if(m&&a>=12&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(m&&a>=11)return"Safari11";if(f&&!p&&a>=11&&a<=18)return"Edge11";if("webkit"===o&&p&&l>=14.3&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if("blink"===o){const t=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(t){const e=Number(t[1]);return e>=111?"Chrome111":e>=74?"Chrome74":e>=70?"Chrome70":e>=67?"Chrome67":"Chrome55"}return"Chrome111"}C.warn("detectDevice() | browser not supported [name:%s, version:%s]",n,a)}}t.detectDevice=T;t.Device=class{constructor({handlerName:e,handlerFactory:t,Handler:r}={}){if(this._loaded=!1,this._observer=new c.EnhancedEventEmitter,C.debug("constructor()"),r){if(C.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!=typeof r)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");e=r}if(e&&t)throw new TypeError("just one of handlerName or handlerInterface can be given");if(t)this._handlerFactory=t;else{if(e)C.debug("constructor() | handler given: %s",e);else{if(!(e=T()))throw new d.UnsupportedError("device not supported");C.debug("constructor() | detected handler: %s",e)}switch(e){case"Chrome111":this._handlerFactory=h.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=m.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=f.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=g.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=b.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=v.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=_.Safari12.createFactory();break;case"Safari11":this._handlerFactory=y.Safari11.createFactory();break;case"Edge11":this._handlerFactory=w.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=S.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=R.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new d.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new d.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){let t;C.debug("load() [routerRtpCapabilities:%o]",e),e=l.clone(e,void 0);try{if(this._loaded)throw new d.InvalidStateError("already loaded");p.validateRtpCapabilities(e),t=this._handlerFactory();const r=await t.getNativeRtpCapabilities();C.debug("load() | got native RTP capabilities:%o",r),p.validateRtpCapabilities(r),this._extendedRtpCapabilities=p.getExtendedRtpCapabilities(r,e),C.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=p.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=p.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=p.getRecvRtpCapabilities(this._extendedRtpCapabilities),p.validateRtpCapabilities(this._recvRtpCapabilities),C.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await t.getNativeSctpCapabilities(),C.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),p.validateSctpCapabilities(this._sctpCapabilities),C.debug("load() succeeded"),this._loaded=!0,t.close()}catch(r){throw t&&t.close(),r}}canProduce(e){if(!this._loaded)throw new d.InvalidStateError("not loaded");if("audio"!==e&&"video"!==e)throw new TypeError(`invalid kind "${e}"`);return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,appData:d}){return C.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,appData:d})}createRecvTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,appData:d}){return C.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,appData:d})}createTransport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:l,appData:p}){if(!this._loaded)throw new d.InvalidStateError("not loaded");if("string"!=typeof t)throw new TypeError("missing id");if("object"!=typeof r)throw new TypeError("missing iceParameters");if(!Array.isArray(n))throw new TypeError("missing iceCandidates");if("object"!=typeof a)throw new TypeError("missing dtlsParameters");if(i&&"object"!=typeof i)throw new TypeError("wrong sctpParameters");if(p&&"object"!=typeof p)throw new TypeError("if given, appData must be an object");const h=new u.Transport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:c,proprietaryConstraints:l,appData:p,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",h),h}}},4493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancedEventEmitter=void 0;const n=r(7187),a=new(r(8562).Logger)("EnhancedEventEmitter");class i extends n.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){const r=super.listenerCount(e);try{return super.emit(e,...t)}catch(n){return a.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,n),Boolean(r)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}t.EnhancedEventEmitter=i},8562:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const a=n(r(1227)),i="mediasoup-client";t.Logger=class{constructor(e){e?(this._debug=(0,a.default)(`${i}:${e}`),this._warn=(0,a.default)(`${i}:WARN:${e}`),this._error=(0,a.default)(`${i}:ERROR:${e}`)):(this._debug=(0,a.default)(i),this._warn=(0,a.default)(`${i}:WARN`),this._error=(0,a.default)(`${i}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producer=void 0;const n=r(8562),a=r(4493),i=r(9992),s=new n.Logger("Producer");class o extends a.EnhancedEventEmitter{constructor({id:e,localId:t,rtpSender:r,track:n,rtpParameters:i,stopTracks:o,disableTrackOnPause:c,zeroRtpOnPause:d,appData:l}){super(),this._closed=!1,this._observer=new a.EnhancedEventEmitter,s.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=r,this._track=n,this._kind=n.kind,this._rtpParameters=i,this._paused=!!c&&!n.enabled,this._maxSpatialLayer=void 0,this._stopTracks=o,this._disableTrackOnPause=c,this._zeroRtpOnPause=d,this._appData=l||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new i.InvalidStateError("closed");return new Promise(((e,t)=>{this.safeEmit("@getstats",e,t)}))}pause(){s.debug("pause()"),this._closed?s.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise(((e,t)=>{this.safeEmit("@pause",e,t)})).catch((()=>{})),this._observer.safeEmit("pause"))}resume(){s.debug("resume()"),this._closed?s.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise(((e,t)=>{this.safeEmit("@resume",e,t)})).catch((()=>{})),this._observer.safeEmit("resume"))}async replaceTrack({track:e}){if(s.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(t){}throw new i.InvalidStateError("closed")}if(e&&"ended"===e.readyState)throw new i.InvalidStateError("track ended");e!==this._track?(await new Promise(((t,r)=>{this.safeEmit("@replacetrack",e,t,r)})),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):s.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(e){if(this._closed)throw new i.InvalidStateError("closed");if("video"!==this._kind)throw new i.UnsupportedError("not a video Producer");if("number"!=typeof e)throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise(((t,r)=>{this.safeEmit("@setmaxspatiallayer",e,t,r)})).catch((()=>{})),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new i.InvalidStateError("closed");if("object"!=typeof e)throw new TypeError("invalid params");await new Promise(((t,r)=>{this.safeEmit("@setrtpencodingparameters",e,t,r)}))}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}}t.Producer=o},4879:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7774:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5202:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const o=r(2186),c=s(r(4375)),d=r(8562),l=r(4493),p=r(9992),u=i(r(3347)),h=i(r(5280)),m=r(6569),f=r(3504),g=r(5504),b=r(1623),v=new d.Logger("Transport");class _{constructor(e){this.consumerOptions=e,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class y extends l.EnhancedEventEmitter{constructor({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:s,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:p,appData:h,handlerFactory:m,extendedRtpCapabilities:f,canProduceByKind:g}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new o.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new l.EnhancedEventEmitter,v.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=f,this._canProduceByKind=g,this._maxSctpMessageSize=i?i.maxMessageSize:null,delete(d=u.clone(d,{})).iceServers,delete d.iceTransportPolicy,delete d.bundlePolicy,delete d.rtcpMuxPolicy,delete d.sdpSemantics,this._handler=m(),this._handler.run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:s,iceTransportPolicy:c,additionalSettings:d,proprietaryConstraints:p,extendedRtpCapabilities:f}),this._appData=h||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){if(!this._closed){v.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new p.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(v.debug("restartIce()"),this._closed)throw new p.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push((async()=>await this._handler.restartIce(e)),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(v.debug("updateIceServers()"),this._closed)throw new p.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push((async()=>this._handler.updateIceServers(e)),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:r,codec:n,stopTracks:a=!0,disableTrackOnPause:i=!0,zeroRtpOnPause:s=!1,appData:o={}}={}){if(v.debug("produce() [track:%o]",e),this._closed)throw new p.InvalidStateError("closed");if(!e)throw new TypeError("missing track");if("send"!==this._direction)throw new p.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[e.kind])throw new p.UnsupportedError(`cannot produce ${e.kind}`);if("ended"===e.readyState)throw new p.InvalidStateError("track ended");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("produce"))throw new TypeError('no "produce" listener set into this transport');if(o&&"object"!=typeof o)throw new TypeError("if given, appData must be an object");return this._awaitQueue.push((async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&0===t.length?c=void 0:t&&(c=t.map((e=>{const t={active:!0};return!1===e.active&&(t.active=!1),"boolean"==typeof e.dtx&&(t.dtx=e.dtx),"string"==typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"==typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"==typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"==typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"==typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"==typeof e.priority&&(t.priority=e.priority),"string"==typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t})));const{localId:d,rtpParameters:l,rtpSender:p}=await this._handler.send({track:e,encodings:c,codecOptions:r,codec:n});try{h.validateRtpParameters(l);const{id:t}=await new Promise(((t,r)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:l,appData:o},t,r)})),r=new m.Producer({id:t,localId:d,rtpSender:p,track:e,rtpParameters:l,stopTracks:a,disableTrackOnPause:i,zeroRtpOnPause:s,appData:o});return this._producers.set(r.id,r),this.handleProducer(r),this._observer.safeEmit("newproducer",r),r}catch(u){throw this._handler.stopSending(d).catch((()=>{})),u}}),"transport.produce()").catch((t=>{if(a)try{e.stop()}catch(r){}throw t}))}async consume({id:e,producerId:t,kind:r,rtpParameters:n,streamId:a,appData:i={}}){if(v.debug("consume()"),n=u.clone(n,void 0),this._closed)throw new p.InvalidStateError("closed");if("recv"!==this._direction)throw new p.UnsupportedError("not a receiving Transport");if("string"!=typeof e)throw new TypeError("missing id");if("string"!=typeof t)throw new TypeError("missing producerId");if("audio"!==r&&"video"!==r)throw new TypeError(`invalid kind '${r}'`);if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");if(!h.canReceive(n,this._extendedRtpCapabilities))throw new p.UnsupportedError("cannot consume this Producer");const s=new _({id:e,producerId:t,kind:r,rtpParameters:n,streamId:a,appData:i});return this._pendingConsumerTasks.push(s),(0,c.default)((()=>{this._closed||!1===this._consumerCreationInProgress&&this.createPendingConsumers()})),s.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:r,label:n="",protocol:a="",appData:i={}}={}){if(v.debug("produceData()"),this._closed)throw new p.InvalidStateError("closed");if("send"!==this._direction)throw new p.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new p.UnsupportedError("SCTP not enabled by remote Transport");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("producedata"))throw new TypeError('no "producedata" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");return(t||r)&&(e=!1),this._awaitQueue.push((async()=>{const{dataChannel:s,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a});h.validateSctpStreamParameters(o);const{id:c}=await new Promise(((e,t)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:n,protocol:a,appData:i},e,t)})),d=new g.DataProducer({id:c,dataChannel:s,sctpStreamParameters:o,appData:i});return this._dataProducers.set(d.id,d),this.handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d}),"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:r,label:n="",protocol:a="",appData:i={}}){if(v.debug("consumeData()"),r=u.clone(r,void 0),this._closed)throw new p.InvalidStateError("closed");if("recv"!==this._direction)throw new p.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new p.UnsupportedError("SCTP not enabled by remote Transport");if("string"!=typeof e)throw new TypeError("missing id");if("string"!=typeof t)throw new TypeError("missing dataProducerId");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(i&&"object"!=typeof i)throw new TypeError("if given, appData must be an object");return h.validateSctpStreamParameters(r),this._awaitQueue.push((async()=>{const{dataChannel:s}=await this._handler.receiveDataChannel({sctpStreamParameters:r,label:n,protocol:a}),o=new b.DataConsumer({id:e,dataProducerId:t,dataChannel:s,sctpStreamParameters:r,appData:i});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o}),"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingConsumerTasks.length)return void v.debug("createPendingConsumers() | there is no Consumer to be created");const e=[...this._pendingConsumerTasks];let t;this._pendingConsumerTasks=[];const r=[];for(const a of e){const{id:e,kind:t,rtpParameters:n,streamId:i}=a.consumerOptions;r.push({trackId:e,kind:t,rtpParameters:n,streamId:i})}try{const n=await this._handler.receive(r);for(let r=0;r<n.length;++r){const a=e[r],i=n[r],{id:s,producerId:o,kind:c,rtpParameters:d,appData:l}=a.consumerOptions,{localId:p,rtpReceiver:u,track:h}=i,m=new f.Consumer({id:s,localId:p,producerId:o,rtpReceiver:u,track:h,rtpParameters:d,appData:l});this._consumers.set(m.id,m),this.handleConsumer(m),this._probatorConsumerCreated||t||"video"!==c||(t=m),this._observer.safeEmit("newconsumer",m),a.resolve(m)}}catch(n){for(const t of e)t.reject(n)}if(t)try{const e=h.generateProbatorRtpParameters(t.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:e}]),v.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(n){v.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",n)}}),"transport.createPendingConsumers()").then((()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()})).catch((()=>{}))}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingPauseConsumers.size)return void v.debug("pausePendingConsumers() | there is no Consumer to be paused");const e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const t=e.map((e=>e.localId));await this._handler.pauseReceiving(t)}catch(t){v.error("pausePendingConsumers() | failed to pause Consumers:",t)}}),"transport.pausePendingConsumers").then((()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()})).catch((()=>{}))}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingResumeConsumers.size)return void v.debug("resumePendingConsumers() | there is no Consumer to be resumed");const e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const t=e.map((e=>e.localId));await this._handler.resumeReceiving(t)}catch(t){v.error("resumePendingConsumers() | failed to resume Consumers:",t)}}),"transport.resumePendingConsumers").then((()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()})).catch((()=>{}))}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push((async()=>{if(0===this._pendingCloseConsumers.size)return void v.debug("closePendingConsumers() | there is no Consumer to be closed");const e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map((e=>e.localId)))}catch(t){v.error("closePendingConsumers() | failed to close Consumers:",t)}}),"transport.closePendingConsumers").then((()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()})).catch((()=>{}))}handleHandler(){const e=this._handler;e.on("@connect",(({dtlsParameters:e},t,r)=>{this._closed?r(new p.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:e},t,r)})),e.on("@icegatheringstatechange",(e=>{e!==this._iceGatheringState&&(v.debug("ICE gathering state changed to %s",e),this._iceGatheringState=e,this._closed||this.safeEmit("icegatheringstatechange",e))})),e.on("@connectionstatechange",(e=>{e!==this._connectionState&&(v.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))}))}handleProducer(e){e.on("@close",(()=>{this._producers.delete(e.id),this._closed||this._awaitQueue.push((async()=>await this._handler.stopSending(e.localId)),"producer @close event").catch((e=>v.warn("producer.close() failed:%o",e)))})),e.on("@pause",((t,r)=>{this._awaitQueue.push((async()=>await this._handler.pauseSending(e.localId)),"producer @pause event").then(t).catch(r)})),e.on("@resume",((t,r)=>{this._awaitQueue.push((async()=>await this._handler.resumeSending(e.localId)),"producer @resume event").then(t).catch(r)})),e.on("@replacetrack",((t,r,n)=>{this._awaitQueue.push((async()=>await this._handler.replaceTrack(e.localId,t)),"producer @replacetrack event").then(r).catch(n)})),e.on("@setmaxspatiallayer",((t,r,n)=>{this._awaitQueue.push((async()=>await this._handler.setMaxSpatialLayer(e.localId,t)),"producer @setmaxspatiallayer event").then(r).catch(n)})),e.on("@setrtpencodingparameters",((t,r,n)=>{this._awaitQueue.push((async()=>await this._handler.setRtpEncodingParameters(e.localId,t)),"producer @setrtpencodingparameters event").then(r).catch(n)})),e.on("@getstats",((t,r)=>{if(this._closed)return r(new p.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(t).catch(r)}))}handleConsumer(e){e.on("@close",(()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),this._closed||(this._pendingCloseConsumers.set(e.id,e),!1===this._consumerCloseInProgress&&this.closePendingConsumers())})),e.on("@pause",(()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),(0,c.default)((()=>{this._closed||!1===this._consumerPauseInProgress&&this.pausePendingConsumers()}))})),e.on("@resume",(()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),(0,c.default)((()=>{this._closed||!1===this._consumerResumeInProgress&&this.resumePendingConsumers()}))})),e.on("@getstats",((t,r)=>{if(this._closed)return r(new p.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(r)}))}handleDataProducer(e){e.on("@close",(()=>{this._dataProducers.delete(e.id)}))}handleDataConsumer(e){e.on("@close",(()=>{this._dataConsumers.delete(e.id)}))}}t.Transport=y},9992:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidStateError=t.UnsupportedError=void 0;class r extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,r):this.stack=new Error(e).stack}}t.UnsupportedError=r;class n extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(e).stack}}t.InvalidStateError=n},2960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome111=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9072)),u=i(r(8954)),h=r(9992),m=r(9316),f=r(7910),g=r(2770),b=new o.Logger("Chrome111"),v={OS:1024,MIS:1024};class _ extends m.HandlerInterface{static createFactory(){return()=>new _}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=s.parse(r.sdp),a=l.extractRtpCapabilities({sdpObject:n});return u.addNackSuppportForOpus(a),a}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){this.assertNotClosed(),b.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})))}async updateIceServers(e){this.assertNotClosed(),b.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){if(this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1){t.forEach(((e,t)=>{e.rid=`r${t}`}));let e=1,r=1;for(const n of t){const e=n.scalabilityMode?(0,g.parse)(n.scalabilityMode).temporalLayers:3;e>r&&(r=e)}for(const n of t)n.rid="r"+e++,n.scalabilityMode=`L1T${r}`}const a=c.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=d.reduceCodecs(a.codecs,n);const i=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const o=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t}),h=await this._pc.createOffer();let m=s.parse(h.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const f=u.mid;a.mid=f,m=s.parse(this._pc.localDescription.sdp);const v=m.media[o.idx];if(a.rtcp.cname=l.getCname({offerMediaObject:v}),t)if(1===t.length){const e=p.getRtpEncodings({offerMediaObject:v});Object.assign(e[0],t[0]),a.encodings=e}else a.encodings=t;else a.encodings=p.getRtpEncodings({offerMediaObject:v});this._remoteSdp.send({offerMediaObject:v,reuseMid:o.reuseMid,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r,extmapAllowMixed:!0});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(f,u),{localId:f,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){if(this.assertSendDirection(),b.debug("stopSending() [localId:%s]",e),this._closed)return;const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);if(this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(a){}const r=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?b.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):b.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertNotClosed(),this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};b.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;b.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{trackId:e,rtpParameters:t}=s,n=r.get(e),a=i.media.find((e=>String(e.mid)===n));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:a})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const n of e){b.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("pauseReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("resumeReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};b.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome111=_},564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome55=void 0;const s=i(r(766)),o=r(8562),c=r(9992),d=i(r(3347)),l=i(r(5280)),p=i(r(2267)),u=i(r(9875)),h=r(9316),m=r(7910),f=new o.Logger("Chrome55"),g={OS:1024,MIS:1024};class b extends h.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(f.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){f.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=s.parse(r.sdp);return p.extractRtpCapabilities({sdpObject:n})}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return f.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:d}){f.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",d),video:l.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",d),video:l.getSendingRemoteRtpParameters("video",d)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(f.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){f.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(f.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});f.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();f.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),f.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&f.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let a,i=await this._pc.createOffer(),o=s.parse(i.sdp);const c=d.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=l.reduceCodecs(c.codecs);const h=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=l.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(f.debug("send() | enabling simulcast"),o=s.parse(i.sdp),a=o.media.find((e=>"video"===e.type)),u.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:t.length}),i={type:"offer",sdp:s.write(o)}),f.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i),o=s.parse(this._pc.localDescription.sdp),a=o.media.find((t=>t.type===e.kind)),c.rtcp.cname=p.getCname({offerMediaObject:a}),c.encodings=u.getRtpEncodings({offerMediaObject:a,track:e}),t)for(let s=0;s<c.encodings.length;++s)t[s]&&Object.assign(c.encodings[s],t[s]);if(c.encodings.length>1&&"video/vp8"===c.codecs[0].mimeType.toLowerCase())for(const s of c.encodings)s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:h,codecOptions:r});const m={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m);const g=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(g,e),{localId:g,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),f.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();f.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(a){if(0===this._sendStream.getTracks().length)return void f.warn("stopSending() | ignoring expected error due no sending tracks: %s",a.toString());throw a}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not supported")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};f.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),f.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[];for(const i of e){const{trackId:e,kind:t,rtpParameters:r,streamId:n}=i;f.debug("receive() [trackId:%s, kind:%s]",e,t);const a=t;this._remoteSdp.receive({mid:a,kind:t,offerRtpParameters:r,streamId:n||r.rtcp.cname,trackId:e})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let n=await this._pc.createAnswer();const a=s.parse(n.sdp);for(const i of e){const{kind:e,rtpParameters:t}=i,r=e,n=a.media.find((e=>String(e.mid)===r));p.applyCodecParameters({offerRtpParameters:t,answerMediaObject:n})}n={type:"answer",sdp:s.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:a}),f.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e){const{kind:e,trackId:r,rtpParameters:n}=i,a=e,s=r,o=i.streamId||n.rtcp.cname,c=this._pc.getRemoteStreams().find((e=>e.id===o)).getTrackById(s);if(!c)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(s,{mid:a,rtpParameters:n}),t.push({localId:s,track:c})}return t}async stopReceiving(e){this.assertRecvDirection();for(const n of e){f.debug("stopReceiving() [localId:%s]",n);const{mid:e,rtpParameters:t}=this._mapRecvLocalIdInfo.get(n)||{};this._mapRecvLocalIdInfo.delete(n),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:t})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();f.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:o,protocol:r};f.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome55=b},3560:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome67=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9875)),u=r(9316),h=r(7910),m=new o.Logger("Chrome67"),f={OS:1024,MIS:1024};class g extends u.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=s.parse(r.sdp);return l.extractRtpCapabilities({sdpObject:n})}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:f}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let a,i=await this._pc.createOffer(),o=s.parse(i.sdp);const u=c.clone(this._sendingRtpParametersByKind[e.kind],{});u.codecs=d.reduceCodecs(u.codecs);const h=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=d.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),o=s.parse(i.sdp),a=o.media.find((e=>"video"===e.type)),p.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:t.length}),i={type:"offer",sdp:s.write(o)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i),o=s.parse(this._pc.localDescription.sdp),a=o.media.find((t=>t.type===e.kind)),u.rtcp.cname=l.getCname({offerMediaObject:a}),u.encodings=p.getRtpEncodings({offerMediaObject:a,track:e}),t)for(let s=0;s<u.encodings.length;++s)t[s]&&Object.assign(u.encodings[s],t[s]);if(u.encodings.length>1&&"video/vp8"===u.codecs[0].mimeType.toLowerCase())for(const s of u.encodings)s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:u,answerRtpParameters:h,codecOptions:r});const f={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const g=String(this._nextSendLocalId);this._nextSendLocalId++;const b=this._pc.getSenders().find((t=>t.track===e));return this._mapSendLocalIdRtpSender.set(g,b),{localId:g,rtpParameters:u,rtpSender:b}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(t),t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(a){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",a.toString());throw a}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};m.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%f.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[];for(const i of e){const{trackId:e,kind:t,rtpParameters:r,streamId:n}=i;m.debug("receive() [trackId:%s, kind:%s]",e,t);const a=t;this._remoteSdp.receive({mid:a,kind:t,offerRtpParameters:r,streamId:n||r.rtcp.cname,trackId:e})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let n=await this._pc.createAnswer();const a=s.parse(n.sdp);for(const i of e){const{kind:e,rtpParameters:t}=i,r=e,n=a.media.find((e=>String(e.mid)===r));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:n})}n={type:"answer",sdp:s.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:a}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e){const{kind:e,trackId:r,rtpParameters:n}=i,a=r,s=e,o=this._pc.getReceivers().find((e=>e.track&&e.track.id===a));if(!o)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(a,{mid:s,rtpParameters:n,rtpReceiver:o}),t.push({localId:a,track:o.track,rtpReceiver:o})}return t}async stopReceiving(e){this.assertRecvDirection();for(const n of e){m.debug("stopReceiving() [localId:%s]",n);const{mid:e,rtpParameters:t}=this._mapRecvLocalIdInfo.get(n)||{};this._mapRecvLocalIdInfo.delete(n),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:t})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:o,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome67=g},5372:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome70=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9072)),u=r(9316),h=r(7910),m=r(2770),f=new o.Logger("Chrome70"),g={OS:1024,MIS:1024};class b extends u.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(f.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){f.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=s.parse(r.sdp);return l.extractRtpCapabilities({sdpObject:n})}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return f.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){f.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(f.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){f.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(f.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});f.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();f.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),f.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=c.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=d.reduceCodecs(a.codecs,n);const i=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const o=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let h,g=await this._pc.createOffer(),b=s.parse(g.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:b}),t&&t.length>1&&(f.debug("send() | enabling legacy simulcast"),b=s.parse(g.sdp),h=b.media[o.idx],p.addLegacySimulcast({offerMediaObject:h,numStreams:t.length}),g={type:"offer",sdp:s.write(b)});let v=!1;const _=(0,m.parse)((t||[{}])[0].scalabilityMode);if(t&&1===t.length&&_.spatialLayers>1&&"video/vp9"===a.codecs[0].mimeType.toLowerCase()&&(f.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,b=s.parse(g.sdp),h=b.media[o.idx],p.addLegacySimulcast({offerMediaObject:h,numStreams:_.spatialLayers}),g={type:"offer",sdp:s.write(b)}),f.debug("send() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g),t){f.debug("send() | applying given encodings");const e=u.sender.getParameters();for(let r=0;r<(e.encodings||[]).length;++r){const n=e.encodings[r],a=t[r];if(!a)break;e.encodings[r]=Object.assign(n,a)}await u.sender.setParameters(e)}const y=u.mid;if(a.mid=y,b=s.parse(this._pc.localDescription.sdp),h=b.media[o.idx],a.rtcp.cname=l.getCname({offerMediaObject:h}),a.encodings=p.getRtpEncodings({offerMediaObject:h}),t)for(let s=0;s<a.encodings.length;++s)t[s]&&Object.assign(a.encodings[s],t[s]);if(v&&(a.encodings=[a.encodings[0]]),a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const s of a.encodings)s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:o.reuseMid,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return f.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(y,u),{localId:y,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){this.assertSendDirection(),f.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);if(this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(a){}const r=await this._pc.createOffer();f.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?f.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):f.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),f.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();f.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),f.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();f.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};f.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),f.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;f.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{trackId:e,rtpParameters:t}=s,n=r.get(e),a=i.media.find((e=>String(e.mid)===n));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:a})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),f.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){this.assertRecvDirection();for(const n of e){f.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();f.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:o,protocol:r};f.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome70=b},6656:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome74=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9072)),u=i(r(8954)),h=r(9992),m=r(9316),f=r(7910),g=r(2770),b=new o.Logger("Chrome74"),v={OS:1024,MIS:1024};class _ extends m.HandlerInterface{static createFactory(){return()=>new _}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=s.parse(r.sdp),a=l.extractRtpCapabilities({sdpObject:n});return u.addNackSuppportForOpus(a),a}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){b.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})))}async updateIceServers(e){this.assertNotClosed(),b.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach(((e,t)=>{e.rid=`r${t}`}));const a=c.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=d.reduceCodecs(a.codecs,n);const i=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const o=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t});let h,m=await this._pc.createOffer(),f=s.parse(m.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});let v=!1;const _=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&_.spatialLayers>1&&"video/vp9"===a.codecs[0].mimeType.toLowerCase()&&(b.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,f=s.parse(m.sdp),h=f.media[o.idx],p.addLegacySimulcast({offerMediaObject:h,numStreams:_.spatialLayers}),m={type:"offer",sdp:s.write(f)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y=u.mid;if(a.mid=y,f=s.parse(this._pc.localDescription.sdp),h=f.media[o.idx],a.rtcp.cname=l.getCname({offerMediaObject:h}),t)if(1===t.length){let e=p.getRtpEncodings({offerMediaObject:h});Object.assign(e[0],t[0]),v&&(e=[e[0]]),a.encodings=e}else a.encodings=t;else a.encodings=p.getRtpEncodings({offerMediaObject:h});if(a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const s of a.encodings)s.scalabilityMode?s.scalabilityMode=`L1T${_.temporalLayers}`:s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:o.reuseMid,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r,extmapAllowMixed:!0});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),this._mapMidTransceiver.set(y,u),{localId:y,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){if(this.assertSendDirection(),b.debug("stopSending() [localId:%s]",e),this._closed)return;const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);if(this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(a){}const r=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?b.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):b.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertNotClosed(),this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};b.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;b.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{trackId:e,rtpParameters:t}=s,n=r.get(e),a=i.media.find((e=>String(e.mid)===n));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:a})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const n of e){b.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("pauseReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("resumeReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};b.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome74=_},7392:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Edge11=void 0;const s=r(8562),o=r(9992),c=i(r(3347)),d=i(r(5280)),l=i(r(3635)),p=r(9316),u=new s.Logger("Edge11");class h extends p.HandlerInterface{static createFactory(){return()=>new h}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){u.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}for(const t of this._rtpSenders.values())try{t.stop()}catch(e){}for(const t of this._rtpReceivers.values())try{t.stop()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){return u.debug("getNativeRtpCapabilities()"),l.getCapabilities()}async getNativeSctpCapabilities(){return u.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:p}){u.debug("run()"),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",p),video:d.getSendingRtpParameters("video",p)},this._remoteIceParameters=t,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${c.generateRandomNumber()}`,this.setIceGatherer({iceServers:i,iceTransportPolicy:s}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new o.UnsupportedError("not supported")}async restartIce(e){if(u.debug("restartIce()"),this._remoteIceParameters=e,this._transportReady){u.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const e of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(e);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){u.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),u.debug("send() | calling new RTCRtpSender()");const a=new RTCRtpSender(e,this._dtlsTransport),i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const s=i.codecs.some((e=>/.+\/rtx$/i.test(e.mimeType)));t||(t=[{}]);for(const d of t)d.ssrc=c.generateRandomNumber(),s&&(d.rtx={ssrc:c.generateRandomNumber()});i.encodings=t,i.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const o=l.mangleRtpParameters(i);u.debug("send() | calling rtpSender.send() [params:%o]",o),await a.send(o);const p=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(p,a),{localId:p,rtpParameters:i,rtpSender:a}}async stopSending(e){u.debug("stopSending() [localId:%s]",e);const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{u.debug("stopSending() | calling rtpSender.stop()"),t.stop()}catch(r){throw u.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){t?u.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):u.debug("replaceTrack() [localId:%s, no track]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(t)}async setMaxSpatialLayer(e,t){u.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){u.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");return t.getStats()}async sendDataChannel(e){throw new o.UnsupportedError("not implemented")}async receive(e){const t=[];for(const r of e){const{trackId:e,kind:t}=r;u.debug("receive() [trackId:%s, kind:%s]",e,t)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const r of e){const{trackId:e,kind:n,rtpParameters:a}=r;u.debug("receive() | calling new RTCRtpReceiver()");const i=new RTCRtpReceiver(this._dtlsTransport,n);i.addEventListener("error",(e=>{u.error('rtpReceiver "error" event [event:%o]',e)}));const s=l.mangleRtpParameters(a);u.debug("receive() | calling rtpReceiver.receive() [params:%o]",s),await i.receive(s);const o=e;this._rtpReceivers.set(o,i),t.push({localId:o,track:i.track,rtpReceiver:i})}return t}async stopReceiving(e){for(const r of e){u.debug("stopReceiving() [localId:%s]",r);const e=this._rtpReceivers.get(r);if(!e)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(r);try{u.debug("stopReceiving() | calling rtpReceiver.stop()"),e.stop()}catch(t){u.warn("stopReceiving() | rtpReceiver.stop() failed:%o",t)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const t=this._rtpReceivers.get(e);if(!t)throw new Error("RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel(e){throw new o.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:t}){const r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:t||"all"});r.addEventListener("error",(e=>{u.error('iceGatherer "error" event [event:%o]',e)}));try{r.gather()}catch(n){u.debug("setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",(()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})),e.addEventListener("icestatechange",(()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})),e.addEventListener("candidatepairchange",(e=>{u.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)})),this._iceTransport=e}setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",(()=>{u.debug('dtlsTransport "statechange" event [state:%s]',e.state)})),e.addEventListener("dtlsstatechange",(()=>{u.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),"closed"===e.state&&this.emit("@connectionstatechange","closed")})),e.addEventListener("error",(e=>{u.error('dtlsTransport "error" event [event:%o]',e)})),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){u.debug("setupTransport()");const t=this._dtlsTransport.getLocalParameters();t.role=e,await new Promise(((e,r)=>{this.safeEmit("@connect",{dtlsParameters:t},e,r)})),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter((e=>"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm)),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}t.Edge11=h},1419:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox60=void 0;const s=i(r(766)),o=r(8562),c=r(9992),d=i(r(3347)),l=i(r(5280)),p=i(r(2267)),u=i(r(9072)),h=r(9316),m=r(7910),f=r(2770),g=new o.Logger("Firefox60"),b={OS:16,MIS:2048};class v extends h.HandlerInterface{static createFactory(){return()=>new v}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(g.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");const r=t.captureStream().getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const a=e.addTransceiver(r,{direction:"sendrecv"}),i=a.sender.getParameters(),o=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];i.encodings=o,await a.sender.setParameters(i);const c=await e.createOffer();try{t.remove()}catch(n){}try{r.stop()}catch(n){}try{e.close()}catch(n){}const d=s.parse(c.sdp);return p.extractRtpCapabilities({sdpObject:d})}catch(n){try{t.remove()}catch(a){}try{r.stop()}catch(a){}try{e.close()}catch(a){}throw n}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:b}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:d}){this.assertNotClosed(),g.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",d),video:l.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",d),video:l.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){throw this.assertNotClosed(),new c.UnsupportedError("not supported")}async restartIce(e){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&(t=d.clone(t,[])).length>1&&(t.forEach(((e,t)=>{e.rid=`r${t}`})),t.reverse());const a=d.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=l.reduceCodecs(a.codecs,n);const i=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=l.reduceCodecs(i.codecs,n);const o=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(t){const e=o.sender.getParameters();e.encodings=t,await o.sender.setParameters(e)}const c=await this._pc.createOffer();let h=s.parse(c.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:h});const m=(0,f.parse)((t||[{}])[0].scalabilityMode);g.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const b=o.mid;a.mid=b,h=s.parse(this._pc.localDescription.sdp);const v=h.media[h.media.length-1];if(a.rtcp.cname=p.getCname({offerMediaObject:v}),t)if(1===t.length){const e=u.getRtpEncodings({offerMediaObject:v});Object.assign(e[0],t[0]),a.encodings=e}else a.encodings=t.reverse();else a.encodings=u.getRtpEncodings({offerMediaObject:v});if(a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const s of a.encodings)s.scalabilityMode?s.scalabilityMode=`L1T${m.temporalLayers}`:s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:v,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r,extmapAllowMixed:!0});const _={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),await this._pc.setRemoteDescription(_),this._mapMidTransceiver.set(b,o),{localId:b,rtpParameters:a,rtpSender:o.sender}}async stopSending(e){if(this.assertSendDirection(),g.debug("stopSending() [localId:%s]",e),this._closed)return;const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated transceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.disableMediaSection(t.mid);const r=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?g.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):g.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();t=n.encodings.length-1-t,n.encodings.forEach(((e,r)=>{e.active=r>=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertNotClosed(),this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};g.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%b.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:t}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;g.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const o of e){const{trackId:e,rtpParameters:t}=o,n=r.get(e),c=i.media.find((e=>String(e.mid)===n));p.applyCodecParameters({offerRtpParameters:t,answerMediaObject:c}),a={type:"answer",sdp:s.write(i)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:i}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const n of e){g.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){g.debug("pauseReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){g.debug("resumeReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};g.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:e})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new c.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Firefox60=v},9316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerInterface=void 0;const n=r(4493);class a extends n.EnhancedEventEmitter{constructor(){super()}}t.HandlerInterface=a},4770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNative=void 0;const s=i(r(766)),o=r(8562),c=r(9992),d=i(r(3347)),l=i(r(5280)),p=i(r(2267)),u=i(r(9875)),h=r(9316),m=r(7910),f=new o.Logger("ReactNative"),g={OS:1024,MIS:1024};class b extends h.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(f.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){f.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=s.parse(r.sdp);return p.extractRtpCapabilities({sdpObject:n})}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return f.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:d}){f.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:l.getSendingRtpParameters("audio",d),video:l.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:l.getSendingRemoteRtpParameters("audio",d),video:l.getSendingRemoteRtpParameters("video",d)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(f.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){f.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(f.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});f.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();f.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),f.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&f.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let a,i=await this._pc.createOffer(),o=s.parse(i.sdp);const c=d.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=l.reduceCodecs(c.codecs);const h=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=l.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(f.debug("send() | enabling simulcast"),o=s.parse(i.sdp),a=o.media.find((e=>"video"===e.type)),u.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:t.length}),i={type:"offer",sdp:s.write(o)}),f.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i),o=s.parse(this._pc.localDescription.sdp),a=o.media.find((t=>t.type===e.kind)),c.rtcp.cname=p.getCname({offerMediaObject:a}),c.encodings=u.getRtpEncodings({offerMediaObject:a,track:e}),t)for(let s=0;s<c.encodings.length;++s)t[s]&&Object.assign(c.encodings[s],t[s]);if(c.encodings.length>1&&("video/vp8"===c.codecs[0].mimeType.toLowerCase()||"video/h264"===c.codecs[0].mimeType.toLowerCase()))for(const s of c.encodings)s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:h,codecOptions:r});const m={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m);const g=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(g,e),{localId:g,rtpParameters:c}}async stopSending(e){this.assertSendDirection(),f.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();f.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(a){if(0===this._sendStream.getTracks().length)return void f.warn("stopSending() | ignoring expected error due no sending tracks: %s",a.toString());throw a}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not implemented")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:a};f.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),f.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n}=s;f.debug("receive() [trackId:%s, kind:%s]",e,t);const a=t;let i=s.streamId||n.rtcp.cname;f.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),i+=`-hack-${d.generateRandomNumber()}`,r.set(e,i),this._remoteSdp.receive({mid:a,kind:t,offerRtpParameters:n,streamId:i,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{kind:e,rtpParameters:t}=s,r=e,n=i.media.find((e=>String(e.mid)===r));p.applyCodecParameters({offerRtpParameters:t,answerMediaObject:n})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),f.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{kind:e,trackId:n,rtpParameters:a}=s,i=n,o=e,c=r.get(n),d=this._pc.getRemoteStreams().find((e=>e.id===c)).getTrackById(i);if(!d)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(i,{mid:o,rtpParameters:a}),t.push({localId:i,track:d})}return t}async stopReceiving(e){this.assertRecvDirection();for(const n of e){f.debug("stopReceiving() [localId:%s]",n);const{mid:e,rtpParameters:t}=this._mapRecvLocalIdInfo.get(n)||{};this._mapRecvLocalIdInfo.delete(n),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:t})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();f.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmitTime:i,maxRetransmits:o,protocol:r};f.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.ReactNative=b},3433:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeUnifiedPlan=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9072)),u=i(r(8954)),h=r(9992),m=r(9316),f=r(7910),g=r(2770),b=new o.Logger("ReactNativeUnifiedPlan"),v={OS:1024,MIS:1024};class _ extends m.HandlerInterface{static createFactory(){return()=>new _}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=s.parse(r.sdp),a=l.extractRtpCapabilities({sdpObject:n});return u.addNackSuppportForOpus(a),a}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){this.assertNotClosed(),b.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){this.assertNotClosed(),b.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach(((e,t)=>{e.rid=`r${t}`}));const a=c.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=d.reduceCodecs(a.codecs,n);const i=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const o=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t});let h,m=await this._pc.createOffer(),f=s.parse(m.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});let v=!1;const _=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&_.spatialLayers>1&&"video/vp9"===a.codecs[0].mimeType.toLowerCase()&&(b.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,f=s.parse(m.sdp),h=f.media[o.idx],p.addLegacySimulcast({offerMediaObject:h,numStreams:_.spatialLayers}),m={type:"offer",sdp:s.write(f)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);let y=u.mid??void 0;if(y||b.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),a.mid=y,f=s.parse(this._pc.localDescription.sdp),h=f.media[o.idx],a.rtcp.cname=l.getCname({offerMediaObject:h}),t)if(1===t.length){let e=p.getRtpEncodings({offerMediaObject:h});Object.assign(e[0],t[0]),v&&(e=[e[0]]),a.encodings=e}else a.encodings=t;else a.encodings=p.getRtpEncodings({offerMediaObject:h});if(a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const s of a.encodings)s.scalabilityMode?s.scalabilityMode=`L1T${_.temporalLayers}`:s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:o.reuseMid,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r,extmapAllowMixed:!0});const w={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",w),await this._pc.setRemoteDescription(w),y||(y=u.mid,a.mid=y),this._mapMidTransceiver.set(y,u),{localId:y,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;b.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);if(this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(a){}const r=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly";const r=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?b.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):b.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertNotClosed(),this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};b.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;b.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{trackId:e,rtpParameters:t}=s,n=r.get(e),a=i.media.find((e=>String(e.mid)===n));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:a})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const n of e){b.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("pauseReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("resumeReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};b.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.ReactNativeUnifiedPlan=_},2205:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari11=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9875)),u=r(9316),h=r(7910),m=new o.Logger("Safari11"),f={OS:1024,MIS:1024};class g extends u.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=s.parse(r.sdp);return l.extractRtpCapabilities({sdpObject:n})}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:f}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,planB:!0}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let a,i=await this._pc.createOffer(),o=s.parse(i.sdp);const u=c.clone(this._sendingRtpParametersByKind[e.kind],{});u.codecs=d.reduceCodecs(u.codecs);const h=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=d.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),o=s.parse(i.sdp),a=o.media.find((e=>"video"===e.type)),p.addLegacySimulcast({offerMediaObject:a,track:e,numStreams:t.length}),i={type:"offer",sdp:s.write(o)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i),o=s.parse(this._pc.localDescription.sdp),a=o.media.find((t=>t.type===e.kind)),u.rtcp.cname=l.getCname({offerMediaObject:a}),u.encodings=p.getRtpEncodings({offerMediaObject:a,track:e}),t)for(let s=0;s<u.encodings.length;++s)t[s]&&Object.assign(u.encodings[s],t[s]);if(u.encodings.length>1&&"video/vp8"===u.codecs[0].mimeType.toLowerCase())for(const s of u.encodings)s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:a,offerRtpParameters:u,answerRtpParameters:h,codecOptions:r});const f={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f);const g=String(this._nextSendLocalId);this._nextSendLocalId++;const b=this._pc.getSenders().find((t=>t.track===e));return this._mapSendLocalIdRtpSender.set(g,b),{localId:g,rtpParameters:u,rtpSender:b}}async stopSending(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(a){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",a.toString());throw a}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};m.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%f.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertRecvDirection();const t=[];for(const i of e){const{trackId:e,kind:t,rtpParameters:r,streamId:n}=i;m.debug("receive() [trackId:%s, kind:%s]",e,t);const a=t;this._remoteSdp.receive({mid:a,kind:t,offerRtpParameters:r,streamId:n||r.rtcp.cname,trackId:e})}const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);let n=await this._pc.createAnswer();const a=s.parse(n.sdp);for(const i of e){const{kind:e,rtpParameters:t}=i,r=e,n=a.media.find((e=>String(e.mid)===r));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:n})}n={type:"answer",sdp:s.write(a)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:a}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n);for(const i of e){const{kind:e,trackId:r,rtpParameters:n}=i,a=e,s=r,o=this._pc.getReceivers().find((e=>e.track&&e.track.id===s));if(!o)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(s,{mid:a,rtpParameters:n,rtpReceiver:o}),t.push({localId:s,track:o.track,rtpReceiver:o})}return t}async stopReceiving(e){this.assertRecvDirection();for(const n of e){m.debug("stopReceiving() [localId:%s]",n);const{mid:e,rtpParameters:t}=this._mapRecvLocalIdInfo.get(n)||{};this._mapRecvLocalIdInfo.delete(n),this._remoteSdp.planBStopReceiving({mid:e,offerRtpParameters:t})}const t={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari11=g},9862:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari12=void 0;const s=i(r(766)),o=r(8562),c=i(r(3347)),d=i(r(5280)),l=i(r(2267)),p=i(r(9072)),u=i(r(8954)),h=r(9992),m=r(9316),f=r(7910),g=r(2770),b=new o.Logger("Safari12"),v={OS:1024,MIS:1024};class _ extends m.HandlerInterface{static createFactory(){return()=>new _}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(b.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){b.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=s.parse(r.sdp),a=l.extractRtpCapabilities({sdpObject:n});return u.addNackSuppportForOpus(a),a}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a,iceServers:i,iceTransportPolicy:s,additionalSettings:o,proprietaryConstraints:c,extendedRtpCapabilities:l}){this.assertNotClosed(),b.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:a}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",l),video:d.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",l),video:d.getSendingRemoteRtpParameters("video",l)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:i||[],iceTransportPolicy:s||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},c),this._pc.addEventListener("icegatheringstatechange",(()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)})),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",(()=>{this.emit("@connectionstatechange",this._pc.connectionState)})):this._pc.addEventListener("iceconnectionstatechange",(()=>{switch(b.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){this.assertNotClosed(),b.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),b.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});b.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();b.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertNotClosed(),this.assertSendDirection(),b.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const a=c.clone(this._sendingRtpParametersByKind[e.kind],{});a.codecs=d.reduceCodecs(a.codecs,n);const i=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const o=this._remoteSdp.getNextMediaSectionIdx(),u=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let h,m=await this._pc.createOffer(),f=s.parse(m.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f});const v=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&t.length>1&&(b.debug("send() | enabling legacy simulcast"),f=s.parse(m.sdp),h=f.media[o.idx],p.addLegacySimulcast({offerMediaObject:h,numStreams:t.length}),m={type:"offer",sdp:s.write(f)}),b.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const _=u.mid;if(a.mid=_,f=s.parse(this._pc.localDescription.sdp),h=f.media[o.idx],a.rtcp.cname=l.getCname({offerMediaObject:h}),a.encodings=p.getRtpEncodings({offerMediaObject:h}),t)for(let s=0;s<a.encodings.length;++s)t[s]&&Object.assign(a.encodings[s],t[s]);if(a.encodings.length>1&&("video/vp8"===a.codecs[0].mimeType.toLowerCase()||"video/h264"===a.codecs[0].mimeType.toLowerCase()))for(const s of a.encodings)s.scalabilityMode?s.scalabilityMode=`L1T${v.temporalLayers}`:s.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:h,reuseMid:o.reuseMid,offerRtpParameters:a,answerRtpParameters:i,codecOptions:r});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return b.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(_,u),{localId:_,rtpParameters:a,rtpSender:u.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;b.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);if(this._remoteSdp.closeMediaSection(t.mid))try{t.stop()}catch(a){}const r=await this._pc.createOffer();b.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("pauseSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);const r=await this._pc.createOffer();b.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),b.debug("resumeSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);const r=await this._pc.createOffer();b.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?b.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):b.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{e.active=r<=t})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach(((e,r)=>{n.encodings[r]={...e,...t}})),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);const a=await this._pc.createOffer();b.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",a),await this._pc.setLocalDescription(a);const i={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:a}){this.assertNotClosed(),this.assertSendDirection();const i={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:a};b.debug("sendDataChannel() [options:%o]",i);const o=this._pc.createDataChannel(n,i);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=s.parse(e.sdp),r=t.media.find((e=>"application"===e.type));this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:t}),b.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};b.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}return{dataChannel:o,sctpStreamParameters:{streamId:i.id,ordered:i.ordered,maxPacketLifeTime:i.maxPacketLifeTime,maxRetransmits:i.maxRetransmits}}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();const t=[],r=new Map;for(const s of e){const{trackId:e,kind:t,rtpParameters:n,streamId:a}=s;b.debug("receive() [trackId:%s, kind:%s]",e,t);const i=n.mid||String(this._mapMidTransceiver.size);r.set(e,i),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:n,streamId:a||n.rtcp.cname,trackId:e})}const n={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let a=await this._pc.createAnswer();const i=s.parse(a.sdp);for(const s of e){const{trackId:e,rtpParameters:t}=s,n=r.get(e),a=i.media.find((e=>String(e.mid)===n));l.applyCodecParameters({offerRtpParameters:t,answerMediaObject:a})}a={type:"answer",sdp:s.write(i)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:i}),b.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);for(const s of e){const{trackId:e}=s,n=r.get(e),a=this._pc.getTransceivers().find((e=>e.mid===n));if(!a)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(n,a),t.push({localId:n,track:a.receiver.track,rtpReceiver:a.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(const n of e){b.debug("stopReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(e.mid)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r);for(const n of e)this._mapMidTransceiver.delete(n)}async pauseReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("pauseReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="inactive",this._remoteSdp.pauseMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async resumeReceiving(e){this.assertNotClosed(),this.assertRecvDirection();for(const n of e){b.debug("resumeReceiving() [localId:%s]",n);const e=this._mapMidTransceiver.get(n);if(!e)throw new Error("associated RTCRtpTransceiver not found");e.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(n)}const t={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",t),await this._pc.setRemoteDescription(t);const r=await this._pc.createAnswer();b.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",r),await this._pc.setLocalDescription(r)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o}=e,c={negotiated:!0,id:n,ordered:a,maxPacketLifeTime:i,maxRetransmits:o,protocol:r};b.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=s.parse(t.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:e})}b.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=s.parse(this._pc.localDescription.sdp));const r=l.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise(((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)})),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari12=_},3635:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.mangleRtpParameters=t.getCapabilities=void 0;const s=i(r(3347));t.getCapabilities=function(){const e=RTCRtpReceiver.getCapabilities(),t=s.clone(e,{});for(const r of t.codecs){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){const e=r.parameters;e.apt&&(e.apt=Number(e.apt)),e["packetization-mode"]&&(e["packetization-mode"]=Number(e["packetization-mode"]))}for(const e of r.rtcpFeedback||[])e.parameter||(e.parameter="")}return t},t.mangleRtpParameters=function(e){const t=s.clone(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const r of t.codecs)r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return t}},8954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNackSuppportForOpus=void 0,t.addNackSuppportForOpus=function(e){for(const t of e.codecs||[])"audio/opus"!==t.mimeType.toLowerCase()&&"audio/multiopus"!==t.mimeType.toLowerCase()||t.rtcpFeedback?.some((e=>"nack"===e.type&&!e.parameter))||(t.rtcpFeedback||(t.rtcpFeedback=[]),t.rtcpFeedback.push({type:"nack"}))}},6698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OfferMediaSection=t.AnswerMediaSection=t.MediaSection=void 0;const s=i(r(766)),o=i(r(3347));class c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,e&&this.setIceParameters(e),t){this._mediaObject.candidates=[];for(const e of t){const t={component:1};t.foundation=e.foundation,t.ip=e.ip,t.port=e.port,t.priority=e.priority,t.transport=e.protocol,t.type=e.type,e.tcpType&&(t.tcptype=e.tcpType),this._mediaObject.candidates.push(t)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return 0===this._mediaObject.port}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}t.MediaSection=c;t.AnswerMediaSection=class extends c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1,offerMediaObject:s,offerRtpParameters:c,answerRtpParameters:l,codecOptions:p,extmapAllowMixed:u=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:i}),this._mediaObject.mid=String(s.mid),this._mediaObject.type=s.type,this._mediaObject.protocol=s.protocol,a?(this._mediaObject.connection={ip:a.ip,version:a.ipVersion},this._mediaObject.port=a.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),s.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const e of l.codecs){const t={payload:e.payloadType,codec:d(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),this._mediaObject.rtp.push(t);const r=o.clone(e.parameters,{});let n=o.clone(e.rtcpFeedback,[]);if(p){const{opusStereo:t,opusFec:a,opusDtx:i,opusMaxPlaybackRate:s,opusMaxAverageBitrate:o,opusPtime:d,opusNack:l,videoGoogleStartBitrate:u,videoGoogleMaxBitrate:h,videoGoogleMinBitrate:m}=p,f=c.codecs.find((t=>t.payloadType===e.payloadType));switch(e.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":void 0!==t&&(f.parameters["sprop-stereo"]=t?1:0,r.stereo=t?1:0),void 0!==a&&(f.parameters.useinbandfec=a?1:0,r.useinbandfec=a?1:0),void 0!==i&&(f.parameters.usedtx=i?1:0,r.usedtx=i?1:0),void 0!==s&&(r.maxplaybackrate=s),void 0!==o&&(r.maxaveragebitrate=o),void 0!==d&&(f.parameters.ptime=d,r.ptime=d),l||(f.rtcpFeedback=f.rtcpFeedback.filter((e=>"nack"!==e.type||e.parameter)),n=n.filter((e=>"nack"!==e.type||e.parameter)));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==u&&(r["x-google-start-bitrate"]=u),void 0!==h&&(r["x-google-max-bitrate"]=h),void 0!==m&&(r["x-google-min-bitrate"]=m)}}const a={payload:e.payloadType,config:""};for(const e of Object.keys(r))a.config&&(a.config+=";"),a.config+=`${e}=${r[e]}`;a.config&&this._mediaObject.fmtp.push(a);for(const i of n)this._mediaObject.rtcpFb.push({payload:e.payloadType,type:i.type,subtype:i.parameter})}this._mediaObject.payloads=l.codecs.map((e=>e.payloadType)).join(" "),this._mediaObject.ext=[];for(const e of l.headerExtensions){(s.ext||[]).some((t=>t.uri===e.uri))&&this._mediaObject.ext.push({uri:e.uri,value:e.id})}if(u&&"extmap-allow-mixed"===s.extmapAllowMixed&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),s.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:s.simulcast.list1},this._mediaObject.rids=[];for(const e of s.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}else if(s.simulcast_03){this._mediaObject.simulcast_03={value:s.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const e of s.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&"video"===this._mediaObject.type&&(this._mediaObject.xGoogleFlag="conference");break;case"application":"number"==typeof s.sctpPort?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):s.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize})}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const t={};for(const a of e)a.rid&&(t[a.rid]=a);const r=this._mediaObject.simulcast.list1,n=s.parseSimulcastStreamList(r);for(const a of n)for(const e of a)e.paused=!t[e.scid]?.active;this._mediaObject.simulcast.list1=n.map((e=>e.map((e=>`${e.paused?"~":""}${e.scid}`)).join(","))).join(";")}};function d(e){const t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}t.OfferMediaSection=class extends c{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1,mid:s,kind:o,offerRtpParameters:c,streamId:l,trackId:p,oldDataChannelSpec:u=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:i}),this._mediaObject.mid=String(s),this._mediaObject.type=o,a?(this._mediaObject.connection={ip:a.ip,version:a.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=a.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=n?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),o){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${l||"-"} ${p}`);for(const n of c.codecs){const e={payload:n.payloadType,codec:d(n),rate:n.clockRate};n.channels>1&&(e.encoding=n.channels),this._mediaObject.rtp.push(e);const t={payload:n.payloadType,config:""};for(const r of Object.keys(n.parameters))t.config&&(t.config+=";"),t.config+=`${r}=${n.parameters[r]}`;t.config&&this._mediaObject.fmtp.push(t);for(const r of n.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:n.payloadType,type:r.type,subtype:r.parameter})}this._mediaObject.payloads=c.codecs.map((e=>e.payloadType)).join(" "),this._mediaObject.ext=[];for(const n of c.headerExtensions)this._mediaObject.ext.push({uri:n.uri,value:n.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const e=c.encodings[0],t=e.ssrc,r=e.rtx&&e.rtx.ssrc?e.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],c.rtcp.cname&&this._mediaObject.ssrcs.push({id:t,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:t,attribute:"msid",value:`${l||"-"} ${p}`}),r&&(c.rtcp.cname&&this._mediaObject.ssrcs.push({id:r,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:r,attribute:"msid",value:`${l||"-"} ${p}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${t} ${r}`}));break}case"application":u?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize)}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:t,trackId:r}){const n=e.encodings[0],a=n.ssrc,i=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,s=this._mediaObject.payloads.split(" ");for(const o of e.codecs){if(s.includes(String(o.payloadType)))continue;const e={payload:o.payloadType,codec:d(o),rate:o.clockRate};o.channels>1&&(e.encoding=o.channels),this._mediaObject.rtp.push(e);const t={payload:o.payloadType,config:""};for(const r of Object.keys(o.parameters))t.config&&(t.config+=";"),t.config+=`${r}=${o.parameters[r]}`;t.config&&this._mediaObject.fmtp.push(t);for(const r of o.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:o.payloadType,type:r.type,subtype:r.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter((e=>!this._mediaObject.payloads.includes(e.payloadType))).map((e=>e.payloadType)).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:`${t||"-"} ${r}`}),i&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:i,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:i,attribute:"msid",value:`${t||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${a} ${i}`}))}planBStopReceiving({offerRtpParameters:e}){const t=e.encodings[0],r=t.ssrc,n=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter((e=>e.id!==r&&e.id!==n)),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter((e=>e.ssrcs!==`${r} ${n}`)))}}},7910:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSdp=void 0;const s=i(r(766)),o=r(8562),c=r(6698),d=new o.Logger("RemoteSdp");t.RemoteSdp=class{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:a,planB:i=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=t,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=a,this._planB=i,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const e=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[e-1].algorithm,hash:r.fingerprints[e-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}a&&(this._sdpObject.origin.address=a.ip,this._sdpObject.origin.ipVer=a.ipVersion)}updateIceParameters(e){d.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const t of this._mediaSections)t.setIceParameters(e)}updateDtlsRole(e){d.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const t of this._mediaSections)t.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:a,extmapAllowMixed:i=!1}){const s=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:n,codecOptions:a,extmapAllowMixed:i});t?this._replaceMediaSection(s,t):this._midToIndex.has(s.mid)?this._replaceMediaSection(s):this._addMediaSection(s)}receive({mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:a}){const i=this._midToIndex.get(e);let s;if(void 0!==i&&(s=this._mediaSections[i]),s)s.planBReceive({offerRtpParameters:r,streamId:n,trackId:a}),this._replaceMediaSection(s);else{s=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:a});const i=this._mediaSections.find((e=>e.closed));i?this._replaceMediaSection(s,i.mid):this._addMediaSection(s)}}pauseMediaSection(e){this._findMediaSection(e).pause()}resumeSendingMediaSection(e){this._findMediaSection(e).resume()}resumeReceivingMediaSection(e){this._findMediaSection(e).resume()}disableMediaSection(e){this._findMediaSection(e).disable()}closeMediaSection(e){const t=this._findMediaSection(e);return e===this._firstMid?(d.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(t.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,t){const r=this._findMediaSection(e);r.muxSimulcastStreams(t),this._replaceMediaSection(r)}planBStopReceiving({mid:e,offerRtpParameters:t}){const r=this._findMediaSection(e);r.planBStopReceiving({offerRtpParameters:t}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:e}){const t=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(t)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const t=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(t)}getSdp(){return this._sdpObject.origin.sessionVersion++,s.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,t){if("string"==typeof t){const r=this._midToIndex.get(t);if(void 0===r)throw new Error(`no media section found for reuseMid '${t}'`);const n=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(n.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{const t=this._midToIndex.get(e.mid);if(void 0===t)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[t]=e,this._sdpObject.media[t]=e.getObject()}}_findMediaSection(e){const t=this._midToIndex.get(e);if(void 0===t)throw new Error(`no media section found with mid '${e}'`);return this._mediaSections[t]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter((e=>!e.closed)).map((e=>e.mid)).join(" "))}}},2267:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCodecParameters=t.getCname=t.extractDtlsParameters=t.extractRtpCapabilities=void 0;const s=i(r(766));t.extractRtpCapabilities=function({sdpObject:e}){const t=new Map,r=[];let n=!1,a=!1;for(const i of e.media){const e=i.type;switch(e){case"audio":if(n)continue;n=!0;break;case"video":if(a)continue;a=!0;break;default:continue}for(const r of i.rtp){const n={kind:e,mimeType:`${e}/${r.codec}`,preferredPayloadType:r.payload,clockRate:r.rate,channels:r.encoding,parameters:{},rtcpFeedback:[]};t.set(n.preferredPayloadType,n)}for(const r of i.fmtp||[]){const e=s.parseParams(r.config),n=t.get(r.payload);n&&(e&&e.hasOwnProperty("profile-level-id")&&(e["profile-level-id"]=String(e["profile-level-id"])),n.parameters=e)}for(const r of i.rtcpFb||[]){const n={type:r.type,parameter:r.subtype};if(n.parameter||delete n.parameter,"*"!==r.payload){const e=t.get(r.payload);if(!e)continue;e.rtcpFeedback.push(n)}else for(const r of t.values())r.kind!==e||/.+\/rtx$/i.test(r.mimeType)||r.rtcpFeedback.push(n)}for(const t of i.ext||[]){if(t["encrypt-uri"])continue;const n={kind:e,uri:t.uri,preferredId:t.value};r.push(n)}}return{codecs:Array.from(t.values()),headerExtensions:r}},t.extractDtlsParameters=function({sdpObject:e}){const t=(e.media||[]).find((e=>e.iceUfrag&&0!==e.port));if(!t)throw new Error("no active media section found");const r=t.fingerprint||e.fingerprint;let n;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}},t.getCname=function({offerMediaObject:e}){const t=(e.ssrcs||[]).find((e=>"cname"===e.attribute));return t?t.value:""},t.applyCodecParameters=function({offerRtpParameters:e,answerMediaObject:t}){for(const r of e.codecs){const e=r.mimeType.toLowerCase();if("audio/opus"!==e)continue;if(!(t.rtp||[]).find((e=>e.payload===r.payloadType)))continue;t.fmtp=t.fmtp||[];let n=t.fmtp.find((e=>e.payload===r.payloadType));n||(n={payload:r.payloadType,config:""},t.fmtp.push(n));const a=s.parseParams(n.config);switch(e){case"audio/opus":{const e=r.parameters["sprop-stereo"];void 0!==e&&(a.stereo=e?1:0);break}}n.config="";for(const t of Object.keys(a))n.config&&(n.config+=";"),n.config+=`${t}=${a[t]}`}}},9875:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e,track:t}){let r;const n=new Set;for(const s of e.ssrcs||[]){if("msid"!==s.attribute)continue;if(s.value.split(" ")[1]===t.id){const e=s.id;n.add(e),r||(r=e)}}if(0===n.size)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);const a=new Map;for(const s of e.ssrcGroups||[]){if("FID"!==s.semantics)continue;let[e,t]=s.ssrcs.split(/\s+/);e=Number(e),t=Number(t),n.has(e)&&(n.delete(e),n.delete(t),a.set(e,t))}for(const s of n)a.set(s,null);const i=[];for(const[s,o]of a){const e={ssrc:s};o&&(e.rtx={ssrc:o}),i.push(e)}return i},t.addLegacySimulcast=function({offerMediaObject:e,track:t,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,a,i;if(!(e.ssrcs||[]).find((e=>{if("msid"!==e.attribute)return!1;return e.value.split(" ")[1]===t.id&&(n=e.id,i=e.value.split(" ")[0],!0)})))throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(e.ssrcGroups||[]).some((e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===n&&(a=Number(t[1]),!0)}));const s=e.ssrcs.find((e=>"cname"===e.attribute&&e.id===n));if(!s)throw new Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);const o=s.value,c=[],d=[];for(let l=0;l<r;++l)c.push(n+l),a&&d.push(a+l);e.ssrcGroups=e.ssrcGroups||[],e.ssrcs=e.ssrcs||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:c.join(" ")});for(let l=0;l<c.length;++l){const r=c[l];e.ssrcs.push({id:r,attribute:"cname",value:o}),e.ssrcs.push({id:r,attribute:"msid",value:`${i} ${t.id}`})}for(let l=0;l<d.length;++l){const r=c[l],n=d[l];e.ssrcs.push({id:n,attribute:"cname",value:o}),e.ssrcs.push({id:n,attribute:"msid",value:`${i} ${t.id}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${r} ${n}`})}}},9072:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e}){const t=new Set;for(const a of e.ssrcs||[]){const e=a.id;t.add(e)}if(0===t.size)throw new Error("no a=ssrc lines found");const r=new Map;for(const a of e.ssrcGroups||[]){if("FID"!==a.semantics)continue;let[e,n]=a.ssrcs.split(/\s+/);e=Number(e),n=Number(n),t.has(e)&&(t.delete(e),t.delete(n),r.set(e,n))}for(const a of t)r.set(a,null);const n=[];for(const[a,i]of r){const e={ssrc:a};i&&(e.rtx={ssrc:i}),n.push(e)}return n},t.addLegacySimulcast=function({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const r=(e.ssrcs||[]).find((e=>"msid"===e.attribute));if(!r)throw new Error("a=ssrc line with msid information not found");const[n,a]=r.value.split(" "),i=r.id;let s;(e.ssrcGroups||[]).some((e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===i&&(s=Number(t[1]),!0)}));const o=e.ssrcs.find((e=>"cname"===e.attribute));if(!o)throw new Error("a=ssrc line with cname information not found");const c=o.value,d=[],l=[];for(let p=0;p<t;++p)d.push(i+p),s&&l.push(s+p);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let p=0;p<d.length;++p){const t=d[p];e.ssrcs.push({id:t,attribute:"cname",value:c}),e.ssrcs.push({id:t,attribute:"msid",value:`${n} ${a}`})}for(let p=0;p<l.length;++p){const t=d[p],r=l[p];e.ssrcs.push({id:r,attribute:"cname",value:c}),e.ssrcs.push({id:r,attribute:"msid",value:`${n} ${a}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${t} ${r}`})}}},960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;const o=s(r(1227));t.debug=o.default;const c=r(3120);Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return c.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return c.detectDevice}});const d=i(r(4191));t.types=d,t.version="3.6.98";var l=r(2770);Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return l.parse}})},5280:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canReceive=t.canSend=t.generateProbatorRtpParameters=t.reduceCodecs=t.getSendingRemoteRtpParameters=t.getSendingRtpParameters=t.getRecvRtpCapabilities=t.getExtendedRtpCapabilities=t.validateSctpStreamParameters=t.validateSctpParameters=t.validateNumSctpStreams=t.validateSctpCapabilities=t.validateRtcpParameters=t.validateRtpEncodingParameters=t.validateRtpHeaderExtensionParameters=t.validateRtpCodecParameters=t.validateRtpParameters=t.validateRtpHeaderExtension=t.validateRtcpFeedback=t.validateRtpCodecCapability=t.validateRtpCapabilities=void 0;const s=i(r(7855)),o=i(r(3347));function c(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(e.kind=r[1].toLowerCase(),e.preferredPayloadType&&"number"!=typeof e.preferredPayloadType)throw new TypeError("invalid codec.preferredPayloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===e.kind?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const n of Object.keys(e.parameters)){let t=e.parameters[n];if(void 0===t&&(e.parameters[n]="",t=""),"string"!=typeof t&&"number"!=typeof t)throw new TypeError(`invalid codec parameter [key:${n}s, value:${t}]`);if("apt"===n&&"number"!=typeof t)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const n of e.rtcpFeedback)d(n)}function d(e){if("object"!=typeof e)throw new TypeError("fb is not an object");if(!e.type||"string"!=typeof e.type)throw new TypeError("missing fb.type");e.parameter&&"string"==typeof e.parameter||(e.parameter="")}function l(e){if("object"!=typeof e)throw new TypeError("ext is not an object");if("audio"!==e.kind&&"video"!==e.kind)throw new TypeError("invalid ext.kind");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.preferredId)throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!=typeof e.preferredEncrypt)throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!=typeof e.direction)throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function p(e){if("object"!=typeof e)throw new TypeError("params is not an object");if(e.mid&&"string"!=typeof e.mid)throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)u(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)h(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)m(t);if(e.rtcp&&"object"!=typeof e.rtcp)throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),f(e.rtcp)}function u(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if("number"!=typeof e.payloadType)throw new TypeError("missing codec.payloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===r[1].toLowerCase()?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const n of Object.keys(e.parameters)){let t=e.parameters[n];if(void 0===t&&(e.parameters[n]="",t=""),"string"!=typeof t&&"number"!=typeof t)throw new TypeError(`invalid codec parameter [key:${n}s, value:${t}]`);if("apt"===n&&"number"!=typeof t)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const n of e.rtcpFeedback)d(n)}function h(e){if("object"!=typeof e)throw new TypeError("ext is not an object");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.id)throw new TypeError("missing ext.id");if(e.encrypt&&"boolean"!=typeof e.encrypt)throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),e.parameters&&"object"==typeof e.parameters||(e.parameters={});for(const t of Object.keys(e.parameters)){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!=typeof r&&"number"!=typeof r)throw new TypeError("invalid header extension parameter")}}function m(e){if("object"!=typeof e)throw new TypeError("encoding is not an object");if(e.ssrc&&"number"!=typeof e.ssrc)throw new TypeError("invalid encoding.ssrc");if(e.rid&&"string"!=typeof e.rid)throw new TypeError("invalid encoding.rid");if(e.rtx&&"object"!=typeof e.rtx)throw new TypeError("invalid encoding.rtx");if(e.rtx&&"number"!=typeof e.rtx.ssrc)throw new TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"==typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!=typeof e.scalabilityMode)throw new TypeError("invalid encoding.scalabilityMode")}function f(e){if("object"!=typeof e)throw new TypeError("rtcp is not an object");if(e.cname&&"string"!=typeof e.cname)throw new TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"==typeof e.reducedSize||(e.reducedSize=!0)}function g(e){if("object"!=typeof e)throw new TypeError("numStreams is not an object");if("number"!=typeof e.OS)throw new TypeError("missing numStreams.OS");if("number"!=typeof e.MIS)throw new TypeError("missing numStreams.MIS")}function b(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function v(e,t,{strict:r=!1,modify:n=!1}={}){const a=e.mimeType.toLowerCase();if(a!==t.mimeType.toLowerCase())return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;switch(a){case"video/h264":if(r){if((e.parameters["packetization-mode"]||0)!==(t.parameters["packetization-mode"]||0))return!1;if(!s.isSameProfile(e.parameters,t.parameters))return!1;let r;try{r=s.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(i){return!1}n&&(r?(e.parameters["profile-level-id"]=r,t.parameters["profile-level-id"]=r):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break;case"video/vp9":if(r){if((e.parameters["profile-id"]||0)!==(t.parameters["profile-id"]||0))return!1}}return!0}function _(e,t){return(!e.kind||!t.kind||e.kind===t.kind)&&e.uri===t.uri}function y(e,t){const r=[];for(const n of e.rtcpFeedback||[]){const e=(t.rtcpFeedback||[]).find((e=>e.type===n.type&&(e.parameter===n.parameter||!e.parameter&&!n.parameter)));e&&r.push(e)}return r}t.validateRtpCapabilities=function(e){if("object"!=typeof e)throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)c(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)l(t)},t.validateRtpCodecCapability=c,t.validateRtcpFeedback=d,t.validateRtpHeaderExtension=l,t.validateRtpParameters=p,t.validateRtpCodecParameters=u,t.validateRtpHeaderExtensionParameters=h,t.validateRtpEncodingParameters=m,t.validateRtcpParameters=f,t.validateSctpCapabilities=function(e){if("object"!=typeof e)throw new TypeError("caps is not an object");if(!e.numStreams||"object"!=typeof e.numStreams)throw new TypeError("missing caps.numStreams");g(e.numStreams)},t.validateNumSctpStreams=g,t.validateSctpParameters=function(e){if("object"!=typeof e)throw new TypeError("params is not an object");if("number"!=typeof e.port)throw new TypeError("missing params.port");if("number"!=typeof e.OS)throw new TypeError("missing params.OS");if("number"!=typeof e.MIS)throw new TypeError("missing params.MIS");if("number"!=typeof e.maxMessageSize)throw new TypeError("missing params.maxMessageSize")},t.validateSctpStreamParameters=function(e){if("object"!=typeof e)throw new TypeError("params is not an object");if("number"!=typeof e.streamId)throw new TypeError("missing params.streamId");let t=!1;if("boolean"==typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!=typeof e.maxPacketLifeTime)throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!=typeof e.maxRetransmits)throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(t||!e.maxPacketLifeTime&&!e.maxRetransmits||(e.ordered=!1),e.label&&"string"!=typeof e.label)throw new TypeError("invalid params.label");if(e.protocol&&"string"!=typeof e.protocol)throw new TypeError("invalid params.protocol")},t.getExtendedRtpCapabilities=function(e,t){const r={codecs:[],headerExtensions:[]};for(const n of t.codecs||[]){if(b(n))continue;const t=(e.codecs||[]).find((e=>v(e,n,{strict:!0,modify:!0})));if(!t)continue;const a={mimeType:t.mimeType,kind:t.kind,clockRate:t.clockRate,channels:t.channels,localPayloadType:t.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:t.parameters,remoteParameters:n.parameters,rtcpFeedback:y(t,n)};r.codecs.push(a)}for(const n of r.codecs){const r=e.codecs.find((e=>b(e)&&e.parameters.apt===n.localPayloadType)),a=t.codecs.find((e=>b(e)&&e.parameters.apt===n.remotePayloadType));r&&a&&(n.localRtxPayloadType=r.preferredPayloadType,n.remoteRtxPayloadType=a.preferredPayloadType)}for(const n of t.headerExtensions){const t=e.headerExtensions.find((e=>_(e,n)));if(!t)continue;const a={kind:n.kind,uri:n.uri,sendId:t.preferredId,recvId:n.preferredId,encrypt:t.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":a.direction="sendrecv";break;case"recvonly":a.direction="sendonly";break;case"sendonly":a.direction="recvonly";break;case"inactive":a.direction="inactive"}r.headerExtensions.push(a)}return r},t.getRecvRtpCapabilities=function(e){const t={codecs:[],headerExtensions:[]};for(const r of e.codecs){const e={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(t.codecs.push(e),!r.remoteRtxPayloadType)continue;const n={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const r of e.headerExtensions){if("sendrecv"!==r.direction&&"recvonly"!==r.direction)continue;const e={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};t.headerExtensions.push(e)}return t},t.getSendingRtpParameters=function(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}return r},t.getSendingRemoteRtpParameters=function(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}if(r.headerExtensions.some((e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri)))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter((e=>"goog-remb"!==e.type));else if(r.headerExtensions.some((e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri)))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter((e=>"transport-cc"!==e.type));else for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter((e=>"transport-cc"!==e.type&&"goog-remb"!==e.type));return r},t.reduceCodecs=function(e,t){const r=[];if(t){for(let n=0;n<e.length;++n)if(v(e[n],t)){r.push(e[n]),b(e[n+1])&&r.push(e[n+1]);break}if(0===r.length)throw new TypeError("no matching codec found")}else r.push(e[0]),b(e[1])&&r.push(e[1]);return r},t.generateProbatorRtpParameters=function(e){p(e=o.clone(e,{}));const t={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=127,t.headerExtensions=e.headerExtensions,t},t.canSend=function(e,t){return t.codecs.some((t=>t.kind===e))},t.canReceive=function(e,t){if(p(e),0===e.codecs.length)return!1;const r=e.codecs[0];return t.codecs.some((e=>e.remotePayloadType===r.payloadType))}},2770:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const r=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");t.parse=function(e){const t=r.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}},4191:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(3120),t),a(r(5202),t),a(r(6569),t),a(r(3504),t),a(r(5504),t),a(r(1623),t),a(r(4879),t),a(r(7774),t),a(r(9316),t),a(r(9992),t)},3347:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumber=t.clone=void 0,t.clone=function(e,t){return void 0===e?t:JSON.parse(JSON.stringify(e))},t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},7824:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,s=365.25*a;function o(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,c){c=c||{};var d=typeof e;if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var c=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*a;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===d&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=a)return o(e,i,a,"day");if(i>=n)return o(e,i,n,"hour");if(i>=r)return o(e,i,r,"minute");if(i>=t)return o(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7576:function(e,t,r){const{EventEmitter:n}=r(7187),a=r(3417);e.exports=class extends n{constructor(e){super(),this.setMaxListeners(1/0),this._logger=e||new a("EnhancedEventEmitter")}safeEmit(e,...t){try{this.emit(e,...t)}catch(r){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,r)}}async safeEmitAsPromise(e,...t){return new Promise(((r,n)=>{this.safeEmit(e,...t,r,n)}))}}},3417:function(e,t,r){const n=r(1227),a="protoo-client";e.exports=class{constructor(e){e?(this._debug=n(`${a}:${e}`),this._warn=n(`${a}:WARN:${e}`),this._error=n(`${a}:ERROR:${e}`)):(this._debug=n(a),this._warn=n(`${a}:WARN`),this._error=n(`${a}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6508:function(e,t,r){const n=r(3417),{generateRandomNumber:a}=r(5654),i=new n("Message");e.exports=class{static parse(e){let t;const r={};try{t=JSON.parse(e)}catch(n){return void i.error("parse() | invalid JSON: %s",n)}if("object"==typeof t&&!Array.isArray(t)){if(t.request){if(r.request=!0,"string"!=typeof t.method)return void i.error("parse() | missing/invalid method field");if("number"!=typeof t.id)return void i.error("parse() | missing/invalid id field");r.id=t.id,r.method=t.method,r.data=t.data||{}}else if(t.response){if(r.response=!0,"number"!=typeof t.id)return void i.error("parse() | missing/invalid id field");r.id=t.id,t.ok?(r.ok=!0,r.data=t.data||{}):(r.ok=!1,r.errorCode=t.errorCode,r.errorReason=t.errorReason)}else{if(!t.notification)return void i.error("parse() | missing request/response field");if(r.notification=!0,"string"!=typeof t.method)return void i.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}return r}i.error("parse() | not an object")}static createRequest(e,t){return{request:!0,id:a(),method:e,data:t||{}}}static createSuccessResponse(e,t){return{response:!0,id:e.id,ok:!0,data:t||{}}}static createErrorResponse(e,t,r){return{response:!0,id:e.id,ok:!1,errorCode:t,errorReason:r}}static createNotification(e,t){return{notification:!0,method:e,data:t||{}}}}},7502:function(e,t,r){const n=r(3417),a=r(7576),i=r(6508),s=new n("Peer");e.exports=class extends a{constructor(e){super(s),s.debug("constructor()"),this._closed=!1,this._transport=e,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(e){throw new Error("cannot override data object")}close(){if(!this._closed){s.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const e of this._sents.values())e.close();this.safeEmit("close")}}async request(e,t=void 0){const r=i.createRequest(e,t);return this._logger.debug("request() [method:%s, id:%s]",e,r.id),await this._transport.send(r),new Promise(((e,t)=>{const n=1500*(15+.1*this._sents.size),a={id:r.id,method:r.method,resolve:t=>{this._sents.delete(r.id)&&(clearTimeout(a.timer),e(t))},reject:e=>{this._sents.delete(r.id)&&(clearTimeout(a.timer),t(e))},timer:setTimeout((()=>{this._sents.delete(r.id)&&t(new Error("request timeout"))}),n),close:()=>{clearTimeout(a.timer),t(new Error("peer closed"))}};this._sents.set(r.id,a)}))}async notify(e,t=void 0){const r=i.createNotification(e,t);this._logger.debug("notify() [method:%s]",e),await this._transport.send(r)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout((()=>{this._closed||(this._connected=!1,this.safeEmit("close"))}));this._transport.on("open",(()=>{this._closed||(s.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))})),this._transport.on("disconnected",(()=>{this._closed||(s.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))})),this._transport.on("failed",(e=>{this._closed||(s.debug('emit "failed" [currentAttempt:%s]',e),this._connected=!1,this.safeEmit("failed",e))})),this._transport.on("close",(()=>{this._closed||(this._closed=!0,s.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))})),this._transport.on("message",(e=>{e.request?this._handleRequest(e):e.response?this._handleResponse(e):e.notification&&this._handleNotification(e)}))}_handleRequest(e){try{this.emit("request",e,(t=>{const r=i.createSuccessResponse(e,t);this._transport.send(r).catch((()=>{}))}),((t,r)=>{t instanceof Error?(r=t.message,t=500):"number"==typeof t&&r instanceof Error&&(r=r.message);const n=i.createErrorResponse(e,t,r);this._transport.send(n).catch((()=>{}))}))}catch(t){const r=i.createErrorResponse(e,500,String(t));this._transport.send(r).catch((()=>{}))}}_handleResponse(e){const t=this._sents.get(e.id);if(t)if(e.ok)t.resolve(e.data);else{const r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}else s.error("received response does not match any sent request [id:%s]",e.id)}_handleNotification(e){this.safeEmit("notification",e)}}},9293:function(e,t,r){const{version:n}=r(7002),a=r(7502),i=r(2165);t._z=a,t.qo=i},2165:function(e,t,r){const n=r(5840).w3cwebsocket,a=r(9353),i=r(3417),s=r(7576),o=r(6508),c={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},d=new i("WebSocketTransport");e.exports=class extends s{constructor(e,t){super(d),d.debug("constructor() [url:%s, options:%o]",e,t),this._closed=!1,this._url=e,this._options=t||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){d.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){d.error("close() | error closing the WebSocket: %o",e)}}}async send(e){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(e))}catch(t){throw d.warn("send() failed:%o",t),t}}_runWebSocket(){const e=a.operation(this._options.retry||c);let t=!1;e.attempt((r=>{this._closed?e.stop():(d.debug("_runWebSocket() [currentAttempt:%s]",r),this._ws=new n(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(t=!0,this.safeEmit("open"))},this._ws.onclose=n=>{if(!this._closed){if(d.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',n.wasClean,n.code,n.reason),4e3!==n.code){if(t){if(e.stop(),this.safeEmit("disconnected"),this._closed)return;return void this._runWebSocket()}if(this.safeEmit("failed",r),this._closed)return;if(e.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||d.error('WebSocket "error" event')},this._ws.onmessage=e=>{if(this._closed)return;const t=o.parse(e.data);t&&(0!==this.listenerCount("message")?this.safeEmit("message",t):d.error('no listeners for WebSocket "message" event, ignoring received message'))})}))}}},5654:function(e,t){t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},4375:function(e,t,r){let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},9921:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,y=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case p:case i:case o:case s:case h:return e;default:switch(e=e&&e.$$typeof){case d:case u:case g:case f:case c:return e;default:return t}}case a:return t}}}function S(e){return w(e)===p}t.AsyncMode=l,t.ConcurrentMode=p,t.ContextConsumer=d,t.ContextProvider=c,t.Element=n,t.ForwardRef=u,t.Fragment=i,t.Lazy=g,t.Memo=f,t.Portal=a,t.Profiler=o,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||w(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===d},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===u},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===f},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===o},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===o||e===s||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===c||e.$$typeof===d||e.$$typeof===u||e.$$typeof===v||e.$$typeof===_||e.$$typeof===y||e.$$typeof===b)},t.typeOf=w},9864:function(e,t,r){"use strict";e.exports=r(9921)},9353:function(e,t,r){e.exports=r(1846)},1846:function(e,t,r){var n=r(1960);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],a=0;a<t.retries;a++)n.push(this.createTimeout(a,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(a,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var a in n=[],e)"function"==typeof e[a]&&n.push(a);for(var i=0;i<n.length;i++){var s=n[i],o=e[s];e[s]=function(n){var a=t.operation(r),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push((function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),s.apply(this,arguments))})),a.attempt((function(){n.apply(e,i)}))}.bind(e,o),e[s].options=r}}},1960:function(e){function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,a=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&a.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var a=this._errors[n],i=a.message,s=(e[i]||0)+1;e[i]=s,s>=r&&(t=a,r=s)}return t}},6692:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},766:function(e,t,r){var n=r(962),a=r(5776);t.write=a,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},962:function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},a=function(e,t,r){var a=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:a&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:a?t[e.name]:t;!function(e,t,r,a){if(a&&!r)t[a]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))}(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=r(6692),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var o=0;o<(i[t]||[]).length;o+=1){var c=i[t][o];if(c.reg.test(s))return a(c,n,s)}})),t.media=r,t};var o=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),a=0;a<r.length;a+=3)t.push({component:r[a],ip:r[a+1],port:r[a+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},5776:function(e,t,r){var n=r(6692),a=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(a,(function(e){if(t>=n)return e;var a=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(a);case"%d":return Number(a);case"%v":return""}}))},s=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?n.push(r[t.name][s]):n.push(r[t.names[a]])}else n.push(r[t.name]);return i.apply(null,n)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||o,a=t.innerOrder||c,i=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(s(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(s(t,r,e))}))}))})),e.media.forEach((function(e){i.push(s("m",n.m[0],e)),a.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(s(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(s(t,r,e))}))}))}))})),i.join("\r\n")+"\r\n"}},2238:function(e,t,r){var n;!function(a,i){"use strict";var s="function",o="undefined",c="object",d="string",l="major",p="model",u="name",h="type",m="vendor",f="version",g="architecture",b="console",v="mobile",_="tablet",y="smarttv",w="wearable",S="embedded",R="Amazon",C="Apple",T="ASUS",O="BlackBerry",E="Browser",x="Chrome",k="Firefox",P="Google",D="Huawei",A="LG",L="Microsoft",I="Motorola",j="Opera",M="Samsung",N="Sharp",B="Sony",F="Xiaomi",z="Zebra",U="Facebook",G="Chromium OS",H="Mac OS",V=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},$=function(e,t){return typeof e===d&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===d)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},W=function(e,t){for(var r,n,a,o,d,l,p=0;p<t.length&&!d;){var u=t[p],h=t[p+1];for(r=n=0;r<u.length&&!d&&u[r];)if(d=u[r++].exec(e))for(a=0;a<h.length;a++)l=d[++n],typeof(o=h[a])===c&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,l):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=l?l.replace(o[1],o[2]):i:this[o[0]]=l?o[1].call(this,l,o[2]):i:4===o.length&&(this[o[0]]=l?o[3].call(this,l.replace(o[1],o[2])):i):this[o]=l||i;p+=2}},Y=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if($(t[r][n],e))return"?"===r?i:r}else if($(t[r],e))return"?"===r?i:r;return e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,j+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[u,j]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+E],f],[/\bfocus\/([\w\.]+)/i],[f,[u,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,j+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,j+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[f,[u,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+E]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+E],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,U],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,x+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,q]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[m,M],[h,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[m,M],[h,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[m,C],[h,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[m,C],[h,_]],[/(macintosh);/i],[p,[m,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[m,N],[h,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[m,D],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[m,D],[h,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[m,F],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[m,"OPPO"],[h,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[m,"Vivo"],[h,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[m,"Realme"],[h,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[m,I],[h,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[m,I],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[m,A],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[m,A],[h,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[m,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[m,"Nokia"],[h,v]],[/(pixel c)\b/i],[p,[m,P],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[m,P],[h,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[m,B],[h,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[m,B],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[m,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[m,R],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[m,R],[h,v]],[/(playbook);[-\w\),; ]+(rim)/i],[p,m,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[m,O],[h,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[m,T],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[m,T],[h,v]],[/(nexus 9)/i],[p,[m,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[p,/_/g," "],[h,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[m,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[m,"Meizu"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,p,[h,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,p,[h,_]],[/(surface duo)/i],[p,[m,L],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[m,"Fairphone"],[h,v]],[/(u304aa)/i],[p,[m,"AT&T"],[h,v]],[/\bsie-(\w*)/i],[p,[m,"Siemens"],[h,v]],[/\b(rct\w+) b/i],[p,[m,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[p,[m,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[p,[m,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[m,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[p,[m,"NuVision"],[h,_]],[/\b(k88) b/i],[p,[m,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[p,[m,"ZTE"],[h,v]],[/\b(gen\d{3}) b.+49h/i],[p,[m,"Swiss"],[h,v]],[/\b(zur\d{3}) b/i],[p,[m,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[p,[m,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],p,[h,_]],[/\b(ns-?\w{0,9}) b/i],[p,[m,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[m,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],p,[h,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],p,[h,v]],[/\b(ph-1) /i],[p,[m,"Essential"],[h,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[m,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[p,[m,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[p,[m,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[p,[m,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[m,p,[h,v]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[m,L],[h,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[m,z],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[m,z],[h,v]],[/smart-tv.+(samsung)/i],[m,[h,y]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[m,M],[h,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,A],[h,y]],[/(apple) ?tv/i],[m,[p,C+" TV"],[h,y]],[/crkey/i],[[p,x+"cast"],[m,P],[h,y]],[/droid.+aft(\w)( bui|\))/i],[p,[m,R],[h,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[m,N],[h,y]],[/(bravia[\w ]+)( bui|\))/i],[p,[m,B],[h,y]],[/(mitv-\w{5}) bui/i],[p,[m,F],[h,y]],[/Hbbtv.*(technisat) (.*);/i],[m,p,[h,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,K],[p,K],[h,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,p,[h,b]],[/droid.+; (shield) bui/i],[p,[m,"Nvidia"],[h,b]],[/(playstation [345portablevi]+)/i],[p,[m,B],[h,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[m,L],[h,b]],[/((pebble))app/i],[m,p,[h,w]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[m,C],[h,w]],[/droid.+; (glass) \d/i],[p,[m,P],[h,w]],[/droid.+; (wt63?0{2,3})\)/i],[p,[m,z],[h,w]],[/(quest( 2| pro)?)/i],[p,[m,U],[h,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,S]],[/(aeobc)\b/i],[p,[m,R],[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,v]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[f,Y,Q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[f,Y,Q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,H],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,G],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},Z=function(e,t){if(typeof e===c&&(t=e,e=i),!(this instanceof Z))return new Z(e,t).getResult();var r=typeof a!==o&&a.navigator?a.navigator:i,n=e||(r&&r.userAgent?r.userAgent:""),b=r&&r.userAgentData?r.userAgentData:i,y=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}(J,t):J,w=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[u]=i,t[f]=i,W.call(t,n,y.browser),t[l]=typeof(e=t[f])===d?e.replace(/[^\d\.]/g,"").split(".")[0]:i,w&&r&&r.brave&&typeof r.brave.isBrave==s&&(t[u]="Brave"),t},this.getCPU=function(){var e={};return e[g]=i,W.call(e,n,y.cpu),e},this.getDevice=function(){var e={};return e[m]=i,e[p]=i,e[h]=i,W.call(e,n,y.device),w&&!e[h]&&b&&b.mobile&&(e[h]=v),w&&"Macintosh"==e[p]&&r&&typeof r.standalone!==o&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[p]="iPad",e[h]=_),e},this.getEngine=function(){var e={};return e[u]=i,e[f]=i,W.call(e,n,y.engine),e},this.getOS=function(){var e={};return e[u]=i,e[f]=i,W.call(e,n,y.os),w&&!e[u]&&b&&"Unknown"!=b.platform&&(e[u]=b.platform.replace(/chrome os/i,G).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===d&&e.length>350?K(e,350):e,this},this.setUA(n),this};Z.VERSION="1.0.35",Z.BROWSER=V([u,f,l]),Z.CPU=V([g]),Z.DEVICE=V([p,m,h,b,v,y,_,w,S]),Z.ENGINE=Z.OS=V([u,f]),typeof t!==o?(e.exports&&(t=e.exports=Z),t.UAParser=Z):r.amdO?(n=function(){return Z}.call(t,r,t,e))===i||(e.exports=n):typeof a!==o&&(a.UAParser=Z);var X=typeof a!==o&&(a.jQuery||a.Zepto);if(X&&!X.ua){var ee=new Z;X.ua=ee.getResult(),X.ua.get=function(){return ee.getUA()},X.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var r in t)X.ua[r]=t[r]}}}("object"==typeof window?window:this)},5840:function(e,t,r){var n;if("object"==typeof globalThis)n=globalThis;else try{n=r(284)}catch(o){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var a=n.WebSocket||n.MozWebSocket,i=r(9387);function s(e,t){return t?new a(e,t):new a(e)}a&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return a[e]}})})),e.exports={w3cwebsocket:a?s:null,version:i}},9387:function(e,t,r){e.exports=r(9794).version},4572:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return i}})},7002:function(e){"use strict";e.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-70b9774b113e25e0a721.js.map